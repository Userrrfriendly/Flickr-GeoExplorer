{"version":3,"sources":["assets/pngLogo.png","assets/SLIDE1.png","assets/SLIDE2.png","assets/SLIDE3.png","requests/flikr.js","context/stateContext.js","context/dispatchContext.js","context/QueryContext/queryContext.js","helpers/db.js","context/rootReducer.js","context/QueryContext/dispatchQueryContext.js","context/QueryContext/queryReducer.js","components/controlPanel/requestsNumberSlider.js","components/controlPanel/selectSortingMethod.js","components/controlPanel/textQuery.js","components/controlPanel/datePickers/minUploadDatePicker.js","components/controlPanel/datePickers/maxUploadDatePicker.js","components/controlPanel/datePickers/minTakenDatePicker.js","components/controlPanel/datePickers/maxTakenDatePicker.js","components/controlPanel/switches/customSwitch.js","components/drawer/drawer.js","helpers/CustomHooks/useMinScreenWidth.js","components/appBar/appBar.js","components/imageWrapper/imageWrapper.js","components/imageWrapper/imageMenu.js","components/imageGrid/imageGrid.js","components/controls/loadMoreBtn.js","components/LoadingBar/loadingBar.js","components/controlPanel/geoCodingBar/geoCodingBar.js","components/controlPanel/expansionPanels.js","components/controlPanel/controlPanel.js","components/controlPanel/controlPanelMobile.js","components/favorites/FavoritesDialog.js","components/lightboxComponents/lightboxHeader.js","components/lightboxComponents/lightboxViewRenderer.js","components/toast/toast.js","components/CarouselShowCase/carouselShowCase.js","App.js","helpers/helpers.js","serviceWorker.js","index.js","context/store.js","context/QueryContext/queryStore.js"],"names":["module","exports","getPhotosByTitle","searchParams","query","console","log","url","URLSearchParams","append","searchText","sortMethod","minUploadDate","maxUploadDate","minTakenDate","maxTakenDate","bounds","south","west","north","east","toFixed","resultsPerPage","page","fetch","then","res","json","stat","currentPage","photos","totalPages","pages","totalPhotos","total","perPage","perpage","photo","map","img","dateupload","datetaken","ownername","geolocation","lat","parseFloat","latitude","lng","longitude","photoId","id","width_t","parseInt","width_c","width_h","width_l","width_m","width_o","height_c","height_h","height_l","height_m","height_o","height","width","src","url_l","url_m","url_o","title","alt","key","owner","thumb","url_t","srcSet","url_c","url_h","sizes","catch","err","message","code","StateContext","React","createContext","DispatchContext","QueryContext","db","Dexie","version","stores","favorites","addImgToFavorites","action","state","args","concat","image","filteredPhotos","isFavorite","transaction","a","async","get","add","e","alert","stack","removeImgFromFavorites","filteredIndex","findIndex","el","index","splice","where","equals","delete","rootReducer","type","userLocation","setUserLocation","length","find","blockedUsers","hiddenPhotos","setPhotos","statePhotosIDs","push","newPhotosFiltered","filter","includes","newHiddenPhotos","updatePhotos","updatedBlockedUsers","userId","blockUser","mapLoaded","setMapLoaded","toast","variant","triggerToast","DispatchQueryContext","queryReducer","setResultsPerPage","setMinUploadDate","setMaxUploadDate","setMinTakenDate","setMaxTakenDate","payload","setSearchMethodSorting","setSearchText","useStyles","makeStyles","root","display","alignItems","justifyContent","input","marginLeft","marginBottom","maxWidth","RequestNumberSlider","props","classes","store","useContext","dispatch","Typography","align","gutterBottom","className","Slider","value","onChange","event","newValue","aria-labelledby","step","min","max","style","marginRight","Input","margin","val","target","Number","isNaN","onBlur","Math","trunc","inputProps","theme","formControl","root_select","textAlign","SelectSortingMethod","FormControl","InputLabel","htmlFor","Select","MenuItem","FormHelperText","TextQuery","handleSubmit","preventDefault","searchFlikr","onSubmit","fullWidth","placeholder","endAdornment","InputAdornment","position","IconButton","aria-label","onClick","Close","MinUploadDatePicker","useState","Date","placeholderDate","setPlaceholderDate","checked","selectedDate","utils","DateFnsUtils","DatePicker","minDate","disabled","label","format","date","Checkbox","alignSelf","color","MaxUploadDatePicker","MinTakenDatePicker","MaxTakenDatePicker","handleDateChange","SwitchButton","FormGroup","row","FormControlLabel","control","Switch","callback","list","fullList","hamburger","withRouter","openQueryOption","setOpenQueryOptions","handleQueryOptionsClick","openMapOptions","setOpenMapOptions","handleMapOptionsClick","drawerOpen","setDrawerOpen","closeDrawer","history","goBack","useEffect","window","onpopstate","location","pathname","startsWith","to","size","MenuRounded","fontSize","Drawer","open","onClose","role","List","ChevronLeft","Divider","ListItem","button","ListItemIcon","Ballot","ListItemText","primary","ExpandLess","ExpandMore","Collapse","in","timeout","unmountOnExit","component","disablePadding","flexFlow","divider","Map","togglePhotoMarkerDisplay","displayPhotoMarkers","toggleFavorites","displayFavorites","Button","marginTop","handleMyLocationClick","MyLocationTwoTone","useMinScreenWidth","width450","useMediaQuery","width900","width1200","bottom","spacing","right","grow","flexGrow","icons_container","logo_container","cursor","HideOnScroll","trigger","useScrollTrigger","Slide","appear","direction","children","ScrollTop","disableHysteresis","threshold","Zoom","anchor","ownerDocument","document","querySelector","scrollIntoView","behavior","block","HideAppBar","smSceen","Fragment","CssBaseline","AppBar","Toolbar","disableGutters","PngLogo","Tooltip","gridDirection","toggleGridDirection","control_icon","handleOpenFavorites","Favorite","Box","Fab","KeyboardArrowUp","pin_to_map_btn","left","backgroundColor","boxShadow","options_btn","top","memo","imageToggleFavorites","openLightbox","handleOpenMenuClick","hover","setHover","useMemo","cont","overflow","container","onMouseEnter","bind","onMouseLeave","onTouchStart","setTimeout","heigth","call","MoreVert","FavoriteBorder","linkStyle","ImageMenu","Menu","anchorEl","keepMounted","Boolean","handleMenuClose","openFavorites","photoData","Link","href","responseDetails","setAnchorEl","setPhotoData","data","currentTarget","imageRenderer","useCallback","renderImage","LoadMoreButton","LoadingBar","LinearProgress","padding","border","flex","iconButton","form","LocationSearch","autoCompleteInputRef","useRef","geocoder","current","google","maps","Geocoder","autocomplete","fillInInput","geocodeAddress","resultsMap","geocode","address","results","status","fitBounds","geometry","viewport","places","Autocomplete","setFields","addListener","Paper","elevation","InputBase","inputRef","defaultValue","orientation","Search","heading","typography","pxToRem","fontWeight","fontWeightRegular","details_root","details_root_geolocation","ExpansionPanels","ExpansionPanel","defaultExpanded","ExpansionPanelSummary","expandIcon","aria-controls","ExpansionPanelDetails","requestOptions","mapOptions","panel","overflowY","panel_item","wrapper","search_photos_box","map_options_container","ImageSearchRounded","loadingPhotos","search_btn_box","ControlPanelMobile","appBar","direction_btn","Transition","forwardRef","ref","setGridDirection","handleClose","handleCloseFavorites","Dialog","fullScreen","TransitionComponent","edge","header_container","zIndex","transition","opacity","lightbox_btn","background","hide_on_idle","LightBoxHeader","currentView","isModal","interactionIsIdle","carouselProps","btn_container_right","modalProps","toggleFullscreen","isFullscreen","FullscreenExit","Fullscreen","LightBoxViewRenderer","getStyles","currentIndex","abs","maxHeight","userSelect","SlideTransition","close","success","error","warning","icon","Toast","Icon","CheckCircle","Error","Warning","queueRef","setOpen","undefined","messageInfo","setMessageInfo","processQueue","shift","getTime","reason","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","onExited","ContentProps","content","slide_text","slide_text_mobile","paddingTop","subtitle","slide_title","whiteSpace","lineHeight","CarouselShowCase","smScreen","mobile","autoplay","closeCarousel","onStart","media","SLIDE1","mediaBackgroundStyle","green","textMobile","text","SLIDE3","SLIDE2","MapWrapper","lazy","navButtonStyles","base","transform","imagePositionerStyles","blanketStyles","queryStore","useHistory","carouselOpen","setCarouselOpen","setOpenFavorites","currentImage","setCurrentImage","viewerIsOpen","setViewerIsOpen","path","resultsRef","setLoadingPhotos","setResponseDetails","setDisplayPhotoMarkers","setDisplayFavorites","getBounds","toJSON","FlikrApi","flickrResValidation","zoomToLocation","cb","waitingThreshold","timer","setInterval","stopTimer","clearInterval","mapReady","panTo","setZoom","navigator","getCurrentPosition","coords","fallback","Skeleton","screenWidth900px","mapsErrorToast","idb","callBack","item","each","styles","blanket","positioner","components","Header","View","views","srcset","caption","x","navigationPrev","navigationNext","isLocalhost","hostname","match","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ReactDOM","render","useReducer","searchRadius","Provider","getElementById","URL","process","origin","addEventListener","response","contentType","headers","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.7e103a88.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/pngLogo.9f3169d5.png\";","module.exports = __webpack_public_path__ + \"static/media/SLIDE1.49a541dd.png\";","module.exports = __webpack_public_path__ + \"static/media/SLIDE2.869e96b8.png\";","module.exports = __webpack_public_path__ + \"static/media/SLIDE3.87f4dc6d.png\";","export const getPhotosByTitle = searchParams => {\r\n  /* This will ask flicker to fetch all photos (that have geolocation)\r\n    that contain the markers location title in any way (tag, image name, album name etc)\r\n    the photos returned will be within a 31km radius from the markers position\r\n    the func returns an array of photos details (id,farm,server etc)\r\n  */\r\n\r\n  console.log(searchParams);\r\n  //query is appended to response object\r\n  let query;\r\n\r\n  let url = new URLSearchParams();\r\n  url.append(\"method\", \"flickr.photos.search\");\r\n  url.append(\"api_key\", \"f6536bb373bca1fcd14d4da1281f2839\");\r\n  // url.append('tags', marker.title); //text produces broader results than tags leave it for now may implement later\r\n  if (searchParams.searchText) url.append(\"text\", searchParams.searchText);\r\n  if (searchParams.sortMethod) url.append(\"sort\", searchParams.sortMethod);\r\n  if (searchParams.minUploadDate) {\r\n    url.append(\"min_upload_date\", searchParams.minUploadDate);\r\n  }\r\n  if (searchParams.maxUploadDate) {\r\n    url.append(\"max_upload_date\", searchParams.maxUploadDate);\r\n  }\r\n  if (searchParams.minTakenDate) {\r\n    url.append(\"min_taken_date\", searchParams.minTakenDate);\r\n  }\r\n  if (searchParams.maxTakenDate) {\r\n    url.append(\"max_taken_date\", searchParams.maxTakenDate);\r\n  }\r\n\r\n  let { south, west, north, east } = searchParams.bounds;\r\n\r\n  south = south.toFixed(5);\r\n  west = west.toFixed(5);\r\n  north = north.toFixed(5);\r\n  east = east.toFixed(5);\r\n\r\n  query = {\r\n    bounds: searchParams.bounds,\r\n    maxTakenDate: searchParams.maxTakenDate,\r\n    maxUploadDate: searchParams.maxUploadDate,\r\n    minTakenDate: searchParams.minTakenDate,\r\n    minUploadDate: searchParams.minUploadDate,\r\n    searchText: searchParams.searchText,\r\n    sortMethod: searchParams.sortMethod\r\n  };\r\n  url.append(\"bbox\", `${west},${south},${east},${north}`);\r\n\r\n  url.append(\"has_geo\", \"1\");\r\n  url.append(\r\n    \"per_page\",\r\n    searchParams.resultsPerPage ? searchParams.resultsPerPage : \"50\"\r\n  ); //250max for photos with geolocation\r\n  url.append(\"format\", \"json\");\r\n  url.append(\"nojsoncallback\", \"1\");\r\n  url.append(\r\n    \"extras\",\r\n    \"url_t,url_m,url_c,url_l,url_h,url_o,geo, date_upload, date_taken, owner_name\"\r\n  );\r\n  if (searchParams.page) url.append(\"page\", searchParams.page);\r\n\r\n  let arrayOfPhotos = fetch(\"https://api.flickr.com/services/rest/?\" + url)\r\n    .then(res => {\r\n      console.log(url);\r\n      return res.json().then(json => {\r\n        console.log(\"*****FLICKR RESPONSE:****\");\r\n        console.log(json);\r\n\r\n        if (json.stat === \"ok\") {\r\n          return {\r\n            ...query,\r\n            stat: json.stat,\r\n            currentPage: json.photos.page,\r\n            totalPages: json.photos.pages,\r\n            totalPhotos: json.photos.total,\r\n            perPage: json.photos.perpage,\r\n            photos: json.photos.photo.map(img => {\r\n              return {\r\n                dateupload: img.dateupload,\r\n                datetaken: img.datetaken,\r\n                ownername: img.ownername,\r\n                geolocation: {\r\n                  lat: parseFloat(img.latitude),\r\n                  lng: parseFloat(img.longitude)\r\n                },\r\n                photoId: img.id,\r\n                width_t: img.width_t ? parseInt(img.width_t) : \"\",\r\n                width_c: img.width_c ? parseInt(img.width_c) : \"\",\r\n                width_h: img.width_h ? parseInt(img.width_h) : \"\",\r\n                width_l: img.width_l ? parseInt(img.width_l) : \"\",\r\n                width_m: img.width_m ? parseInt(img.width_m) : \"\",\r\n                width_o: img.width_o ? parseInt(img.width_o) : \"\",\r\n                height_c: img.height_c ? parseInt(img.height_c) : \"\",\r\n                height_h: img.height_h ? parseInt(img.height_h) : \"\",\r\n                height_l: img.height_l ? parseInt(img.height_l) : \"\",\r\n                height_m: img.height_m ? parseInt(img.height_m) : \"\",\r\n                height_o: img.height_o ? parseInt(img.height_o) : \"\",\r\n                /* since you cant predict in what size will the photo be availiable:\r\n        if medium size is availiable use it if not get the original size\r\n        as fallback give the image 100px width and height */\r\n                height: img.height_m\r\n                  ? parseInt(img.height_m)\r\n                  : img.height_o\r\n                  ? parseInt(img.height_o)\r\n                  : 100,\r\n                width: img.width_m\r\n                  ? parseInt(img.width_m)\r\n                  : img.width_o\r\n                  ? parseInt(img.width_o)\r\n                  : 100,\r\n                src: img.url_l ? img.url_l : img.url_m ? img.url_m : img.url_o,\r\n                title: img.title,\r\n                alt: img.title,\r\n                key: img.id,\r\n                owner: img.owner,\r\n                thumb: img.url_t,\r\n                srcSet: [\r\n                  img.url_m ? `${img.url_m} ${img.width_m}w` : \"\",\r\n                  img.url_c ? `${img.url_c} ${img.width_c}w` : \"\",\r\n                  img.url_l ? `${img.url_l} ${img.width_l}w` : \"\",\r\n                  img.url_h ? `${img.url_h} ${img.width_h}w` : \"\",\r\n                  img.url_o ? `${img.url_o} ${img.width_o}w` : \"\"\r\n                ],\r\n                sizes:\r\n                  \"(min-width: 480px) 50vw, (min-width: 1024px) 33.3vw, 100vw\"\r\n              };\r\n            })\r\n          };\r\n        } else if (json.stat === \"fail\") {\r\n          /** Errors will displayed in a toast from searchFlikr() in App.js\r\n           * sample error from flickr api stat: \"fail\", code: 4, message: \"Not a valid bounding box\" (Antimeridian error)\r\n           */\r\n          return json;\r\n        }\r\n      });\r\n    })\r\n    .catch(err => {\r\n      // set code as 9999 or 8888 to avoid any conflict with flickrs api responses\r\n      if (err.message === \"Failed to fetch\") {\r\n        return { ...err, stat: \"fail\", message: err.message, code: 9999 };\r\n      }\r\n      return {\r\n        ...err,\r\n        stat: \"fail\",\r\n        message: \"Failed to fetch from Flickr...\",\r\n        code: 8888\r\n      };\r\n    });\r\n\r\n  return arrayOfPhotos;\r\n};\r\n\r\nexport const flickrUrlConstructor = array => {\r\n  /* This takes the array of photo information from the getPhotosByTitle() \r\n  and transforms each photo to a straightforward url*/\r\n\r\n  let urlArr = {\r\n    default: [],\r\n    thumbNail: [], //t\r\n    medium: [], //c\r\n    large: [], //b\r\n    title: []\r\n  };\r\n  if (array[0] !== \"error\") {\r\n    for (let i = 0; i < array.length; i++) {\r\n      urlArr.default.push([\r\n        `https://farm${array[i].farm}.staticflickr.com/${array[i].server}/${array[i].id}_${array[i].secret}.jpg`,\r\n        array[i].id,\r\n        [array[i].title][0],\r\n        array[i].owner\r\n      ]);\r\n      urlArr.thumbNail.push([\r\n        `https://farm${array[i].farm}.staticflickr.com/${array[i].server}/${array[i].id}_${array[i].secret}_t.jpg`,\r\n        array[i].id,\r\n        [array[i].title][0]\r\n      ]);\r\n      urlArr.medium.push([\r\n        `https://farm${array[i].farm}.staticflickr.com/${array[i].server}/${array[i].id}_${array[i].secret}_c.jpg`,\r\n        array[i].id,\r\n        [array[i].title][0]\r\n      ]);\r\n      urlArr.large.push([\r\n        `https://farm${array[i].farm}.staticflickr.com/${array[i].server}/${array[i].id}_${array[i].secret}_b.jpg`,\r\n        array[i].id,\r\n        [array[i].title][0]\r\n      ]);\r\n      urlArr.title.push([array[i].title]);\r\n    }\r\n  } else {\r\n    urlArr = {\r\n      error: true,\r\n      default: [\"no-preview128px.png\"],\r\n      thumbNail: [\"no-preview128px.png\"], //t\r\n      medium: [\"no-preview128px.png\"], //c\r\n      large: [\"no-preview128px.png\"] //b\r\n    };\r\n  }\r\n  return urlArr;\r\n};\r\n\r\nexport const getPhotoGeoLocation = photo_id => {\r\n  /* This flicker api call returns a set of coordinates for a given photo\r\n    (Since there are no means to get the coordinates of a batch of photos)\r\n    this method must be called EACH TIME a new photograph marker is to be plotted on the map\r\n  */\r\n  let url = new URLSearchParams();\r\n  url.append(\"method\", \"flickr.photos.geo.getLocation\");\r\n  url.append(\"api_key\", \"f6536bb373bca1fcd14d4da1281f2839\");\r\n  url.append(\"format\", \"json\");\r\n  url.append(\"nojsoncallback\", \"1\");\r\n  url.append(\"photo_id\", photo_id);\r\n\r\n  let result = fetch(\"https://api.flickr.com/services/rest?\" + url)\r\n    .then(res => {\r\n      return res.json().then(json => {\r\n        console.log(json);\r\n        let position = {\r\n          lat: parseFloat(json.photo.location.latitude),\r\n          lng: parseFloat(json.photo.location.longitude)\r\n        };\r\n        return position;\r\n      });\r\n    })\r\n    .catch(err => {\r\n      console.log(err);\r\n      return [\"error\"];\r\n    });\r\n\r\n  return result;\r\n};\r\n","import React from \"react\";\r\n\r\nconst StateContext = React.createContext();\r\n\r\nexport default StateContext;\r\n","import React from \"react\";\r\n\r\nconst DispatchContext = React.createContext();\r\n\r\nexport default DispatchContext;\r\n","import React from \"react\";\r\n\r\nconst QueryContext = React.createContext();\r\n\r\nexport default QueryContext;\r\n","import Dexie from \"dexie\";\r\n\r\nconst db = new Dexie(\"worldGalleryDB\");\r\ndb.version(1).stores({ favorites: \"photoId\" });\r\n\r\nexport const addToFavorites = args => {\r\n  //addToFavorites SHOULD TRIGGER ONLY IF THE GIVEN ENTRY IS NOT already IN indexedDB\r\n  db.transaction(\"rw\", db.favorites, async () => {\r\n    await db.favorites\r\n      .get({ photoId: args.photoId })\r\n      .then(res => {\r\n        if (!res) {\r\n          return (\r\n            db.favorites\r\n              .add({\r\n                ...args\r\n              })\r\n              // .then(entry => {\r\n              //   console.log(\"added:\" + JSON.stringify(entry));\r\n              // })\r\n              .catch(function(e) {\r\n                alert(\"Error: \" + (e.stack || e));\r\n              })\r\n          );\r\n        }\r\n      })\r\n      .catch(function(e) {\r\n        alert(\"Error: \" + (e.stack || e));\r\n      });\r\n  });\r\n};\r\n\r\nexport const deleteFromFavorites = args => {\r\n  return db.favorites\r\n    .where(\"photoId\")\r\n    .equals(args.photoId)\r\n    .delete()\r\n    .catch(function(e) {\r\n      alert(\"Error: \" + (e.stack || e));\r\n    });\r\n};\r\n\r\n/**\r\n * the store needs to be updated with a dispatch action\r\n * the function that holds the dispatch is stored (callback) is IDB() in App.js\r\n */\r\nexport const populateStoreFromDb = callBack => {\r\n  db.transaction(\"rw\", db.favorites, async () => {\r\n    await db.favorites.each(item => callBack(item));\r\n  });\r\n};\r\n\r\nexport default db;\r\n","import { addToFavorites, deleteFromFavorites } from \"../helpers/db\";\r\n\r\nexport const SET_USER_LOCATION = \"SET_USER_LOCATION\";\r\nexport const SET_PHOTOS = \"SET_PHOTOS\";\r\nexport const UPDATE_PHOTOS = \"UPDATE_PHOTOS\";\r\nexport const BLOCK_USER = \"BLOCK_USER\";\r\nexport const ADD_IMG_TO_FAVORITES = \"ADD_IMG_TO_FAVORITES\";\r\nexport const REMOVE_IMG_FROM_FAVORITES = \"REMOVE_IMG_FROM_FAVORITES\";\r\nexport const SET_MAP_LOADED = \"SET_MAP_LOADED\";\r\nexport const MAKE_TOAST = \"MAKE_TOAST\";\r\n\r\nconst setUserLocation = (action, state) => {\r\n  return {\r\n    ...state,\r\n    userLocation: action.userLocation\r\n  };\r\n};\r\n\r\nconst setPhotos = (action, state) => {\r\n  /* currently setPhotos resets blocked users (initial request) */\r\n  let filteredPhotos = action.photos;\r\n\r\n  /**\r\n   * set isFavorite:true to any img returned from the response that is already in favorites\r\n   * so there are no duplicate markers\r\n   **/\r\n  if (state.favorites.length > 0) {\r\n    filteredPhotos = filteredPhotos.map(img => {\r\n      return state.favorites.find(el => el.photoId === img.photoId)\r\n        ? { ...img, isFavorite: true }\r\n        : img;\r\n    });\r\n  }\r\n\r\n  return {\r\n    ...state,\r\n    photos: action.photos,\r\n    filteredPhotos,\r\n    blockedUsers: [],\r\n    hiddenPhotos: []\r\n  };\r\n};\r\n\r\nconst updatePhotos = (action, state) => {\r\n  /** updatePhotos will expand the previous query of photos (previous results + new results) */\r\n  /**One for each sounds better... if true go to newFiltered if false go to newHidden */\r\n\r\n  const statePhotosIDs = [];\r\n  for (const key in state.photos) {\r\n    statePhotosIDs.push(state.photos[key].photoId);\r\n  }\r\n\r\n  const newPhotosFiltered =\r\n    action.photos &&\r\n    action.photos.filter(photo => {\r\n      // if (statePhotosIDs.includes(photo.photoId)) {\r\n      //   alert(\"duplicate photo found! photoID: \" + photo.photoId);\r\n      // }\r\n      /** Since flickrs response from updatePhotos can bring duplicate results\r\n       * Check for each photo if it already exists in the state\r\n       */\r\n      return (\r\n        !state.blockedUsers.includes(photo.owner) &&\r\n        !statePhotosIDs.includes(photo.photoId)\r\n      );\r\n    });\r\n\r\n  const newHiddenPhotos =\r\n    action.photos &&\r\n    action.photos.filter(photo => state.blockedUsers.includes(photo.owner));\r\n\r\n  let filteredPhotos = state.filteredPhotos.concat(newPhotosFiltered);\r\n\r\n  if (state.favorites.length > 0) {\r\n    filteredPhotos = filteredPhotos.map(img => {\r\n      return state.favorites.find(el => el.photoId === img.photoId)\r\n        ? { ...img, isFavorite: true }\r\n        : img;\r\n    });\r\n  }\r\n\r\n  const hiddenPhotos = state.hiddenPhotos.concat(newHiddenPhotos);\r\n  const photos = state.photos.concat(action.photos);\r\n\r\n  return { ...state, photos, filteredPhotos, hiddenPhotos };\r\n};\r\n\r\nconst blockUser = (action, state) => {\r\n  const updatedBlockedUsers = state.blockedUsers.concat(action.userId);\r\n  const filteredPhotos = state.filteredPhotos.filter(\r\n    photo => !updatedBlockedUsers.includes(photo.owner)\r\n  );\r\n  const hiddenPhotos = state.photos.filter(photo =>\r\n    updatedBlockedUsers.includes(photo.owner)\r\n  );\r\n\r\n  return {\r\n    ...state,\r\n    blockedUsers: updatedBlockedUsers,\r\n    filteredPhotos,\r\n    hiddenPhotos\r\n  };\r\n};\r\n\r\nconst addImgToFavorites = (action, state) => {\r\n  const favorites = state.favorites.concat(action.image);\r\n\r\n  const filteredPhotos = state.filteredPhotos\r\n    ? state.filteredPhotos.map(img => {\r\n        return img.photoId === action.image.photoId\r\n          ? { ...img, isFavorite: true }\r\n          : img;\r\n      })\r\n    : null;\r\n\r\n  addToFavorites(action.image); //Add image to favorites in IndexedDB\r\n\r\n  return { ...state, favorites, filteredPhotos };\r\n};\r\n\r\nconst removeImgFromFavorites = (action, state) => {\r\n  const favorites = [...state.favorites];\r\n\r\n  const filteredIndex = state.filteredPhotos\r\n    ? state.filteredPhotos.findIndex(el => el.photoId === action.image.photoId)\r\n    : -1;\r\n\r\n  let filteredPhotos = state.filteredPhotos ? [...state.filteredPhotos] : null;\r\n  if (filteredIndex !== -1) {\r\n    filteredPhotos[filteredIndex].isFavorite = false;\r\n  }\r\n\r\n  const index = favorites.findIndex(\r\n    img => img.photoId === action.image.photoId\r\n  );\r\n\r\n  if (index !== -1) favorites.splice(index, 1);\r\n\r\n  deleteFromFavorites(action.image); //Delete from indexedDB\r\n\r\n  return { ...state, favorites, filteredPhotos };\r\n};\r\n\r\nconst setMapLoaded = (action, state) => {\r\n  return { ...state, mapLoaded: action.mapLoaded };\r\n};\r\n\r\nconst triggerToast = (action, state) => {\r\n  const toast = {\r\n    message: action.message,\r\n    variant: action.variant\r\n  };\r\n  return { ...state, toast };\r\n};\r\n\r\nexport const rootReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case SET_USER_LOCATION:\r\n      console.log(action.type);\r\n      return setUserLocation(action, state);\r\n\r\n    case SET_PHOTOS:\r\n      console.log(action.type);\r\n      return setPhotos(action, state);\r\n    case UPDATE_PHOTOS:\r\n      console.log(action.type);\r\n      return updatePhotos(action, state);\r\n    case BLOCK_USER:\r\n      console.log(action.type);\r\n      return blockUser(action, state);\r\n    case ADD_IMG_TO_FAVORITES:\r\n      console.log(action.type);\r\n      return addImgToFavorites(action, state);\r\n    case REMOVE_IMG_FROM_FAVORITES:\r\n      console.log(action.type);\r\n      return removeImgFromFavorites(action, state);\r\n    case SET_MAP_LOADED:\r\n      console.log(action.type);\r\n      return setMapLoaded(action, state);\r\n    case MAKE_TOAST:\r\n      console.log(action);\r\n      return triggerToast(action, state);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default rootReducer;\r\n","import React from \"react\";\r\n\r\nconst DispatchQueryContext = React.createContext();\r\n\r\nexport default DispatchQueryContext;\r\n","export const SET_MIN_UPLOAD_DATE = \"SET_MIN_UPLOAD_DATE\";\r\nexport const SET_MAX_UPLOAD_DATE = \"SET_MAX_UPLOAD_DATE\";\r\nexport const SET_MIN_TAKEN_DATE = \"SET_MIN_TAKEN_DATE\";\r\nexport const SET_MAX_TAKEN_DATE = \"SET_MAX_TAKEN_DATE\";\r\nexport const SET_MAX_RESULTS_PER_PAGE = \"SET_MAX_RESULTS_PER_PAGE\";\r\nexport const SET_SEARCH_METHOD_SORTING = \"SET_SEARCH_METHOD_SORTING\";\r\nexport const SET_SEARCH_TEXT = \"SET_SEARCH_TEXT\";\r\n\r\nconst setMinUploadDate = (action, state) => {\r\n  return { ...state, minUploadDate: action.minUploadDate };\r\n};\r\n\r\nconst setMaxUploadDate = (action, state) => {\r\n  return { ...state, maxUploadDate: action.maxUploadDate };\r\n};\r\n\r\nconst setMinTakenDate = (action, state) => {\r\n  return { ...state, minTakenDate: action.minTakenDate };\r\n};\r\n\r\nconst setMaxTakenDate = (action, state) => {\r\n  return { ...state, maxTakenDate: action.maxTakenDate };\r\n};\r\n\r\nconst setResultsPerPage = (action, state) => {\r\n  return {\r\n    ...state,\r\n    resultsPerPage: action.resultsPerPage\r\n  };\r\n};\r\n\r\nconst setSearchMethodSorting = (action, state) => {\r\n  return { ...state, sortMethod: action.payload };\r\n};\r\n\r\nconst setSearchText = (action, state) => {\r\n  return { ...state, searchText: action.payload };\r\n};\r\n\r\nexport const queryReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case SET_MAX_RESULTS_PER_PAGE:\r\n      console.log(action.type);\r\n      return setResultsPerPage(action, state);\r\n    case SET_MIN_UPLOAD_DATE:\r\n      console.log(action.type);\r\n      return setMinUploadDate(action, state);\r\n    case SET_MAX_UPLOAD_DATE:\r\n      console.log(action.type);\r\n      return setMaxUploadDate(action, state);\r\n    case SET_MIN_TAKEN_DATE:\r\n      console.log(action.type);\r\n      return setMinTakenDate(action, state);\r\n    case SET_MAX_TAKEN_DATE:\r\n      console.log(action.type);\r\n      return setMaxTakenDate(action, state);\r\n    case SET_SEARCH_METHOD_SORTING:\r\n      console.log(action.type);\r\n      return setSearchMethodSorting(action, state);\r\n    case SET_SEARCH_TEXT:\r\n      console.log(action.type);\r\n      return setSearchText(action, state);\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default queryReducer;\r\n","import React, { useContext } from \"react\";\r\nimport { makeStyles, Input, Typography, Slider } from \"@material-ui/core/\";\r\nimport QueryContext from \"../../context/QueryContext/queryContext\";\r\nimport DispatchQueryContext from \"../../context/QueryContext/dispatchQueryContext\";\r\nimport { SET_MAX_RESULTS_PER_PAGE } from \"../../context/QueryContext/queryReducer\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    display: \"flex\",\r\n    width: \"100%\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\"\r\n  },\r\n  input: {\r\n    marginLeft: \"1rem\",\r\n    marginBottom: \"1rem\",\r\n    maxWidth: \"4rem\"\r\n  }\r\n});\r\n\r\nexport default function RequestNumberSlider(props) {\r\n  const classes = useStyles();\r\n  const store = useContext(QueryContext);\r\n  const dispatch = useContext(DispatchQueryContext);\r\n\r\n  const handleSliderChange = (event, newValue) => {\r\n    dispatch({\r\n      type: SET_MAX_RESULTS_PER_PAGE,\r\n      resultsPerPage: newValue\r\n    });\r\n  };\r\n\r\n  const handleInputChange = event => {\r\n    let val = parseInt(event.target.value);\r\n    if (!Number.isNaN(val) && typeof val == \"number\") {\r\n      dispatch({\r\n        type: SET_MAX_RESULTS_PER_PAGE,\r\n        resultsPerPage: val\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleBlur = () => {\r\n    const value = store.resultsPerPage;\r\n    if (value <= 10) {\r\n      dispatch({\r\n        type: SET_MAX_RESULTS_PER_PAGE,\r\n        resultsPerPage: 10\r\n      });\r\n    } else if (value <= 250) {\r\n      dispatch({\r\n        type: SET_MAX_RESULTS_PER_PAGE,\r\n        resultsPerPage: Math.trunc(value / 10) * 10\r\n      });\r\n    } else if (value > 250) {\r\n      dispatch({\r\n        type: SET_MAX_RESULTS_PER_PAGE,\r\n        resultsPerPage: 250\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Typography align=\"center\" gutterBottom>\r\n        Number of photos to return per page\r\n      </Typography>\r\n\r\n      <div className={classes.root}>\r\n        <Slider\r\n          value={store.resultsPerPage}\r\n          onChange={handleSliderChange}\r\n          aria-labelledby=\"input-slider\"\r\n          step={10}\r\n          min={10}\r\n          max={250}\r\n          style={{ width: \"75%\", marginRight: \"0.5rem\", marginLeft: \"0.5rem\" }}\r\n        />\r\n        <Input\r\n          className={classes.input}\r\n          value={store.resultsPerPage}\r\n          type=\"number\"\r\n          margin=\"dense\"\r\n          onChange={handleInputChange}\r\n          onBlur={handleBlur}\r\n          inputProps={{\r\n            step: 10,\r\n            min: 10,\r\n            max: 250,\r\n            type: \"number\",\r\n            \"aria-labelledby\": \"input-slider\"\r\n          }}\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport {\r\n  InputLabel,\r\n  MenuItem,\r\n  FormHelperText,\r\n  FormControl,\r\n  Select,\r\n  makeStyles\r\n} from \"@material-ui/core\";\r\nimport QueryContext from \"../../context/QueryContext/queryContext\";\r\nimport DispatchQueryContext from \"../../context/QueryContext/dispatchQueryContext\";\r\nimport { SET_SEARCH_METHOD_SORTING } from \"../../context/QueryContext/queryReducer\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  formControl: {\r\n    width: \"100%\"\r\n  },\r\n  root_select: {\r\n    textAlign: \"left\"\r\n  }\r\n}));\r\n\r\nexport default function SelectSortingMethod(props) {\r\n  const classes = useStyles();\r\n  const store = useContext(QueryContext);\r\n  const dispatch = useContext(DispatchQueryContext);\r\n\r\n  const handleSelectChange = event => {\r\n    dispatch({\r\n      type: SET_SEARCH_METHOD_SORTING,\r\n      payload: event.target.value\r\n    });\r\n  };\r\n\r\n  return (\r\n    <FormControl className={classes.formControl}>\r\n      <InputLabel htmlFor=\"sorting-helper\">Display results by:</InputLabel>\r\n      <Select\r\n        classes={{ root: classes.root_select }}\r\n        value={store.sortMethod}\r\n        onChange={handleSelectChange}\r\n      >\r\n        <MenuItem value={\"date-posted-asc\"}>Date posted ascending</MenuItem>\r\n        <MenuItem value={\"date-posted-desc\"}>Date posted descending</MenuItem>\r\n        <MenuItem value={\"date-taken-asc\"}>Date taken ascending</MenuItem>\r\n        <MenuItem value={\"date-taken-desc\"}>Date taken descending</MenuItem>\r\n      </Select>\r\n      <FormHelperText>\r\n        Sorting filters must be set before photo search\r\n      </FormHelperText>\r\n    </FormControl>\r\n  );\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport {\r\n  InputAdornment,\r\n  InputLabel,\r\n  Input,\r\n  IconButton,\r\n  FormControl,\r\n  FormHelperText\r\n} from \"@material-ui/core/\";\r\nimport { Close } from \"@material-ui/icons/\";\r\nimport QueryContext from \"../../context/QueryContext/queryContext\";\r\nimport DispatchQueryContext from \"../../context/QueryContext/dispatchQueryContext\";\r\nimport { SET_SEARCH_TEXT } from \"../../context/QueryContext/queryReducer\";\r\n\r\nexport default function TextQuery(props) {\r\n  const store = useContext(QueryContext);\r\n  const dispatch = useContext(DispatchQueryContext);\r\n\r\n  const handleInputChange = event => {\r\n    dispatch({\r\n      type: SET_SEARCH_TEXT,\r\n      payload: event.target.value\r\n    });\r\n  };\r\n\r\n  const handleClearInput = e => {\r\n    dispatch({\r\n      type: SET_SEARCH_TEXT,\r\n      payload: \"\"\r\n    });\r\n  };\r\n\r\n  const handleSubmit = e => {\r\n    e.preventDefault();\r\n    props.searchFlikr();\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <FormControl onSubmit={handleSubmit} style={{ width: \"100%\" }}>\r\n        <InputLabel htmlFor=\"adornment-text\">Optional text query</InputLabel>\r\n        <Input\r\n          id=\"adornment-text\"\r\n          type=\"text\"\r\n          fullWidth\r\n          placeholder=\"search for a keyword in tags,albums,titles etc\"\r\n          value={store.searchText}\r\n          onChange={handleInputChange}\r\n          endAdornment={\r\n            <InputAdornment position=\"end\">\r\n              <IconButton\r\n                style={store.searchText.length > 0 ? {} : { display: \"none\" }}\r\n                aria-label=\"toggle password visibility\"\r\n                onClick={handleClearInput}\r\n              >\r\n                <Close />\r\n              </IconButton>\r\n            </InputAdornment>\r\n          }\r\n        />\r\n      </FormControl>\r\n      <FormHelperText style={{ margin: \"5px 0 \" }}>\r\n        Adding text to the query will greatly limit the results\r\n      </FormHelperText>\r\n    </form>\r\n  );\r\n}\r\n","import \"date-fns\";\r\nimport React, { useState, useContext } from \"react\";\r\nimport DateFnsUtils from \"@date-io/date-fns\";\r\nimport { format } from \"date-fns\";\r\nimport { MuiPickersUtilsProvider, DatePicker } from \"@material-ui/pickers\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport QueryContext from \"../../../context/QueryContext/queryContext\";\r\nimport DispatchQueryContext from \"../../../context/QueryContext/dispatchQueryContext\";\r\nimport { SET_MIN_UPLOAD_DATE } from \"../../../context/QueryContext/queryReducer\";\r\n\r\nexport default function MinUploadDatePicker(props) {\r\n  const store = useContext(QueryContext);\r\n  const dispatch = useContext(DispatchQueryContext);\r\n  /** placeholderDate is used:\r\n   * 1) As initial date at the initialization of the component\r\n   * 2) As a placeholder when the user unchecks the checkbox\r\n   * so that the date doesn't reset each time after disabling the datepicker\r\n   * current implementation won't work on mobile because:\r\n   * when the drawer is closed the datepickers are unmounted and its state is wiped\r\n   * -initial minUploadDate is set to Flickrs official launch year 2004\r\n   */\r\n  const [placeholderDate, setPlaceholderDate] = useState(new Date(2004, 1, 1));\r\n\r\n  const checked = store.minUploadDate ? true : false;\r\n  let selectedDate = checked ? store.minUploadDate : placeholderDate;\r\n\r\n  const handleCheckBox = event => {\r\n    if (event.target.checked) {\r\n      dispatch({\r\n        type: SET_MIN_UPLOAD_DATE,\r\n        minUploadDate: format(selectedDate, \"yyyy-MM-dd\")\r\n      });\r\n    } else {\r\n      dispatch({\r\n        type: SET_MIN_UPLOAD_DATE,\r\n        minUploadDate: null\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleDateChange = date => {\r\n    selectedDate = date;\r\n    setPlaceholderDate(date);\r\n    dispatch({\r\n      type: SET_MIN_UPLOAD_DATE,\r\n      minUploadDate: format(date, \"yyyy-MM-dd\") //sql format, also works with flickr api and unlike getUnixTime(date) is readable\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div style={{ display: \"flex\" }}>\r\n      <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n        <DatePicker\r\n          minDate={\"2000,1,1\"}\r\n          style={{ marginLeft: \"0.5rem\" }}\r\n          disabled={!checked}\r\n          margin=\"normal\"\r\n          // id=\"date-picker-dialog\"\r\n          label=\"min upload date\"\r\n          format=\"dd/MM/yyyy\"\r\n          value={selectedDate}\r\n          onChange={handleDateChange}\r\n          // clearable={true}\r\n        />\r\n      </MuiPickersUtilsProvider>\r\n      <Checkbox\r\n        style={{ alignSelf: \"flex-end\", marginLeft: \"1rem\" }}\r\n        checked={checked}\r\n        onChange={handleCheckBox}\r\n        value=\"min upload date\"\r\n        color=\"primary\"\r\n        inputProps={{\r\n          \"aria-label\": \"minimum upload date\"\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import \"date-fns\";\r\nimport React, { useState, useContext } from \"react\";\r\nimport DateFnsUtils from \"@date-io/date-fns\";\r\nimport { format } from \"date-fns\";\r\nimport { MuiPickersUtilsProvider, DatePicker } from \"@material-ui/pickers\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport QueryContext from \"../../../context/QueryContext/queryContext\";\r\nimport DispatchQueryContext from \"../../../context/QueryContext/dispatchQueryContext\";\r\nimport { SET_MAX_UPLOAD_DATE } from \"../../../context/QueryContext/queryReducer\";\r\n\r\nexport default function MaxUploadDatePicker(props) {\r\n  const dispatch = useContext(DispatchQueryContext);\r\n  const store = useContext(QueryContext);\r\n\r\n  const [placeholderDate, setPlaceholderDate] = useState(new Date());\r\n\r\n  const checked = store.maxUploadDate ? true : false;\r\n  let selectedDate = checked ? store.maxUploadDate : placeholderDate;\r\n\r\n  const handleCheckBox = event => {\r\n    if (event.target.checked) {\r\n      dispatch({\r\n        type: SET_MAX_UPLOAD_DATE,\r\n        maxUploadDate: format(selectedDate, \"yyyy-MM-dd\")\r\n      });\r\n    } else {\r\n      dispatch({\r\n        type: SET_MAX_UPLOAD_DATE,\r\n        maxUploadDate: null\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleDateChange = date => {\r\n    selectedDate = date;\r\n    setPlaceholderDate(date);\r\n    dispatch({\r\n      type: SET_MAX_UPLOAD_DATE,\r\n      maxUploadDate: format(date, \"yyyy-MM-dd\")\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div style={{ display: \"flex\" }}>\r\n      <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n        <DatePicker\r\n          minDate={\"2000,1,1\"}\r\n          style={{ marginLeft: \"0.5rem\" }}\r\n          disabled={!checked}\r\n          margin=\"normal\"\r\n          // id=\"date-picker-dialog\"\r\n          label=\"max upload date\"\r\n          format=\"dd/MM/yyyy\"\r\n          value={selectedDate}\r\n          onChange={handleDateChange}\r\n        />\r\n      </MuiPickersUtilsProvider>\r\n      <Checkbox\r\n        style={{ alignSelf: \"flex-end\", marginLeft: \"1rem\" }}\r\n        checked={checked}\r\n        onChange={handleCheckBox}\r\n        value=\"use max upload date\"\r\n        color=\"primary\"\r\n        inputProps={{\r\n          \"aria-label\": \"maximum upload date\"\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import \"date-fns\";\r\nimport React, { useState, useContext } from \"react\";\r\nimport DateFnsUtils from \"@date-io/date-fns\";\r\nimport { format } from \"date-fns\";\r\nimport { MuiPickersUtilsProvider, DatePicker } from \"@material-ui/pickers\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport QueryContext from \"../../../context/QueryContext/queryContext\";\r\nimport DispatchQueryContext from \"../../../context/QueryContext/dispatchQueryContext\";\r\nimport { SET_MIN_TAKEN_DATE } from \"../../../context/QueryContext/queryReducer\";\r\n\r\nexport default function MinTakenDatePicker(props) {\r\n  const dispatch = useContext(DispatchQueryContext);\r\n  const store = useContext(QueryContext);\r\n\r\n  const [placeholderDate, setPlaceholderDate] = useState(new Date(2004, 1, 1));\r\n\r\n  const checked = store.minTakenDate ? true : false;\r\n  let selectedDate = checked ? store.minTakenDate : placeholderDate;\r\n\r\n  const handleCheckBox = event => {\r\n    if (event.target.checked) {\r\n      dispatch({\r\n        type: SET_MIN_TAKEN_DATE,\r\n        minTakenDate: format(selectedDate, \"yyyy-MM-dd\") //sql format readable by humans and flickr API\r\n      });\r\n    } else {\r\n      dispatch({\r\n        type: SET_MIN_TAKEN_DATE,\r\n        minTakenDate: null\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleDateChange = date => {\r\n    selectedDate = date;\r\n    setPlaceholderDate(date);\r\n    dispatch({\r\n      type: SET_MIN_TAKEN_DATE,\r\n      minTakenDate: format(date, \"yyyy-MM-dd\")\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div style={{ display: \"flex\" }}>\r\n      <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n        <DatePicker\r\n          style={{ marginLeft: \"0.5rem\" }}\r\n          disabled={!checked}\r\n          margin=\"normal\"\r\n          // id=\"date-picker-dialog\"\r\n          label=\"min taken date\"\r\n          format=\"dd/MM/yyyy\"\r\n          value={selectedDate}\r\n          onChange={handleDateChange}\r\n        />\r\n      </MuiPickersUtilsProvider>\r\n      <Checkbox\r\n        style={{ alignSelf: \"flex-end\", marginLeft: \"1rem\" }}\r\n        checked={checked}\r\n        onChange={handleCheckBox}\r\n        value=\"min taken date\"\r\n        color=\"primary\"\r\n        inputProps={{\r\n          \"aria-label\": \"minimum taken date\"\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import \"date-fns\";\r\nimport React, { useState, useContext } from \"react\";\r\nimport DateFnsUtils from \"@date-io/date-fns\";\r\nimport { format } from \"date-fns\";\r\nimport { MuiPickersUtilsProvider, DatePicker } from \"@material-ui/pickers\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport QueryContext from \"../../../context/QueryContext/queryContext\";\r\nimport DispatchQueryContext from \"../../../context/QueryContext/dispatchQueryContext\";\r\nimport { SET_MAX_TAKEN_DATE } from \"../../../context/QueryContext/queryReducer\";\r\n\r\nexport default function MaxTakenDatePicker(props) {\r\n  const dispatch = useContext(DispatchQueryContext);\r\n  const store = useContext(QueryContext);\r\n\r\n  const [placeholderDate, setPlaceholderDate] = useState(new Date());\r\n\r\n  const checked = store.maxTakenDate ? true : false;\r\n  let selectedDate = checked ? store.maxTakenDate : placeholderDate;\r\n\r\n  const handleCheckBox = event => {\r\n    if (event.target.checked) {\r\n      dispatch({\r\n        type: SET_MAX_TAKEN_DATE,\r\n        maxTakenDate: format(selectedDate, \"yyyy-MM-dd\")\r\n      });\r\n    } else {\r\n      dispatch({\r\n        type: SET_MAX_TAKEN_DATE,\r\n        maxTakenDate: false\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleDateChange = date => {\r\n    selectedDate = date;\r\n    setPlaceholderDate(date);\r\n    dispatch({\r\n      type: SET_MAX_TAKEN_DATE,\r\n      maxTakenDate: format(date, \"yyyy-MM-dd\")\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div style={{ display: \"flex\" }}>\r\n      <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n        <DatePicker\r\n          style={{ marginLeft: \"0.5rem\" }}\r\n          disabled={!checked}\r\n          margin=\"normal\"\r\n          // id=\"date-picker-dialog\"\r\n          label=\"max taken date\"\r\n          format=\"dd/MM/yyyy\"\r\n          value={selectedDate}\r\n          onChange={date => handleDateChange(date)}\r\n        />\r\n      </MuiPickersUtilsProvider>\r\n      <Checkbox\r\n        style={{ alignSelf: \"flex-end\", marginLeft: \"1rem\" }}\r\n        checked={checked}\r\n        onChange={handleCheckBox}\r\n        value=\"max taken date\"\r\n        color=\"primary\"\r\n        inputProps={{\r\n          \"aria-label\": \"maximum taken date\"\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport FormGroup from \"@material-ui/core/FormGroup\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\n\r\nexport default function SwitchButton(props) {\r\n  const checked = !props.checked;\r\n\r\n  const handleSwitchChange = event => {\r\n    props.callback();\r\n  };\r\n\r\n  return (\r\n    <FormGroup row style={{ justifyContent: \"left\" }}>\r\n      <FormControlLabel\r\n        control={\r\n          <Switch\r\n            checked={checked}\r\n            onChange={handleSwitchChange}\r\n            value={checked}\r\n          />\r\n        }\r\n        label={props.label}\r\n      />\r\n    </FormGroup>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Drawer,\r\n  IconButton,\r\n  List,\r\n  Divider,\r\n  ListItem,\r\n  ListItemIcon,\r\n  ListItemText,\r\n  Collapse,\r\n  Button,\r\n  makeStyles\r\n} from \"@material-ui/core/\";\r\nimport {\r\n  MenuRounded,\r\n  ExpandLess,\r\n  ExpandMore,\r\n  MyLocationTwoTone,\r\n  Map,\r\n  Ballot,\r\n  ChevronLeft\r\n} from \"@material-ui/icons/\";\r\nimport RequstNumberSlider from \"../controlPanel/requestsNumberSlider\";\r\nimport SelectSortingMethod from \"../controlPanel/selectSortingMethod\";\r\nimport TextQuery from \"../controlPanel/textQuery\";\r\nimport MinUploadDatePicker from \"../controlPanel/datePickers/minUploadDatePicker\";\r\nimport MaxUploadDatePicker from \"../controlPanel/datePickers/maxUploadDatePicker\";\r\nimport MinTakenDatePicker from \"../controlPanel/datePickers/minTakenDatePicker\";\r\nimport MaxTakenDatePicker from \"../controlPanel/datePickers/maxTakenDatePicker\";\r\nimport CustomSwitch from \"../controlPanel/switches/customSwitch\";\r\nimport { withRouter, Redirect } from \"react-router-dom\";\r\n\r\nconst useStyles = makeStyles({\r\n  list: {\r\n    width: \"70vw\"\r\n  },\r\n  fullList: {\r\n    width: \"auto\"\r\n  },\r\n  hamburger: {\r\n    marginRight: \"0.5rem\",\r\n    color: \"#fff\"\r\n  }\r\n});\r\n\r\nfunction DrawerMenu(props) {\r\n  const classes = useStyles();\r\n\r\n  const [openQueryOption, setOpenQueryOptions] = useState(false);\r\n  const handleQueryOptionsClick = () => setOpenQueryOptions(!openQueryOption);\r\n  const [openMapOptions, setOpenMapOptions] = useState(false);\r\n  const handleMapOptionsClick = () => setOpenMapOptions(!openMapOptions);\r\n  const [drawerOpen, setDrawerOpen] = useState(false);\r\n\r\n  const openDrawer = () => {\r\n    props.history.push(\"/menu/\");\r\n    setDrawerOpen(true);\r\n  };\r\n\r\n  const closeDrawer = () => {\r\n    setDrawerOpen(false);\r\n    props.history.goBack();\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.onpopstate = () => {\r\n      setDrawerOpen(false);\r\n    };\r\n  });\r\n\r\n  const DrawerItems = () => (\r\n    <div className={classes.list} role=\"presentation\">\r\n      <List style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n        <IconButton onClick={closeDrawer} style={{ marginRight: \"1rem\" }}>\r\n          <ChevronLeft />\r\n        </IconButton>\r\n      </List>\r\n      <Divider />\r\n\r\n      <List>\r\n        <ListItem button onClick={handleQueryOptionsClick}>\r\n          <ListItemIcon>\r\n            <Ballot />\r\n          </ListItemIcon>\r\n          <ListItemText primary=\"Query Options\" />\r\n          {openQueryOption ? <ExpandLess /> : <ExpandMore />}\r\n        </ListItem>\r\n\r\n        <Collapse in={openQueryOption} timeout=\"auto\" unmountOnExit>\r\n          <List component=\"div\" disablePadding>\r\n            <ListItem style={{ flexFlow: \"column\" }}>\r\n              <RequstNumberSlider />\r\n            </ListItem>\r\n\r\n            <ListItem>\r\n              <SelectSortingMethod />\r\n            </ListItem>\r\n\r\n            <ListItem>\r\n              <TextQuery searchFlikr={props.searchFlikr} />\r\n            </ListItem>\r\n\r\n            <Divider className={classes.divider} />\r\n\r\n            <ListItem>\r\n              <MinUploadDatePicker />\r\n            </ListItem>\r\n\r\n            <ListItem>\r\n              <MaxUploadDatePicker />\r\n            </ListItem>\r\n\r\n            <Divider className={classes.divider} />\r\n\r\n            <ListItem>\r\n              <MinTakenDatePicker />\r\n            </ListItem>\r\n            <ListItem>\r\n              <MaxTakenDatePicker />\r\n            </ListItem>\r\n          </List>\r\n        </Collapse>\r\n      </List>\r\n      {/* SECOND COLLAPSABLE LIST  */}\r\n      <List>\r\n        <ListItem button onClick={handleMapOptionsClick}>\r\n          <ListItemIcon>\r\n            <Map />\r\n          </ListItemIcon>\r\n          <ListItemText primary=\"Map Options\" />\r\n          {openMapOptions ? <ExpandLess /> : <ExpandMore />}\r\n        </ListItem>\r\n\r\n        <Collapse in={openMapOptions} timeout=\"auto\" unmountOnExit>\r\n          <List component=\"div\" disablePadding>\r\n            <ListItem>\r\n              <CustomSwitch\r\n                callback={props.togglePhotoMarkerDisplay}\r\n                checked={props.displayPhotoMarkers}\r\n                label=\"Hide all results from the map\"\r\n              />\r\n            </ListItem>\r\n            <ListItem>\r\n              <CustomSwitch\r\n                callback={props.toggleFavorites}\r\n                checked={props.displayFavorites}\r\n                label=\"Hide all favorites from the map\"\r\n              />\r\n            </ListItem>\r\n            <ListItem>\r\n              <Button\r\n                variant=\"contained\"\r\n                style={{ marginTop: \"1rem\", color: \"black\", width: \"100%\" }}\r\n                color=\"secondary\"\r\n                size={\"large\"}\r\n                onClick={props.handleMyLocationClick}\r\n              >\r\n                <MyLocationTwoTone style={{ marginRight: \"1rem\" }} />\r\n                My location\r\n              </Button>\r\n            </ListItem>\r\n          </List>\r\n        </Collapse>\r\n      </List>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      {props.location.pathname.startsWith(\"/menu/\") && !drawerOpen && (\r\n        <Redirect to=\"/\" />\r\n      )}\r\n      <IconButton\r\n        onClick={openDrawer}\r\n        aria-label=\"Open Menu\"\r\n        size=\"medium\"\r\n        className={classes.hamburger}\r\n      >\r\n        <MenuRounded fontSize=\"large\" />\r\n      </IconButton>\r\n\r\n      <Drawer open={drawerOpen} onClose={closeDrawer}>\r\n        {DrawerItems()}\r\n      </Drawer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(DrawerMenu);\r\n","import useMediaQuery from \"@material-ui/core/useMediaQuery\";\r\n\r\nexport const useMinScreenWidth = width => {\r\n  const width450 = useMediaQuery(\"(min-width:450px)\");\r\n  const width900 = useMediaQuery(\"(min-width:900px)\");\r\n  const width1200 = useMediaQuery(\"(min-width:1200px)\");\r\n\r\n  switch (width) {\r\n    case 450:\r\n      return width450;\r\n    case 900:\r\n      return width900;\r\n    case 1200:\r\n      return width1200;\r\n    default:\r\n      break;\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport {\r\n  AppBar,\r\n  Toolbar,\r\n  Typography,\r\n  CssBaseline,\r\n  useScrollTrigger,\r\n  Box,\r\n  Slide,\r\n  Zoom,\r\n  Fab,\r\n  IconButton,\r\n  Tooltip,\r\n  makeStyles,\r\n  useMediaQuery\r\n} from \"@material-ui/core/\";\r\nimport {\r\n  KeyboardArrowUp,\r\n  ViewStream as Rows,\r\n  ViewWeek as Columns,\r\n  Favorite\r\n} from \"@material-ui/icons/\";\r\nimport DrawerMenu from \"../drawer/drawer\";\r\nimport { useMinScreenWidth } from \"../../helpers/CustomHooks/useMinScreenWidth\";\r\nimport PngLogo from \"../../assets/pngLogo.png\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    position: \"fixed\",\r\n    bottom: theme.spacing(2),\r\n    right: theme.spacing(2)\r\n  },\r\n  grow: {\r\n    flexGrow: 1,\r\n    color: \"red\",\r\n    width: \"100px\"\r\n  },\r\n  icons_container: {\r\n    display: \"flex\"\r\n  },\r\n  logo_container: {\r\n    cursor: \"pointer\",\r\n    display: \"flex\",\r\n    alignItems: \"center\"\r\n  },\r\n  favorites: {\r\n    color: \"#ff0000\"\r\n  }\r\n}));\r\n\r\nfunction HideOnScroll(props) {\r\n  const trigger = useScrollTrigger();\r\n  return (\r\n    <Slide appear={false} direction=\"down\" in={!trigger}>\r\n      {props.children}\r\n    </Slide>\r\n  );\r\n}\r\n\r\nfunction ScrollTop(props) {\r\n  const { children } = props;\r\n  const classes = useStyles();\r\n  const trigger = useScrollTrigger({\r\n    disableHysteresis: true,\r\n    threshold: 100\r\n  });\r\n\r\n  const handleClick = event => {\r\n    const anchor = (event.target.ownerDocument || document).querySelector(\r\n      \"#back-to-top-anchor\"\r\n    );\r\n\r\n    if (anchor) {\r\n      anchor.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Zoom in={trigger}>\r\n      <div onClick={handleClick} role=\"presentation\" className={classes.root}>\r\n        {children}\r\n      </div>\r\n    </Zoom>\r\n  );\r\n}\r\n\r\nexport default function HideAppBar(props) {\r\n  const classes = useStyles();\r\n  const smSceen = useMediaQuery(\"(max-width:450px)\");\r\n  const scrollToTop = event => {\r\n    const anchor = (event.target.ownerDocument || document).querySelector(\r\n      \"#back-to-top-anchor\"\r\n    );\r\n    if (anchor) {\r\n      anchor.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <CssBaseline />\r\n      <HideOnScroll {...props}>\r\n        <AppBar>\r\n          <Toolbar disableGutters={useMinScreenWidth(900) ? false : true}>\r\n            {!useMinScreenWidth(900) && (\r\n              <DrawerMenu\r\n                searchFlikr={props.searchFlikr}\r\n                handleMyLocationClick={props.handleMyLocationClick}\r\n                togglePhotoMarkerDisplay={props.togglePhotoMarkerDisplay}\r\n                toggleFavorites={props.toggleFavorites}\r\n                displayPhotoMarkers={props.displayPhotoMarkers}\r\n                displayFavorites={props.displayFavorites}\r\n              />\r\n            )}\r\n\r\n            <div className={classes.logo_container} onClick={scrollToTop}>\r\n              <img\r\n                src={PngLogo}\r\n                aria-label=\"World Gallery Logo\"\r\n                alt=\"World Gallery Logo\"\r\n                style={{ marginRight: \"0.5rem\", height: \"45px\" }}\r\n              />\r\n              <Typography variant=\"h6\">\r\n                <span style={{ color: \"#dedee6\" }}>World</span>\r\n                <span style={{ color: \"#ffc1d5\" }}>Gallery</span>\r\n              </Typography>\r\n            </div>\r\n            <div className={classes.grow} />\r\n            <div className={classes.icons_container}>\r\n              {props.photos > 0 && !smSceen && (\r\n                <Tooltip\r\n                  title={\r\n                    props.gridDirection === \"column\"\r\n                      ? \"Display images as Rows\"\r\n                      : \"Display images as Columns\"\r\n                  }\r\n                  aria-label={\r\n                    props.gridDirection === \"column\"\r\n                      ? \"Display images as Rows\"\r\n                      : \"Display images as Columns\"\r\n                  }\r\n                >\r\n                  <IconButton\r\n                    color=\"inherit\"\r\n                    onClick={props.toggleGridDirection}\r\n                  >\r\n                    {props.gridDirection === \"column\" ? (\r\n                      <>\r\n                        <Rows className={classes.control_icon} />\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <Columns className={classes.control_icon} />\r\n                      </>\r\n                    )}\r\n                  </IconButton>\r\n                </Tooltip>\r\n              )}\r\n\r\n              <Tooltip title=\"Open Favorites\" aria-label=\"Open Favorites\">\r\n                <IconButton\r\n                  color=\"inherit\"\r\n                  aria-label=\"Open Favorites\"\r\n                  onClick={props.handleOpenFavorites}\r\n                >\r\n                  <Favorite className={classes.favorites} />\r\n                </IconButton>\r\n              </Tooltip>\r\n            </div>\r\n          </Toolbar>\r\n        </AppBar>\r\n      </HideOnScroll>\r\n      <Toolbar id=\"back-to-top-anchor\" />\r\n      <Box\r\n        style={\r\n          useMinScreenWidth(1200)\r\n            ? { margin: \"5px 25px 2px\" }\r\n            : { margin: \"5px 0 2px\" }\r\n        }\r\n      >\r\n        {props.children}\r\n      </Box>\r\n      <ScrollTop {...props}>\r\n        <Fab color=\"secondary\" size=\"small\" aria-label=\"scroll back to top\">\r\n          <KeyboardArrowUp />\r\n        </Fab>\r\n      </ScrollTop>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useState, useContext } from \"react\";\r\nimport { Fab, makeStyles, Zoom } from \"@material-ui/core\";\r\nimport { Favorite, FavoriteBorder, MoreVert } from \"@material-ui/icons\";\r\nimport StateContext from \"../../context/stateContext\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  pin_to_map_btn: {\r\n    position: \"absolute\",\r\n    bottom: \"2px\",\r\n    left: \"2px\",\r\n    backgroundColor: \"#f500577a\",\r\n    \"&:hover\": {\r\n      boxShadow: \"0px 0px 11px 0px rgba(0,0,0,0.75)\"\r\n    }\r\n  },\r\n  options_btn: {\r\n    top: \"2px\",\r\n    right: \"2px\",\r\n    position: \"absolute\",\r\n    backgroundColor: \"#ffffffa6\",\r\n    \"&:hover\": {\r\n      backgroundColor: \"#f5f5f5e8\",\r\n      boxShadow: \"0px 0px 11px 0px rgba(0,0,0,0.75)\"\r\n    }\r\n  },\r\n  image: {\r\n    margin: \"2px\",\r\n    display: \"block\"\r\n  }\r\n}));\r\n\r\nconst ImageWrapper = ({\r\n  index,\r\n  photo,\r\n  margin,\r\n  direction,\r\n  top,\r\n  left,\r\n  imageToggleFavorites,\r\n  openLightbox,\r\n  handleOpenMenuClick\r\n}) => {\r\n  const classes = useStyles();\r\n  const state = useContext(StateContext);\r\n  const [hover, setHover] = useState(false);\r\n\r\n  const isFavorite = React.useMemo(\r\n    () =>\r\n      state.favorites.find(el => el.photoId === photo.photoId) ? true : false,\r\n    [state.favorites, photo.photoId]\r\n  );\r\n\r\n  const cont = {\r\n    backgroundColor: \"#eee\",\r\n    cursor: \"pointer\",\r\n    overflow: \"hidden\",\r\n    position: \"relative\"\r\n  };\r\n\r\n  const handleOnMouseEnter = (photo, e) => {\r\n    setHover(true);\r\n  };\r\n  const handleOnMouseLeave = (photo, e) => {\r\n    setHover(false);\r\n  };\r\n\r\n  const handleTouch = () => {\r\n    setHover(true);\r\n    window.setTimeout(() => {\r\n      setHover(false);\r\n    }, 3000);\r\n  };\r\n\r\n  if (direction === \"column\") {\r\n    cont.position = \"absolute\";\r\n    cont.left = left;\r\n    cont.top = top;\r\n  }\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        margin,\r\n        height: photo.height,\r\n        width: photo.width,\r\n        ...cont\r\n      }}\r\n      className={classes.container}\r\n      onMouseEnter={handleOnMouseEnter.bind(this, photo)}\r\n      onMouseLeave={handleOnMouseLeave}\r\n      onTouchStart={handleTouch}\r\n    >\r\n      <img\r\n        src={photo.src}\r\n        title={\r\n          photo.title\r\n            ? photo.title + ` - by user ${photo.ownername}`\r\n            : `untitled - by user ${photo.ownername}`\r\n        }\r\n        alt={photo.alt}\r\n        srcSet={photo.srcSet}\r\n        width={photo.width}\r\n        heigth={photo.height}\r\n        sizes={photo.sizes}\r\n        className={classes.image}\r\n        onClick={event => openLightbox.call(this, event, { index, photo })}\r\n      />\r\n      <Zoom in={hover}>\r\n        <Fab\r\n          size=\"small\"\r\n          aria-label=\"more\"\r\n          className={classes.options_btn}\r\n          onClick={handleOpenMenuClick.bind(this, photo)}\r\n        >\r\n          <MoreVert />\r\n        </Fab>\r\n      </Zoom>\r\n\r\n      <Zoom in={hover}>\r\n        <Fab\r\n          size=\"small\"\r\n          color=\"secondary\"\r\n          aria-label={isFavorite ? \"remove from favorites\" : \"add to favorites\"}\r\n          className={classes.pin_to_map_btn}\r\n          onClick={imageToggleFavorites.bind(this, photo, isFavorite)}\r\n        >\r\n          {isFavorite ? (\r\n            <Favorite style={{ color: \"gold\" }} />\r\n          ) : (\r\n            <FavoriteBorder style={{ color: \"#000\" }} />\r\n          )}\r\n        </Fab>\r\n      </Zoom>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(ImageWrapper);\r\n","import React, { useContext } from \"react\";\r\nimport { Menu, MenuItem, Link } from \"@material-ui/core/\";\r\nimport DispatchContext from \"../../context/dispatchContext\";\r\nimport { BLOCK_USER } from \"../../context/rootReducer\";\r\n\r\nconst linkStyle = {\r\n  width: \"100%\"\r\n};\r\n\r\nexport default function ImageMenu(props) {\r\n  const dispatch = useContext(DispatchContext);\r\n\r\n  const handleHideUser = () => {\r\n    props.handleMenuClose();\r\n    dispatch({\r\n      type: BLOCK_USER,\r\n      userId: props.photoData.owner\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Menu\r\n        id=\"image-menu\"\r\n        anchorEl={props.anchorEl}\r\n        keepMounted\r\n        open={Boolean(props.anchorEl)}\r\n        onClose={props.handleMenuClose}\r\n      >\r\n        {!props.openFavorites && (\r\n          <MenuItem onClick={handleHideUser}>\r\n            Temporary hide photos from this user\r\n          </MenuItem>\r\n        )}\r\n        <MenuItem onClick={props.handleMenuClose}>\r\n          <Link\r\n            style={linkStyle}\r\n            target=\"_blank\"\r\n            href={\r\n              props.photoData\r\n                ? `https://www.flickr.com/photos/${props.photoData.owner}/${props.photoData.photoId}`\r\n                : \"\"\r\n            }\r\n            color=\"inherit\"\r\n          >\r\n            Open Photo in Flickr\r\n          </Link>\r\n        </MenuItem>\r\n      </Menu>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useCallback } from \"react\";\r\nimport Gallery from \"react-photo-gallery\";\r\nimport ImageWrapper from \"../imageWrapper/imageWrapper\";\r\nimport ImageMenu from \"../imageWrapper/imageMenu\";\r\n\r\nimport { Typography } from \"@material-ui/core\";\r\n\r\nconst ImageGrid = ({\r\n  photos,\r\n  responseDetails,\r\n  direction,\r\n  imageToggleFavorites,\r\n  hiddenPhotos,\r\n  openLightbox,\r\n  openFavorites\r\n}) => {\r\n  React.useEffect(() => {\r\n    //debugging\r\n    console.log(\"IMAGE GRID: some props Caused Rerender!!!!!\");\r\n  }, [photos, responseDetails, direction, imageToggleFavorites, hiddenPhotos]);\r\n\r\n  console.log(\"IMAGEGRID UPDATED!\");\r\n\r\n  /** ImageMenu */\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [photoData, setPhotoData] = useState(null);\r\n  const handleOpenMenuClick = (data, event) => {\r\n    setPhotoData(data);\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  const handleMenuClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  /**Wrapper around ImageWrapper */\r\n  const imageRenderer = useCallback(\r\n    props => {\r\n      return (\r\n        <ImageWrapper\r\n          key={props.key}\r\n          margin={\"2px\"}\r\n          index={props.index}\r\n          photo={props.photo}\r\n          left={props.left}\r\n          top={props.top}\r\n          imageToggleFavorites={imageToggleFavorites}\r\n          direction={props.direction}\r\n          openLightbox={props.onClick}\r\n          handleOpenMenuClick={handleOpenMenuClick}\r\n          openFavorites={openFavorites}\r\n        />\r\n      );\r\n    },\r\n    [imageToggleFavorites, openFavorites]\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      {openFavorites ? (\r\n        <>\r\n          <Typography variant=\"subtitle1\" component=\"h2\" gutterBottom>\r\n            {photos.length === 0\r\n              ? \"Favorites is empty\"\r\n              : `${photos.length} photos in favorites:`}\r\n          </Typography>\r\n        </>\r\n      ) : (\r\n        <>\r\n          <Typography\r\n            variant=\"h3\"\r\n            component=\"h1\"\r\n            style={{ marginTop: \"1.9rem\" }}\r\n          >\r\n            Results:\r\n          </Typography>\r\n          <Typography variant=\"subtitle1\" component=\"h2\" gutterBottom>\r\n            {photos.length === 0\r\n              ? `Sorry could not find any photos in that particular area`\r\n              : `Displaying ${photos.length} of total ${responseDetails.totalPhotos} photos found...`}\r\n          </Typography>\r\n        </>\r\n      )}\r\n\r\n      {hiddenPhotos.length > 0 && (\r\n        <Typography variant=\"subtitle2\" component=\"p\" gutterBottom>\r\n          ({hiddenPhotos.length}) photos from blocked users are hidden.\r\n        </Typography>\r\n      )}\r\n\r\n      {photos.length > 0 && (\r\n        <Gallery\r\n          photos={photos}\r\n          direction={direction}\r\n          renderImage={imageRenderer}\r\n          onClick={openLightbox}\r\n          // the above onClick is an optional react-photo-gallery prop\r\n          // It receives the arguments -> event and an object containing the index,\r\n          // Photos obj originally sent and the next and previous photos in the gallery if they exist\r\n        />\r\n      )}\r\n\r\n      <ImageMenu\r\n        anchorEl={anchorEl}\r\n        handleOpenMenuClick={handleOpenMenuClick}\r\n        handleMenuClose={handleMenuClose}\r\n        photoData={photoData}\r\n        openFavorites={openFavorites}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(ImageGrid);\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  button: {\r\n    margin: \"1rem auto\",\r\n    display: \"block\"\r\n  }\r\n}));\r\n\r\nconst LoadMoreButton = props => {\r\n  const classes = useStyles();\r\n  return (\r\n    <Button\r\n      onClick={props.onClick}\r\n      variant=\"outlined\"\r\n      size=\"large\"\r\n      className={classes.button}\r\n    >\r\n      Load more photos\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default LoadMoreButton;\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    flexGrow: 1,\r\n    margin: \"0.5rem 0\"\r\n  }\r\n});\r\n\r\nexport default function LoadingBar() {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <LinearProgress />\r\n      <LinearProgress color=\"secondary\" />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useRef, useEffect, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Paper,\r\n  InputAdornment,\r\n  Divider,\r\n  InputBase,\r\n  IconButton\r\n} from \"@material-ui/core/\";\r\nimport StateContext from \"../../../context/stateContext\";\r\nimport { Close, Search as SearchIcon } from \"@material-ui/icons/\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    padding: \"2px 4px\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    width: \"100%\",\r\n    border: \"1px solid #29272752\"\r\n  },\r\n  input: {\r\n    marginLeft: theme.spacing(1),\r\n    flex: 1\r\n  },\r\n  iconButton: {\r\n    padding: 10\r\n  },\r\n  divider: {\r\n    height: 28,\r\n    margin: 4\r\n  },\r\n  form: {\r\n    display: \"flex\",\r\n    width: \"100%\",\r\n    alignItems: \"center\"\r\n  }\r\n}));\r\n\r\nexport default function LocationSearch() {\r\n  const classes = useStyles();\r\n  const store = useContext(StateContext);\r\n  const autoCompleteInputRef = useRef(null);\r\n\r\n  let geocoder = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (store.mapLoaded) {\r\n      geocoder.current = new window.google.maps.Geocoder();\r\n    }\r\n  }, [store.mapLoaded]);\r\n\r\n  let autocomplete = useRef(null);\r\n  const fillInInput = React.useCallback(() => {\r\n    geocodeAddress(geocoder.current, window.map);\r\n  }, [geocoder]);\r\n\r\n  useEffect(() => {\r\n    console.log(\"USEFFECT ON MOUNT(***********************************)\");\r\n    if (store.mapLoaded) {\r\n      autocomplete.current = new window.google.maps.places.Autocomplete(\r\n        autoCompleteInputRef.current //input element that will be handled to AutoComplete\r\n        // { types: [\"geocode\"] } // If no type is specified, all types will be returned (eg places, addresses etc).\r\n      );\r\n      // Avoid paying for data that you don't need by restricting the set of\r\n      // place fields that are returned to just the address components & the formatted_address.\r\n      autocomplete.current.setFields([\r\n        \"address_component\",\r\n        \"formatted_address\"\r\n      ]);\r\n\r\n      // When the user selects an address from the drop-down,\r\n      autocomplete.current.addListener(\"place_changed\", fillInInput);\r\n    }\r\n  }, [fillInInput, store.mapLoaded]);\r\n\r\n  function geocodeAddress(geocoder, resultsMap) {\r\n    const value = autoCompleteInputRef.current.value;\r\n    geocoder.geocode({ address: value }, function(results, status) {\r\n      if (status === \"OK\") {\r\n        resultsMap.fitBounds(results[0].geometry.viewport);\r\n        // const marker = new window.google.maps.Marker({\r\n        //   map: resultsMap,\r\n        //   position: results[0].geometry.location\r\n        // });\r\n      } else {\r\n        alert(\"Geocode was not successful for the following reason: \" + status);\r\n      }\r\n    });\r\n  }\r\n\r\n  const handleSubmit = e => {\r\n    e.preventDefault();\r\n    geocodeAddress(geocoder.current, window.map);\r\n  };\r\n\r\n  const clearInput = () => {\r\n    autoCompleteInputRef.current.value = \"\";\r\n  };\r\n\r\n  return (\r\n    <Paper className={classes.root} elevation={2}>\r\n      <form onSubmit={handleSubmit} className={classes.form}>\r\n        {/* InputBase is an uncontrolled component so that   google's autocomplete can change its value */}\r\n        <InputBase\r\n          disabled={!store.mapLoaded}\r\n          id=\"autocomplete\"\r\n          inputRef={autoCompleteInputRef}\r\n          className={classes.input}\r\n          placeholder=\"Search address or location\"\r\n          inputProps={{ \"aria-label\": \"search google maps\" }}\r\n          defaultValue=\"\"\r\n          endAdornment={\r\n            <InputAdornment position=\"end\">\r\n              <IconButton\r\n                aria-label=\"clear search google maps input\"\r\n                onClick={clearInput}\r\n              >\r\n                <Close />\r\n              </IconButton>\r\n            </InputAdornment>\r\n          }\r\n        />\r\n        <Divider className={classes.divider} orientation=\"vertical\" />\r\n        <IconButton\r\n          type=\"submit\"\r\n          className={classes.iconButton}\r\n          aria-label=\"search\"\r\n          disabled={!store.mapLoaded}\r\n        >\r\n          <SearchIcon />\r\n        </IconButton>\r\n      </form>\r\n    </Paper>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  makeStyles,\r\n  ExpansionPanel,\r\n  ExpansionPanelSummary,\r\n  ExpansionPanelDetails,\r\n  Typography\r\n} from \"@material-ui/core/\";\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\r\n\r\nimport GeoCodingBar from \"./geoCodingBar/geoCodingBar.js\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    width: \"100%\"\r\n  },\r\n  heading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n    fontWeight: theme.typography.fontWeightRegular\r\n  },\r\n  details_root: {\r\n    display: \"flex\",\r\n    flexFlow: \"column\"\r\n  },\r\n  details_root_geolocation: {\r\n    padding: \"4px\",\r\n    marginBottom: \"12px\"\r\n  }\r\n}));\r\n\r\nexport default function ExpansionPanels(props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <ExpansionPanel defaultExpanded>\r\n        <ExpansionPanelSummary\r\n          expandIcon={<ExpandMoreIcon />}\r\n          aria-controls=\"geolocation-search\"\r\n        >\r\n          <Typography className={classes.heading}>\r\n            Geolocation search\r\n          </Typography>\r\n        </ExpansionPanelSummary>\r\n        <ExpansionPanelDetails\r\n          id=\"geolocation-search\"\r\n          classes={{ root: classes.details_root_geolocation }}\r\n        >\r\n          <GeoCodingBar />\r\n        </ExpansionPanelDetails>\r\n      </ExpansionPanel>\r\n\r\n      <ExpansionPanel>\r\n        <ExpansionPanelSummary\r\n          expandIcon={<ExpandMoreIcon />}\r\n          aria-controls=\"request-options-content\"\r\n        >\r\n          <Typography className={classes.heading}>Query Options</Typography>\r\n        </ExpansionPanelSummary>\r\n        <ExpansionPanelDetails\r\n          id=\"request-options-content\"\r\n          classes={{ root: classes.details_root }}\r\n        >\r\n          {props.requestOptions}\r\n        </ExpansionPanelDetails>\r\n      </ExpansionPanel>\r\n\r\n      <ExpansionPanel>\r\n        <ExpansionPanelSummary\r\n          expandIcon={<ExpandMoreIcon />}\r\n          aria-controls=\"map-options-content\"\r\n        >\r\n          <Typography className={classes.heading}>Map Options</Typography>\r\n        </ExpansionPanelSummary>\r\n        <ExpansionPanelDetails\r\n          id=\"map-options-content\"\r\n          classes={{ root: classes.details_root }}\r\n        >\r\n          {props.mapOptions}\r\n        </ExpansionPanelDetails>\r\n      </ExpansionPanel>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, memo } from \"react\";\r\nimport {\r\n  Paper,\r\n  makeStyles,\r\n  Box,\r\n  Typography,\r\n  Button,\r\n  Divider\r\n} from \"@material-ui/core\";\r\nimport { ImageSearchRounded, MyLocationTwoTone } from \"@material-ui/icons\";\r\nimport SelectSortingMethod from \"./selectSortingMethod\";\r\nimport TextQuery from \"./textQuery\";\r\nimport CustomSwitch from \"./switches/customSwitch\";\r\nimport RequstNumberSlider from \"./requestsNumberSlider\";\r\nimport OptionsPanel from \"./expansionPanels\";\r\nimport MinUploadDatePicker from \"./datePickers/minUploadDatePicker\";\r\nimport MaxUploadDatePicker from \"./datePickers/maxUploadDatePicker\";\r\nimport MaxTakenDatePicker from \"./datePickers/maxTakenDatePicker\";\r\nimport MinTakenDatePicker from \"./datePickers/minTakenDatePicker\";\r\nimport StateContext from \"../../context/stateContext\";\r\nimport LoadingBar from \"../LoadingBar/loadingBar\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  panel: {\r\n    textAlign: \"center\",\r\n    maxWidth: \"40vw\",\r\n    width: \"40vw\",\r\n    display: \"flex\",\r\n    flexFlow: \"column\",\r\n    overflowY: \"scroll\"\r\n  },\r\n  panel_item: {\r\n    margin: \"8px\",\r\n    display: \"flex\"\r\n  },\r\n  wrapper: {\r\n    margin: \"0.5rem\"\r\n  },\r\n  divider: {\r\n    margin: \"1rem 0\"\r\n  },\r\n  control_icon: {\r\n    marginRight: \"1rem\"\r\n  },\r\n  search_photos_box: {\r\n    justifyContent: \"center\"\r\n  },\r\n  map_options_container: {\r\n    display: \"flex\",\r\n    flexFlow: \"column\",\r\n    textAlign: \"left\"\r\n  }\r\n}));\r\n\r\nconst ControlPanel = props => {\r\n  const store = useContext(StateContext);\r\n\r\n  const classes = useStyles();\r\n\r\n  const infoTextBox = `Zoom to the location that you want to search for photos and hit the search button.`;\r\n\r\n  return (\r\n    <Paper className={classes.panel}>\r\n      <div className={classes.wrapper}>\r\n        <Box className={classes.panel_item}>\r\n          <Typography>{infoTextBox}</Typography>\r\n        </Box>\r\n        <Box className={classes.panel_item + classes.search_photos_box}>\r\n          <Button\r\n            disabled={!store.mapLoaded}\r\n            variant=\"contained\"\r\n            style={{ backgroundColor: \"#179207\", width: \"100%\" }}\r\n            size={\"large\"}\r\n            onClick={props.searchFlikr}\r\n          >\r\n            <ImageSearchRounded className={classes.control_icon} />\r\n            Search Photos\r\n          </Button>\r\n          {props.loadingPhotos && <LoadingBar />}\r\n        </Box>\r\n\r\n        <Divider className={classes.divider} />\r\n\r\n        <OptionsPanel\r\n          requestOptions={\r\n            <>\r\n              <RequstNumberSlider />\r\n              <SelectSortingMethod />\r\n              <TextQuery searchFlikr={props.searchFlikr} />\r\n              <Divider className={classes.divider} />\r\n              <MinUploadDatePicker />\r\n              <MaxUploadDatePicker />\r\n              <Divider className={classes.divider} />\r\n              <MinTakenDatePicker />\r\n              <MaxTakenDatePicker />\r\n            </>\r\n          }\r\n          mapOptions={\r\n            <div className={classes.map_options_container}>\r\n              <CustomSwitch\r\n                callback={props.togglePhotoMarkerDisplay}\r\n                checked={props.displayPhotoMarkers}\r\n                label=\"Hide all results from map\"\r\n              />\r\n              <CustomSwitch\r\n                callback={props.toggleFavorites}\r\n                checked={props.displayFavorites}\r\n                label=\"Hide all favorites from map\"\r\n              />\r\n              <Button\r\n                variant=\"contained\"\r\n                style={{ marginTop: \"1rem\", color: \"black\" }}\r\n                color=\"secondary\"\r\n                size={\"large\"}\r\n                onClick={props.handleMyLocationClick}\r\n                disabled={!store.mapLoaded}\r\n              >\r\n                <MyLocationTwoTone style={{ marginRight: \"1rem\" }} />\r\n                My location\r\n              </Button>\r\n            </div>\r\n          }\r\n        ></OptionsPanel>\r\n\r\n        <Box className={classes.panel_item}>{props.children}</Box>\r\n      </div>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default memo(ControlPanel);\r\n","import React from \"react\";\r\nimport { Paper, makeStyles, Button, Tooltip } from \"@material-ui/core\";\r\nimport { ImageSearchRounded } from \"@material-ui/icons\";\r\nimport LocationSearch from \"./geoCodingBar/geoCodingBar\";\r\nimport LoadingBar from \"../LoadingBar/loadingBar\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  panel: {\r\n    textAlign: \"center\",\r\n    display: \"flex\",\r\n    flexFlow: \"column\"\r\n  },\r\n  wrapper: {\r\n    margin: \"0 0.5rem\"\r\n  },\r\n  control_icon: {\r\n    marginRight: \"1rem\"\r\n  },\r\n  search_btn_box: {\r\n    margin: \"0.5rem 0\",\r\n    width: \"100%\"\r\n  }\r\n}));\r\n\r\nconst ControlPanelMobile = props => {\r\n  const classes = useStyles();\r\n\r\n  const infoTextBox = `Zoom to the location that you want to search for photos and hit the search button.`;\r\n\r\n  return (\r\n    <Paper className={classes.panel}>\r\n      <div className={classes.wrapper}>\r\n        <div style={{ marginTop: \"5px\" }}>{infoTextBox}</div>\r\n        <LocationSearch />\r\n        <Tooltip title=\"Search Photos\" aria-label=\"Search Photos\">\r\n          <Button\r\n            variant=\"contained\"\r\n            style={{ backgroundColor: \"#179207\" }}\r\n            size=\"large\"\r\n            onClick={props.searchFlikr}\r\n            className={classes.search_btn_box}\r\n          >\r\n            <ImageSearchRounded className={classes.control_icon} />\r\n            Search Photos\r\n          </Button>\r\n        </Tooltip>\r\n        {props.loadingPhotos && <LoadingBar />}\r\n      </div>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default ControlPanelMobile;\r\n","import React, { useContext, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Dialog,\r\n  AppBar,\r\n  Toolbar,\r\n  IconButton,\r\n  Typography,\r\n  Tooltip,\r\n  useMediaQuery\r\n} from \"@material-ui/core/\";\r\nimport {\r\n  ViewStream as Rows,\r\n  ViewWeek as Columns,\r\n  Close as CloseIcon\r\n} from \"@material-ui/icons/\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { withRouter, Redirect } from \"react-router-dom\";\r\nimport StateContext from \"../../context/stateContext\";\r\nimport ImageGrid from \"../imageGrid/imageGrid\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  appBar: {\r\n    position: \"relative\"\r\n  },\r\n  title: {\r\n    flex: 1\r\n  },\r\n  direction_btn: {\r\n    margin: \"0 1rem\"\r\n  }\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nfunction FavoritesDialog(props) {\r\n  const classes = useStyles();\r\n  const store = useContext(StateContext);\r\n  const smSceen = useMediaQuery(\"(max-width:450px)\");\r\n\r\n  const [gridDirection, setGridDirection] = useState(\"row\");\r\n  const toggleGridDirection = () => {\r\n    setGridDirection(gridDirection === \"row\" ? \"column\" : \"row\");\r\n  };\r\n\r\n  const handleClose = () => {\r\n    props.handleCloseFavorites();\r\n    props.history.goBack();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {!props.openFavorites && <Redirect to=\"/\" />}\r\n      <Dialog\r\n        fullScreen\r\n        open={props.openFavorites}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h5\" component=\"h1\" className={classes.title}>\r\n              Favorites\r\n            </Typography>\r\n            {store.favorites.length > 0 && !smSceen && (\r\n              <Tooltip\r\n                title={\r\n                  gridDirection === \"column\"\r\n                    ? \"Display images as Rows\"\r\n                    : \"Display images as Columns\"\r\n                }\r\n                aria-label={\r\n                  gridDirection === \"column\"\r\n                    ? \"Display images as Rows\"\r\n                    : \"Display images as Columns\"\r\n                }\r\n              >\r\n                <IconButton\r\n                  className={classes.direction_btn}\r\n                  color=\"inherit\"\r\n                  onClick={toggleGridDirection}\r\n                >\r\n                  {gridDirection === \"column\" ? (\r\n                    <>\r\n                      <Rows className={classes.control_icon} />\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <Columns className={classes.control_icon} />\r\n                    </>\r\n                  )}\r\n                </IconButton>\r\n              </Tooltip>\r\n            )}\r\n            <IconButton\r\n              edge=\"start\"\r\n              color=\"inherit\"\r\n              onClick={handleClose}\r\n              aria-label=\"close\"\r\n            >\r\n              <CloseIcon />\r\n            </IconButton>\r\n          </Toolbar>\r\n        </AppBar>\r\n\r\n        {store.favorites && (\r\n          <ImageGrid\r\n            photos={store.favorites}\r\n            hiddenPhotos={store.hiddenPhotos}\r\n            responseDetails={props.responseDetails}\r\n            direction={smSceen ? \"column\" : gridDirection}\r\n            imageToggleFavorites={props.imageToggleFavorites}\r\n            openLightbox={props.openLightbox}\r\n            openFavorites={props.openFavorites}\r\n          />\r\n        )}\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(FavoritesDialog);\r\n","import React, { useContext } from \"react\";\r\nimport StateContext from \"../../context/stateContext\";\r\nimport { makeStyles, IconButton } from \"@material-ui/core\";\r\nimport {\r\n  Close,\r\n  Fullscreen,\r\n  FullscreenExit,\r\n  Favorite,\r\n  FavoriteBorder\r\n} from \"@material-ui/icons\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  header_container: {\r\n    position: \"absolute\",\r\n    top: \"2px\",\r\n    left: \"2px\",\r\n    width: \"100vw\",\r\n    display: \"flex\",\r\n    zIndex: \"2000\",\r\n    justifyContent: \"space-between\", //\"flex-end\", to align btns to the right\r\n    transition: \"opacity 300ms\",\r\n    opacity: \"1\"\r\n  },\r\n  lightbox_btn: {\r\n    color: \"#fff\",\r\n    background: \"rgba(255, 255, 255, 0.2)\",\r\n    margin: \"2px\",\r\n    border: \"1px solid #00000024\",\r\n    \"&:hover\": {\r\n      boxShadow: \"0px 0px 11px 0px rgba(0,0,0,0.75)\",\r\n      background: \"rgba(255, 255, 255, 0.3)\"\r\n    }\r\n  },\r\n  hide_on_idle: {\r\n    opacity: \"0\"\r\n  }\r\n}));\r\n\r\nconst LightBoxHeader = props => {\r\n  /*most props like carouselProps, interactionIsIdle etc are passed by default props react-photo-gallery*/\r\n  const classes = useStyles();\r\n  const store = useContext(StateContext);\r\n\r\n  const isFavorite = React.useMemo(\r\n    () =>\r\n      store.favorites.find(el => el.photoId === props.currentView.photoId)\r\n        ? true\r\n        : false,\r\n    [store.favorites, props.currentView.photoId]\r\n  );\r\n\r\n  return props.isModal ? (\r\n    <div\r\n      className={\r\n        props.interactionIsIdle\r\n          ? classes.header_container + \" \" + classes.hide_on_idle\r\n          : classes.header_container\r\n      }\r\n    >\r\n      <IconButton\r\n        aria-label=\"Pin photo on map\"\r\n        className={classes.lightbox_btn}\r\n        onClick={props.carouselProps.imageToggleFavorites.bind(\r\n          this,\r\n          props.data,\r\n          isFavorite\r\n        )}\r\n      >\r\n        {isFavorite ? (\r\n          <Favorite style={{ color: \"gold\" }} />\r\n        ) : (\r\n          <FavoriteBorder />\r\n        )}\r\n      </IconButton>\r\n\r\n      <div className={classes.btn_container_right}>\r\n        <IconButton\r\n          aria-label=\"toggle fullscreen\"\r\n          className={classes.lightbox_btn}\r\n          edge=\"start\"\r\n          onClick={props.modalProps.toggleFullscreen}\r\n        >\r\n          {props.modalProps.isFullscreen ? <FullscreenExit /> : <Fullscreen />}\r\n        </IconButton>\r\n\r\n        {!props.modalProps.isFullscreen && (\r\n          <IconButton\r\n            aria-label=\"Close\"\r\n            className={classes.lightbox_btn}\r\n            edge=\"start\"\r\n            onClick={props.modalProps.onClose}\r\n          >\r\n            <Close />\r\n          </IconButton>\r\n        )}\r\n      </div>\r\n    </div>\r\n  ) : null;\r\n};\r\n\r\nexport default LightBoxHeader;\r\n","import React from \"react\";\r\n\r\nconst LightBoxViewRenderer = props => {\r\n  /** By default react-images carousel requests/loads all images that are passed to it\r\n   * this custom viewRenderer changes that behaviour and requests each image one by one when it's about to render it\r\n   * more on the issue:-->  https://github.com/jossmac/react-images/issues/300 */\r\n  const overScanCount = 1;\r\n  const { data, getStyles, index, currentIndex } = props;\r\n  const { alt, src } = data;\r\n\r\n  return Math.abs(currentIndex - index) <= overScanCount ? (\r\n    <div style={getStyles(\"view\", props)}>\r\n      <img\r\n        alt={alt || `Image ${index}`}\r\n        src={src}\r\n        style={{\r\n          height: \"auto\",\r\n          maxHeight: \"100vh\",\r\n          maxWidth: \"100%\",\r\n          userSelect: \"none\"\r\n        }}\r\n      />\r\n    </div>\r\n  ) : null;\r\n};\r\n\r\nexport default LightBoxViewRenderer;\r\n","import React, { useContext, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Snackbar from \"@material-ui/core/Snackbar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport { Close, Error, CheckCircle, Warning } from \"@material-ui/icons/\";\r\nimport StateContext from \"../../context/stateContext\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\n\r\nfunction SlideTransition(props) {\r\n  return <Slide {...props} direction=\"up\" />;\r\n}\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  close: {\r\n    padding: theme.spacing(0.5)\r\n  },\r\n  success: {\r\n    backgroundColor: \"#43a047\"\r\n  },\r\n  error: {\r\n    backgroundColor: \"#d32f2f\"\r\n  },\r\n  warning: {\r\n    backgroundColor: \"#ec8f06\"\r\n  },\r\n  message: {\r\n    display: \"flex\",\r\n    alignItems: \"center\"\r\n  },\r\n  icon: {\r\n    marginRight: \"5px\"\r\n  }\r\n}));\r\n\r\nexport default function Toast() {\r\n  const store = useContext(StateContext);\r\n  const classes = useStyles();\r\n  const Icon =\r\n    store.toast.variant === \"success\"\r\n      ? CheckCircle\r\n      : store.toast.variant === \"error\"\r\n      ? Error\r\n      : Warning;\r\n  const queueRef = React.useRef([]);\r\n  const [open, setOpen] = React.useState(false);\r\n  const [messageInfo, setMessageInfo] = React.useState(undefined);\r\n\r\n  const processQueue = () => {\r\n    if (queueRef.current.length > 0) {\r\n      setMessageInfo(queueRef.current.shift());\r\n      setOpen(true);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const message = store.toast.message;\r\n    if (message) {\r\n      queueRef.current.push({\r\n        message,\r\n        key: new Date().getTime()\r\n      });\r\n\r\n      if (open) {\r\n        // immediately begin dismissing current message\r\n        // to start showing new one\r\n        setOpen(false);\r\n      } else {\r\n        processQueue();\r\n      }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [store.toast]);\r\n\r\n  const handleClose = (event, reason) => {\r\n    if (reason === \"clickaway\") {\r\n      return;\r\n    }\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleExited = () => {\r\n    processQueue();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Snackbar\r\n        key={messageInfo ? messageInfo.key : undefined}\r\n        anchorOrigin={{\r\n          vertical: \"bottom\",\r\n          horizontal: \"left\"\r\n        }}\r\n        open={open}\r\n        autoHideDuration={3500}\r\n        onClose={handleClose}\r\n        onExited={handleExited}\r\n        TransitionComponent={SlideTransition}\r\n        ContentProps={{\r\n          \"aria-describedby\": \"message-id\",\r\n          classes: {\r\n            root:\r\n              store.toast.variant === \"success\"\r\n                ? classes.success\r\n                : store.toast.variant === \"error\"\r\n                ? classes.error\r\n                : classes.warning\r\n          }\r\n        }}\r\n        message={\r\n          <span id=\"message-id\" className={classes.message}>\r\n            <Icon className={classes.icon} />\r\n            {messageInfo ? messageInfo.message : undefined}\r\n          </span>\r\n        }\r\n        action={[\r\n          <IconButton\r\n            key=\"close\"\r\n            aria-label=\"close\"\r\n            color=\"inherit\"\r\n            className={classes.close}\r\n            onClick={handleClose}\r\n          >\r\n            <Close />\r\n          </IconButton>\r\n        ]}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { AutoRotatingCarousel, Slide } from \"material-auto-rotating-carousel\";\r\nimport { makeStyles, useMediaQuery } from \"@material-ui/core/\";\r\n\r\nimport { green } from \"@material-ui/core/colors\";\r\n\r\nimport SLIDE1 from \"../../assets/SLIDE1.png\";\r\nimport SLIDE2 from \"../../assets/SLIDE2.png\";\r\nimport SLIDE3 from \"../../assets/SLIDE3.png\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  content: {\r\n    maxHeight: \"700px\"\r\n  },\r\n  slide_text: {\r\n    maxWidth: \"90%\"\r\n  },\r\n  slide_text_mobile: {\r\n    paddingTop: \"8px\"\r\n  },\r\n  subtitle: {\r\n    color: \"#00024b\"\r\n  },\r\n  slide_title: {\r\n    whiteSpace: \"initial\",\r\n    lineHeight: \"23px\",\r\n    fontSize: \"22px\",\r\n    color: \"#00024b\"\r\n  },\r\n  image: {\r\n    maxWidth: \"100%\"\r\n  }\r\n}));\r\n\r\nconst CarouselShowCase = props => {\r\n  const classes = useStyles();\r\n  const smScreen = useMediaQuery(\"(max-width:450px)\");\r\n\r\n  return (\r\n    <div\r\n      style={{ position: \"relative\", width: \"100%\", height: 65 }}\r\n      className=\"wrapper\"\r\n    >\r\n      <AutoRotatingCarousel\r\n        mobile={smScreen}\r\n        autoplay={false}\r\n        // interval={4000}\r\n        label=\"Get Started\"\r\n        open={props.open}\r\n        onClose={props.closeCarousel}\r\n        onStart={props.closeCarousel}\r\n        style={{ position: \"absolute\", color: \"orange\" }}\r\n        // classes={{ content: classes.content }}\r\n      >\r\n        <Slide\r\n          media={\r\n            <img\r\n              src={SLIDE1}\r\n              alt=\"Flickr Api plus Maps\"\r\n              className={classes.image}\r\n            />\r\n          }\r\n          mediaBackgroundStyle={{ backgroundColor: green[400] }}\r\n          classes={{\r\n            textMobile: classes.slide_text_mobile,\r\n            text: classes.slide_text,\r\n            title: classes.slide_title,\r\n            subtitle: classes.subtitle\r\n          }}\r\n          style={{ backgroundColor: green[700] }}\r\n          title=\"Query Flickr's photos with one click\"\r\n          subtitle=\"World Gallery is a Web App that lets you query Flickr public photos by the location that they were taken.\"\r\n        />\r\n\r\n        <Slide\r\n          media={\r\n            <img\r\n              src={SLIDE3}\r\n              alt=\"Results are pinned on the Map\"\r\n              className={classes.image}\r\n            />\r\n          }\r\n          mediaBackgroundStyle={{ backgroundColor: green[400] }}\r\n          classes={{\r\n            textMobile: classes.slide_text_mobile,\r\n            text: classes.slide_text,\r\n            title: classes.slide_title,\r\n            subtitle: classes.subtitle\r\n          }}\r\n          style={{ backgroundColor: green[700] }}\r\n          title=\"Results are pinned on the spot they where taken*\"\r\n          subtitle={`*On average a photo taken with a camera with a GPS or a smartphone will have an error of 5-15 meters.\r\n              No spatial accuracy can be guaranteed for photos where geolocation was set explicitly.`}\r\n        />\r\n\r\n        <Slide\r\n          media={\r\n            <img\r\n              src={SLIDE2}\r\n              alt=\"Powered by Google Geocoding API, Place Autocomplete and Google Maps\"\r\n              className={classes.image}\r\n            />\r\n          }\r\n          mediaBackgroundStyle={{ backgroundColor: green[400] }}\r\n          classes={{\r\n            textMobile: classes.slide_text_mobile,\r\n            text: classes.slide_text,\r\n            title: classes.slide_title,\r\n            subtitle: classes.subtitle\r\n          }}\r\n          style={{ backgroundColor: green[700] }}\r\n          title=\"Geolocation search for easy localization\"\r\n          subtitle={`Powered by Google's Geocoding and Location Autocomplete to quickly center the desired\r\n           country, city, landmark, establishment or address on the map.`}\r\n        />\r\n      </AutoRotatingCarousel>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CarouselShowCase;\r\n","import React, {\r\n  useState,\r\n  useEffect,\r\n  useContext,\r\n  useCallback,\r\n  Suspense,\r\n  lazy\r\n} from \"react\";\r\nimport * as FlikrApi from \"./requests/flikr\";\r\nimport Skeleton from \"@material-ui/lab/Skeleton\";\r\nimport StateContext from \"./context/stateContext\";\r\nimport DispatchContext from \"./context/dispatchContext\";\r\nimport QueryContext from \"./context/QueryContext/queryContext\";\r\nimport {\r\n  SET_USER_LOCATION,\r\n  SET_PHOTOS,\r\n  UPDATE_PHOTOS,\r\n  ADD_IMG_TO_FAVORITES,\r\n  REMOVE_IMG_FROM_FAVORITES,\r\n  SET_MAP_LOADED,\r\n  MAKE_TOAST\r\n} from \"./context/rootReducer\";\r\n\r\nimport Appbar from \"./components/appBar/appBar\";\r\nimport ImageGrid from \"./components/imageGrid/imageGrid\";\r\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\r\n\r\nimport LoadMoreButton from \"./components/controls/loadMoreBtn\";\r\nimport LoadingBar from \"./components/LoadingBar/loadingBar\";\r\nimport ControlPanel from \"./components/controlPanel/controlPanel\";\r\nimport ControlPanelMobile from \"./components/controlPanel/controlPanelMobile\";\r\nimport FavoritesDialog from \"./components/favorites/FavoritesDialog\";\r\nimport { mapReady } from \"./helpers/helpers\";\r\nimport { populateStoreFromDb } from \"./helpers/db\";\r\n\r\nimport LightBoxHeader from \"./components/lightboxComponents/lightboxHeader\";\r\nimport LightBoxViewRenderer from \"./components/lightboxComponents/lightboxViewRenderer\";\r\nimport Carousel, { Modal, ModalGateway } from \"react-images\";\r\nimport { useMinScreenWidth } from \"./helpers/CustomHooks/useMinScreenWidth\";\r\nimport Toast from \"./components/toast/toast\";\r\n\r\nimport CarouselShowCase from \"./components/CarouselShowCase/carouselShowCase\";\r\nimport { useHistory, withRouter, Redirect } from \"react-router-dom\";\r\n\r\nconst MapWrapper = lazy(() => import(\"./components/map/mapContainer\"));\r\n\r\nconst navButtonStyles = base => ({\r\n  ...base,\r\n  background: \"rgba(255, 255, 255, 0.2)\",\r\n  \"&:hover, &:active\": {\r\n    boxShadow: \"0px 0px 11px 0px rgba(0,0,0,0.75)\",\r\n    background: \"rgba(255, 255, 255, 0.3)\"\r\n  },\r\n  \"&:active\": {\r\n    boxShadow: \"0 1px 3px rgba(0, 0, 0, 0.14)\",\r\n    transform: \"scale(0.96)\"\r\n  }\r\n});\r\n\r\nconst imagePositionerStyles = base => ({\r\n  ...base,\r\n  zIndex: \"5500\"\r\n});\r\nconst blanketStyles = base => ({\r\n  ...base,\r\n  zIndex: \"5000\"\r\n});\r\n\r\nfunction App(props) {\r\n  const store = useContext(StateContext);\r\n  const dispatch = useContext(DispatchContext);\r\n\r\n  const queryStore = useContext(QueryContext);\r\n\r\n  const smSceen = useMediaQuery(\"(max-width:450px)\");\r\n\r\n  /**Routing */\r\n  let history = useHistory();\r\n\r\n  /** Top user benefits (Auto Rotating Carousel) */\r\n  const [carouselOpen, setCarouselOpen] = useState(true);\r\n  const closeCarousel = () => setCarouselOpen(false);\r\n\r\n  /** Favorites Dialog */\r\n  const [openFavorites, setOpenFavorites] = useState(false);\r\n  const handleOpenFavorites = () => {\r\n    history.push(\"/favorites/\");\r\n    setOpenFavorites(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    // if user exits favorites by pressing the back Button set openFavorites to false\r\n    if (history.location.pathname === \"/\") {\r\n      handleCloseFavorites();\r\n    }\r\n  }, [history.location.pathname]);\r\n\r\n  const handleCloseFavorites = () => {\r\n    setOpenFavorites(false);\r\n  };\r\n\r\n  /**LightBox */\r\n  /**explicitly hide appbar if the lightbox is open (prevents appbar overlay with image in lightbox) */\r\n\r\n  const [currentImage, setCurrentImage] = useState(0);\r\n  const [viewerIsOpen, setViewerIsOpen] = useState(false);\r\n\r\n  const openLightboxSinglePhoto = (event, { photo, index }) => {\r\n    setCurrentImage(0);\r\n    setViewerIsOpen({ photo });\r\n    history.push(\"/img-carousel/\");\r\n  };\r\n\r\n  const openLightbox = useCallback(\r\n    (event, { photo, index }) => {\r\n      setCurrentImage(index);\r\n      setViewerIsOpen(true);\r\n\r\n      let path = \"/\";\r\n      switch (props.location.pathname) {\r\n        case \"/\":\r\n          path = \"/img-carousel/\";\r\n          break;\r\n        case \"/favorites/\":\r\n          path = \"/favorites/img-carousel/\";\r\n          break;\r\n        default:\r\n          return;\r\n      }\r\n      history.push(path);\r\n    },\r\n    [history, props.location.pathname]\r\n  );\r\n\r\n  const closeLightbox = () => {\r\n    setCurrentImage(0);\r\n    setViewerIsOpen(false);\r\n    history.goBack();\r\n  };\r\n\r\n  /** End LightBox */\r\n  const setMapLoaded = () => {\r\n    dispatch({\r\n      type: SET_MAP_LOADED,\r\n      mapLoaded: true\r\n    });\r\n  };\r\n\r\n  /** If request is successfull window will zoom to resultsRef */\r\n  const resultsRef = React.useRef(null);\r\n\r\n  const [loadingPhotos, setLoadingPhotos] = useState(false);\r\n\r\n  const [responseDetails, setResponseDetails] = useState(null);\r\n\r\n  const [gridDirection, setGridDirection] = useState(\"row\");\r\n  const toggleGridDirection = () => {\r\n    setGridDirection(gridDirection === \"row\" ? \"column\" : \"row\");\r\n  };\r\n\r\n  /** Markers trigger */\r\n  const [displayPhotoMarkers, setDisplayPhotoMarkers] = useState(true);\r\n  const togglePhotoMarkerDisplay = useCallback(() => {\r\n    setDisplayPhotoMarkers(!displayPhotoMarkers);\r\n  }, [setDisplayPhotoMarkers, displayPhotoMarkers]);\r\n\r\n  const [displayFavorites, setDisplayFavorites] = useState(true);\r\n  const toggleFavorites = () => setDisplayFavorites(!displayFavorites);\r\n\r\n  const imageToggleFavorites = useCallback(\r\n    (img, isFavorite) => {\r\n      console.log(isFavorite);\r\n      if (!isFavorite) {\r\n        dispatch({\r\n          type: ADD_IMG_TO_FAVORITES,\r\n          image: img\r\n        });\r\n      } else {\r\n        dispatch({\r\n          type: REMOVE_IMG_FROM_FAVORITES,\r\n          image: img\r\n        });\r\n      }\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const searchFlikr = () => {\r\n    console.log(\"fetching...\");\r\n    let searchParams;\r\n\r\n    const bounds = window.map ? window.map.getBounds().toJSON() : \"error\";\r\n    searchParams = {\r\n      minUploadDate: queryStore.minUploadDate,\r\n      maxUploadDate: queryStore.maxUploadDate,\r\n      minTakenDate: queryStore.minTakenDate,\r\n      maxTakenDate: queryStore.maxTakenDate,\r\n      resultsPerPage: queryStore.resultsPerPage,\r\n      sortMethod: queryStore.sortMethod,\r\n      searchText: queryStore.searchText,\r\n      bounds\r\n    };\r\n\r\n    setLoadingPhotos(true);\r\n    FlikrApi.getPhotosByTitle(searchParams)\r\n      .then(data => {\r\n        setLoadingPhotos(false);\r\n        if (data.stat === \"ok\") {\r\n          setResponseDetails({\r\n            ...data\r\n          });\r\n          dispatch({\r\n            type: SET_PHOTOS,\r\n            photos: data.photos\r\n          });\r\n\r\n          /* if scrollIntoView is called syncronously there is a chance that the images are not loaded yet\r\n           * thus the body is still the same height and the element simply cannot be scrolled to. instead:\r\n           *  When the response is loaded wait 100ms for the body to resize (while image gallery loads),\r\n           * then scroll to the results (an empty div right above the results was used in order to avoid forwardingRefs)         *\r\n           */\r\n          window.setTimeout(() => {\r\n            resultsRef.current.scrollIntoView({\r\n              behavior: \"smooth\",\r\n              block: \"center\"\r\n            });\r\n          }, 100);\r\n        } else {\r\n          flickrResValidation(data);\r\n        }\r\n      })\r\n      .catch(error => {\r\n        setLoadingPhotos(false);\r\n        dispatch({\r\n          type: MAKE_TOAST,\r\n          message: error.message,\r\n          variant: \"error\"\r\n        });\r\n      });\r\n  };\r\n\r\n  const mapsErrorToast = () => {\r\n    dispatch({\r\n      type: MAKE_TOAST,\r\n      message: \"Failed to load Google Maps\",\r\n      variant: \"error\"\r\n    });\r\n  };\r\n\r\n  const flickrResValidation = data => {\r\n    switch (data.code) {\r\n      /**Check the error code and respond with an appropriete notification */\r\n      case 4:\r\n        /**message:Not a valid bounding box --> Antimeridian Error */\r\n        dispatch({\r\n          type: MAKE_TOAST,\r\n          message: `Your location search intersects with antimeridian!\r\n          Make sure that the red vertical line is out of map extents`,\r\n          variant: \"error\"\r\n        });\r\n        break;\r\n      case 9999:\r\n        /**message: Failed to fetch --> No Internet connection */\r\n        dispatch({\r\n          type: MAKE_TOAST,\r\n          message: `Failed to fetch, please check your internet connection`,\r\n          variant: \"error\"\r\n        });\r\n        break;\r\n      default:\r\n        /**Default returns any other flickr's API errors messages  */\r\n        dispatch({\r\n          type: MAKE_TOAST,\r\n          message: data.message,\r\n          variant: \"error\"\r\n        });\r\n    }\r\n  };\r\n\r\n  const fetchNextPage = () => {\r\n    // console.log(\"fetching next page...\");\r\n    const searchParams = {\r\n      ...responseDetails,\r\n      resultsPerPage: responseDetails.perPage\r\n    };\r\n    if (responseDetails.currentPage < responseDetails.totalPages) {\r\n      searchParams.page = responseDetails.currentPage + 1;\r\n    }\r\n    setLoadingPhotos(true);\r\n\r\n    FlikrApi.getPhotosByTitle(searchParams)\r\n      .then(data => {\r\n        setLoadingPhotos(false);\r\n        if (data.stat === \"ok\") {\r\n          setResponseDetails({\r\n            ...data\r\n          });\r\n          dispatch({\r\n            type: UPDATE_PHOTOS,\r\n            photos: data.photos\r\n          });\r\n        } else {\r\n          flickrResValidation(data);\r\n        }\r\n      })\r\n      .catch(error => {\r\n        setLoadingPhotos(false);\r\n      });\r\n  };\r\n\r\n  //IDB is the callback that will be used when map is ready to populate the store.favorites from indexedDB\r\n  const IDB = () => {\r\n    const cb = item => {\r\n      dispatch({\r\n        type: ADD_IMG_TO_FAVORITES,\r\n        image: item\r\n      });\r\n    };\r\n\r\n    populateStoreFromDb(cb);\r\n  };\r\n\r\n  useEffect(\r\n    () => {\r\n      /*fetch user location when app mounts*/\r\n      fetch(\"https://geoip-db.com/json/42e6a770-b3ac-11e9-80ca-c95181800da7\")\r\n        .then(res => res.json())\r\n        .then(position => {\r\n          dispatch({\r\n            type: SET_USER_LOCATION,\r\n            userLocation: { lat: position.latitude, lng: position.longitude }\r\n          });\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    // eslint-disable-next-line\r\n    []\r\n  );\r\n\r\n  const zoomToLocation = location => {\r\n    const zoom = () => {\r\n      window.map.panTo(location);\r\n      window.map.setZoom(16);\r\n    };\r\n    mapReady(zoom);\r\n  };\r\n\r\n  const handleMyLocationClick = () => {\r\n    if (store.userLocation) {\r\n      zoomToLocation(store.userLocation);\r\n    } else {\r\n      /* if geoip-db call failed or if it was blocked by an add-blocker use native geolocation API */\r\n      const success = position => {\r\n        zoomToLocation({\r\n          lat: position.coords.latitude,\r\n          lng: position.coords.longitude\r\n        });\r\n        dispatch({\r\n          type: SET_USER_LOCATION,\r\n          userLocation: {\r\n            lat: position.coords.latitude,\r\n            lng: position.coords.longitude\r\n          }\r\n        });\r\n      };\r\n      if (\"geolocation\" in navigator) {\r\n        navigator.geolocation.getCurrentPosition(success, err =>\r\n          console.log(err)\r\n        );\r\n      } else {\r\n        alert(\"Sorry geolocation is not supported by your broweser.\");\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Appbar\r\n        photos={responseDetails ? responseDetails.totalPages : 0}\r\n        toggleGridDirection={toggleGridDirection}\r\n        gridDirection={gridDirection}\r\n        searchFlikr={searchFlikr}\r\n        handleMyLocationClick={handleMyLocationClick}\r\n        togglePhotoMarkerDisplay={togglePhotoMarkerDisplay}\r\n        toggleFavorites={toggleFavorites}\r\n        displayPhotoMarkers={displayPhotoMarkers}\r\n        displayFavorites={displayFavorites}\r\n        handleOpenFavorites={handleOpenFavorites}\r\n        {...props}\r\n      >\r\n        <section\r\n          style={\r\n            useMinScreenWidth(900)\r\n              ? { display: \"flex\", height: \"calc(100vh - 7px - 64px)\" } //7px margins, 64appbar\r\n              : {\r\n                  display: \"flex\",\r\n                  height: \"calc(100vh - 7px - 64px )\",\r\n                  flexFlow: \"column\"\r\n                }\r\n          }\r\n        >\r\n          {useMinScreenWidth(900) && (\r\n            <ControlPanel\r\n              searchFlikr={searchFlikr}\r\n              loadingPhotos={loadingPhotos}\r\n              togglePhotoMarkerDisplay={togglePhotoMarkerDisplay}\r\n              toggleFavorites={toggleFavorites}\r\n              displayPhotoMarkers={displayPhotoMarkers}\r\n              displayFavorites={displayFavorites}\r\n              handleMyLocationClick={handleMyLocationClick}\r\n            ></ControlPanel>\r\n          )}\r\n          {!useMinScreenWidth(900) && (\r\n            <ControlPanelMobile\r\n              searchFlikr={searchFlikr}\r\n              loadingPhotos={loadingPhotos}\r\n            />\r\n          )}\r\n          <Suspense fallback={<Skeleton variant=\"rect\" />}>\r\n            <MapWrapper\r\n              setMapLoaded={setMapLoaded}\r\n              photos={store.filteredPhotos}\r\n              favorites={store.favorites}\r\n              displayPhotoMarkers={displayPhotoMarkers}\r\n              displayFavorites={displayFavorites}\r\n              screenWidth900px={useMinScreenWidth(900)}\r\n              openLightbox={openLightboxSinglePhoto}\r\n              mapsErrorToast={mapsErrorToast}\r\n              idb={IDB}\r\n            />\r\n          </Suspense>\r\n        </section>\r\n\r\n        <div ref={resultsRef}></div>\r\n        {store.filteredPhotos && (\r\n          <ImageGrid\r\n            photos={store.filteredPhotos}\r\n            hiddenPhotos={store.hiddenPhotos}\r\n            responseDetails={responseDetails}\r\n            direction={smSceen ? \"column\" : gridDirection}\r\n            imageToggleFavorites={imageToggleFavorites}\r\n            openFavorites={openFavorites}\r\n            openLightbox={openLightbox}\r\n          />\r\n        )}\r\n\r\n        {responseDetails &&\r\n          responseDetails.currentPage < responseDetails.totalPages && (\r\n            <>\r\n              {loadingPhotos && <LoadingBar />}\r\n              <LoadMoreButton onClick={fetchNextPage} />\r\n            </>\r\n          )}\r\n      </Appbar>\r\n      <ModalGateway>\r\n        {viewerIsOpen &&\r\n          (history.location.pathname === \"/img-carousel/\" ||\r\n            history.location.pathname === \"/favorites/img-carousel/\") && (\r\n            <Modal\r\n              onClose={closeLightbox}\r\n              styles={{\r\n                blanket: blanketStyles,\r\n                positioner: imagePositionerStyles\r\n              }}\r\n            >\r\n              <Carousel\r\n                imageToggleFavorites={imageToggleFavorites}\r\n                components={{\r\n                  Header: LightBoxHeader,\r\n                  View: LightBoxViewRenderer\r\n                }}\r\n                currentIndex={currentImage}\r\n                views={\r\n                  // if viewerIsOpen has a .photo property then open a single photo,\r\n                  // else if favorites is open render favorites else render normal carousel\r\n                  viewerIsOpen.photo\r\n                    ? [\r\n                        {\r\n                          ...viewerIsOpen.photo,\r\n                          srcset: viewerIsOpen.photo.srcSet,\r\n                          caption: viewerIsOpen.photo.title\r\n                        }\r\n                      ]\r\n                    : openFavorites\r\n                    ? store.favorites.map(x => ({\r\n                        ...x,\r\n                        srcset: x.srcSet,\r\n                        caption: x.title\r\n                      }))\r\n                    : store.filteredPhotos.map(x => ({\r\n                        ...x,\r\n                        srcset: x.srcSet,\r\n                        caption: x.title\r\n                      }))\r\n                }\r\n                styles={{\r\n                  navigationPrev: navButtonStyles,\r\n                  navigationNext: navButtonStyles\r\n                }}\r\n              />\r\n            </Modal>\r\n          )}\r\n      </ModalGateway>\r\n      {openFavorites &&\r\n        (history.location.pathname === \"/favorites/\" ||\r\n          history.location.pathname === \"/favorites/img-carousel/\") && (\r\n          <FavoritesDialog\r\n            openFavorites={openFavorites}\r\n            handleCloseFavorites={handleCloseFavorites}\r\n            responseDetails={responseDetails}\r\n            imageToggleFavorites={imageToggleFavorites}\r\n            openLightbox={openLightbox}\r\n          />\r\n        )}\r\n      {carouselOpen && (\r\n        <CarouselShowCase open={carouselOpen} closeCarousel={closeCarousel} />\r\n      )}\r\n      <Toast />\r\n      {history.location.pathname.startsWith(\"/img-carousel/\") &&\r\n        !viewerIsOpen && <Redirect to=\"/\" />}\r\n      {history.location.pathname.startsWith(\"/favorites/\") &&\r\n        !openFavorites && <Redirect to=\"/\" />}\r\n      {![\r\n        \"/\",\r\n        \"/menu/\",\r\n        \"/img-carousel/\",\r\n        \"/favorites/\",\r\n        \"/favorites/img-carousel/\"\r\n      ].includes(history.location.pathname) && <Redirect to=\"/\" />}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(App);\r\n","/** in case window.map is undefined (not loaded/initialized):\r\n * mapWait() checks if google.maps is loaded before trying to access the window.map object\r\n * each time the check results to false it retries after 10ms, when the waitingTrheshold (3seconds) runs out it gives up\r\n * (at this point google maps probably failed for some other reason, like network error, or auth problems...)\r\n */\r\nexport const mapReady = cb => {\r\n  let waitingThreshold = 3000; //max number of milliseconds to wait for google.maps to initialize\r\n\r\n  const mapWait = () => {\r\n    if (waitingThreshold <= 0) {\r\n      stopTimer();\r\n      // alert(\"google maps cannot be loaded!\"); display some error\r\n    }\r\n    if (window.map) {\r\n      cb();\r\n      stopTimer();\r\n    } else {\r\n      // console.log(\"waiting for maps....\");\r\n      waitingThreshold -= 10;\r\n    }\r\n  };\r\n  const timer = setInterval(mapWait, 10);\r\n  const stopTimer = () => clearInterval(timer);\r\n};\r\n\r\nexport const checkBoundsArea = bounds => {\r\n  // returns the area of map extents in sq km...\r\n  const boundsPath = [];\r\n  boundsPath.push(new window.google.maps.LatLng(bounds.south, bounds.west));\r\n  boundsPath.push(new window.google.maps.LatLng(bounds.south, bounds.east));\r\n  boundsPath.push(new window.google.maps.LatLng(bounds.north, bounds.east));\r\n  boundsPath.push(new window.google.maps.LatLng(bounds.north, bounds.west));\r\n\r\n  // return window.google.maps.geometry.spherical.computeArea(boundsPath) > 3 624 538 762 249;\r\n  return (\r\n    (\r\n      window.google.maps.geometry.spherical.computeArea(boundsPath) /\r\n      (1000 * 1000)\r\n    ).toFixed(2) + \" sq km\"\r\n  );\r\n};\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Store from \"./context/store\";\nimport QueryStore from \"./context/QueryContext/queryStore\";\n// import { BrowserRouter } from \"react-router-dom\";\n// without HashRouter hosting in gitHub Pages can be troublesome\nimport { HashRouter as BrowserRouter } from \"react-router-dom\";\n\nReactDOM.render(\n  <BrowserRouter>\n    <Store>\n      <QueryStore>\n        <CssBaseline />\n        <App />\n      </QueryStore>\n    </Store>\n  </BrowserRouter>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\nserviceWorker.register();\n","import React, { useReducer } from \"react\";\r\n\r\nimport rootReducer from \"./rootReducer\";\r\nimport StateContext from \"./stateContext\";\r\nimport DispatchContext from \"./dispatchContext\";\r\n\r\nexport default function Store(props) {\r\n  const initialState = {\r\n    mapLoaded: false,\r\n    userLocation: null,\r\n    searchRadius: 3,\r\n    photos: null,\r\n    filteredPhotos: null,\r\n    hiddenPhotos: [],\r\n    favorites: [],\r\n    blockedUsers: [],\r\n    toast: { message: null, variant: null }\r\n  };\r\n\r\n  const [state, dispatch] = useReducer(rootReducer, initialState);\r\n\r\n  return (\r\n    <DispatchContext.Provider value={dispatch}>\r\n      <StateContext.Provider value={state}>\r\n        {props.children}\r\n      </StateContext.Provider>\r\n    </DispatchContext.Provider>\r\n  );\r\n}\r\n","import React, { useReducer } from \"react\";\r\n\r\nimport queryReducer from \"./queryReducer\";\r\nimport QueryContext from \"./queryContext\";\r\nimport DispatchQueryContext from \"./dispatchQueryContext\";\r\n\r\nexport default function Store(props) {\r\n  const initialState = {\r\n    resultsPerPage: 30,\r\n    minUploadDate: false,\r\n    maxUploadDate: false,\r\n    minTakenDate: false,\r\n    maxTakenDate: false,\r\n    sortMethod: \"date-posted-desc\",\r\n    searchText: \"\"\r\n  };\r\n\r\n  const [state, dispatch] = useReducer(queryReducer, initialState);\r\n\r\n  return (\r\n    <DispatchQueryContext.Provider value={dispatch}>\r\n      <QueryContext.Provider value={state}>\r\n        {props.children}\r\n      </QueryContext.Provider>\r\n    </DispatchQueryContext.Provider>\r\n  );\r\n}\r\n"],"sourceRoot":""}