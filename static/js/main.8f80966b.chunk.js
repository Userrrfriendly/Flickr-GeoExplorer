(this["webpackJsonpflickr-explorer"]=this["webpackJsonpflickr-explorer"]||[]).push([[0],{184:function(e,t,a){e.exports=a.p+"static/media/pngLogo.9f3169d5.png"},190:function(e,t,a){e.exports=a.p+"static/media/SLIDE1.49a541dd.png"},191:function(e,t,a){e.exports=a.p+"static/media/SLIDE2.869e96b8.png"},192:function(e,t,a){e.exports=a.p+"static/media/SLIDE3.87f4dc6d.png"},216:function(e,t,a){e.exports=a(354)},221:function(e,t,a){},354:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(12),l=a.n(r),i=(a(221),a(15)),c=a(14),s=function(e){var t;console.log(e);var a=new URLSearchParams;a.append("method","flickr.photos.search"),a.append("api_key","f6536bb373bca1fcd14d4da1281f2839"),e.searchText&&a.append("text",e.searchText),e.sortMethod&&a.append("sort",e.sortMethod),e.minUploadDate&&a.append("min_upload_date",e.minUploadDate),e.maxUploadDate&&a.append("max_upload_date",e.maxUploadDate),e.minTakenDate&&a.append("min_taken_date",e.minTakenDate),e.maxTakenDate&&a.append("max_taken_date",e.maxTakenDate);var n=e.bounds,o=n.south,r=n.west,l=n.north,i=n.east;return o=o.toFixed(5),r=r.toFixed(5),l=l.toFixed(5),i=i.toFixed(5),t={bounds:e.bounds,maxTakenDate:e.maxTakenDate,maxUploadDate:e.maxUploadDate,minTakenDate:e.minTakenDate,minUploadDate:e.minUploadDate,searchText:e.searchText,sortMethod:e.sortMethod},a.append("bbox","".concat(r,",").concat(o,",").concat(i,",").concat(l)),a.append("has_geo","1"),a.append("per_page",e.resultsPerPage?e.resultsPerPage:"50"),a.append("format","json"),a.append("nojsoncallback","1"),a.append("extras","url_t,url_m,url_c,url_l,url_h,url_o,geo, date_upload, date_taken, owner_name"),e.page&&a.append("page",e.page),fetch("https://api.flickr.com/services/rest/?"+a).then((function(e){return console.log(a),e.json().then((function(e){return console.log("*****FLICKR RESPONSE:****"),console.log(e),"ok"===e.stat?Object(c.a)({},t,{stat:e.stat,currentPage:e.photos.page,totalPages:e.photos.pages,totalPhotos:e.photos.total,perPage:e.photos.perpage,photos:e.photos.photo.map((function(e){return{dateupload:e.dateupload,datetaken:e.datetaken,ownername:e.ownername,geolocation:{lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)},photoId:e.id,width_t:e.width_t?parseInt(e.width_t):"",width_c:e.width_c?parseInt(e.width_c):"",width_h:e.width_h?parseInt(e.width_h):"",width_l:e.width_l?parseInt(e.width_l):"",width_m:e.width_m?parseInt(e.width_m):"",width_o:e.width_o?parseInt(e.width_o):"",height_c:e.height_c?parseInt(e.height_c):"",height_h:e.height_h?parseInt(e.height_h):"",height_l:e.height_l?parseInt(e.height_l):"",height_m:e.height_m?parseInt(e.height_m):"",height_o:e.height_o?parseInt(e.height_o):"",height:e.height_m?parseInt(e.height_m):e.height_o?parseInt(e.height_o):100,width:e.width_m?parseInt(e.width_m):e.width_o?parseInt(e.width_o):100,src:e.url_l?e.url_l:e.url_m?e.url_m:e.url_o,title:e.title,alt:e.title,key:e.id,owner:e.owner,thumb:e.url_t,srcSet:[e.url_m?"".concat(e.url_m," ").concat(e.width_m,"w"):"",e.url_c?"".concat(e.url_c," ").concat(e.width_c,"w"):"",e.url_l?"".concat(e.url_l," ").concat(e.width_l,"w"):"",e.url_h?"".concat(e.url_h," ").concat(e.width_h,"w"):"",e.url_o?"".concat(e.url_o," ").concat(e.width_o,"w"):""],sizes:"(min-width: 480px) 50vw, (min-width: 1024px) 33.3vw, 100vw"}}))}):"fail"===e.stat?e:void 0}))})).catch((function(e){return"Failed to fetch"===e.message?Object(c.a)({},e,{stat:"fail",message:e.message,code:9999}):Object(c.a)({},e,{stat:"fail",message:"Failed to fetch from Flickr...",code:8888})}))},u=a(441),m=o.a.createContext(),d=o.a.createContext(),p=o.a.createContext(),h=a(146),g=a(84),f=a.n(g),E=new(a(181).a)("worldGalleryDB");E.version(1).stores({favorites:"photoId"});var b=function(e,t){var a,n=t.favorites.concat(e.image),o=t.filteredPhotos?t.filteredPhotos.map((function(t){return t.photoId===e.image.photoId?Object(c.a)({},t,{isFavorite:!0}):t})):null;return a=e.image,E.transaction("rw",E.favorites,(function(){return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.awrap(E.favorites.get({photoId:a.photoId}).then((function(e){if(!e)return E.favorites.add(Object(c.a)({},a)).catch((function(e){alert("Error: "+(e.stack||e))}))})).catch((function(e){alert("Error: "+(e.stack||e))})));case 2:case"end":return e.stop()}}))})),Object(c.a)({},t,{favorites:n,filteredPhotos:o})},v=function(e,t){var a=Object(h.a)(t.favorites),n=t.filteredPhotos?t.filteredPhotos.findIndex((function(t){return t.photoId===e.image.photoId})):-1,o=t.filteredPhotos?Object(h.a)(t.filteredPhotos):null;-1!==n&&(o[n].isFavorite=!1);var r,l=a.findIndex((function(t){return t.photoId===e.image.photoId}));return-1!==l&&a.splice(l,1),r=e.image,E.favorites.where("photoId").equals(r.photoId).delete().catch((function(e){alert("Error: "+(e.stack||e))})),Object(c.a)({},t,{favorites:a,filteredPhotos:o})},y=function(e,t){switch(t.type){case"SET_USER_LOCATION":return console.log(t.type),function(e,t){return Object(c.a)({},t,{userLocation:e.userLocation})}(t,e);case"SET_PHOTOS":return console.log(t.type),function(e,t){var a=e.photos;return t.favorites.length>0&&(a=a.map((function(e){return t.favorites.find((function(t){return t.photoId===e.photoId}))?Object(c.a)({},e,{isFavorite:!0}):e}))),Object(c.a)({},t,{photos:e.photos,filteredPhotos:a,blockedUsers:[],hiddenPhotos:[]})}(t,e);case"UPDATE_PHOTOS":return console.log(t.type),function(e,t){var a=e.photos.filter((function(e){return!t.blockedUsers.includes(e.owner)})),n=e.photos.filter((function(e){return t.blockedUsers.includes(e.owner)})),o=t.filteredPhotos.concat(a);t.favorites.length>0&&(o=o.map((function(e){return t.favorites.find((function(t){return t.photoId===e.photoId}))?Object(c.a)({},e,{isFavorite:!0}):e})));var r=t.hiddenPhotos.concat(n),l=t.photos.concat(e.photos);return Object(c.a)({},t,{photos:l,filteredPhotos:o,hiddenPhotos:r})}(t,e);case"BLOCK_USER":return console.log(t.type),function(e,t){var a=t.blockedUsers.concat(e.userId),n=t.filteredPhotos.filter((function(e){return!a.includes(e.owner)})),o=t.photos.filter((function(e){return a.includes(e.owner)}));return Object(c.a)({},t,{blockedUsers:a,filteredPhotos:n,hiddenPhotos:o})}(t,e);case"ADD_IMG_TO_FAVORITES":return console.log(t.type),b(t,e);case"REMOVE_IMG_FROM_FAVORITES":return console.log(t.type),v(t,e);case"SET_MAP_LOADED":return console.log(t.type),function(e,t){return Object(c.a)({},t,{mapLoaded:e.mapLoaded})}(t,e);case"MAKE_TOAST":return console.log(t),function(e,t){var a={message:e.message,variant:e.variant};return Object(c.a)({},t,{toast:a})}(t,e);default:return e}},_=a(182),x=a(419),O=a(359),k=a(420),w=a(418),j=a(421),T=a(422),S=a(402),P=a(45),D=a(450),C=a(196),M=a(443),A=a(159),F=a(423),I=a(424),N=a(425),L=a(427),R=a(395),U=a(407),G=a(358),W=a(408),B=a(410),z=a(413),H=a(158),K=a(417),X=a(406),V=a(409),q=a(411),J=a(412),Q=a(414),Z=a(415),Y=a(416),$=a(447),ee=a(390),te=o.a.createContext(),ae=function(e,t){switch(t.type){case"SET_MAX_RESULTS_PER_PAGE":return console.log(t.type),function(e,t){return Object(c.a)({},t,{resultsPerPage:e.resultsPerPage})}(t,e);case"SET_MIN_UPLOAD_DATE":return console.log(t.type),function(e,t){return Object(c.a)({},t,{minUploadDate:e.minUploadDate})}(t,e);case"SET_MAX_UPLOAD_DATE":return console.log(t.type),function(e,t){return Object(c.a)({},t,{maxUploadDate:e.maxUploadDate})}(t,e);case"SET_MIN_TAKEN_DATE":return console.log(t.type),function(e,t){return Object(c.a)({},t,{minTakenDate:e.minTakenDate})}(t,e);case"SET_MAX_TAKEN_DATE":return console.log(t.type),function(e,t){return Object(c.a)({},t,{maxTakenDate:e.maxTakenDate})}(t,e);case"SET_SEARCH_METHOD_SORTING":return console.log(t.type),function(e,t){return Object(c.a)({},t,{sortMethod:e.payload})}(t,e);case"SET_SEARCH_TEXT":return console.log(t.type),function(e,t){return Object(c.a)({},t,{searchText:e.payload})}(t,e);default:return e}},ne=Object(_.a)({root:{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between"},input:{marginLeft:"1rem",marginBottom:"1rem",maxWidth:"4rem"}});function oe(e){var t=ne(),a=Object(n.useContext)(p),r=Object(n.useContext)(te);return o.a.createElement(o.a.Fragment,null,o.a.createElement(P.a,{align:"center",gutterBottom:!0},"Number of photos to return per page"),o.a.createElement("div",{className:t.root},o.a.createElement($.a,{value:a.resultsPerPage,onChange:function(e,t){r({type:"SET_MAX_RESULTS_PER_PAGE",resultsPerPage:t})},"aria-labelledby":"input-slider",step:10,min:10,max:250,style:{width:"75%",marginRight:"0.5rem",marginLeft:"0.5rem"}}),o.a.createElement(ee.a,{className:t.input,value:a.resultsPerPage,type:"number",margin:"dense",onChange:function(e){var t=parseInt(e.target.value);Number.isNaN(t)||"number"!=typeof t||r({type:"SET_MAX_RESULTS_PER_PAGE",resultsPerPage:t})},onBlur:function(){var e=a.resultsPerPage;e<=10?r({type:"SET_MAX_RESULTS_PER_PAGE",resultsPerPage:10}):e<=250?r({type:"SET_MAX_RESULTS_PER_PAGE",resultsPerPage:10*Math.trunc(e/10)}):e>250&&r({type:"SET_MAX_RESULTS_PER_PAGE",resultsPerPage:250})},inputProps:{step:10,min:10,max:250,type:"number","aria-labelledby":"input-slider"}})))}var re=a(391),le=a(448),ie=a(444),ce=a(396),se=a(397),ue=Object(_.a)((function(e){return{formControl:{width:"100%"},root_select:{textAlign:"left"}}}));function me(e){var t=ue(),a=Object(n.useContext)(p),r=Object(n.useContext)(te);return o.a.createElement(re.a,{className:t.formControl},o.a.createElement(le.a,{htmlFor:"sorting-helper"},"Display results by:"),o.a.createElement(ie.a,{classes:{root:t.root_select},value:a.sortMethod,onChange:function(e){r({type:"SET_SEARCH_METHOD_SORTING",payload:e.target.value})}},o.a.createElement(ce.a,{value:"date-posted-asc"},"Date posted ascending"),o.a.createElement(ce.a,{value:"date-posted-desc"},"Date posted descending"),o.a.createElement(ce.a,{value:"date-taken-asc"},"Date taken ascending"),o.a.createElement(ce.a,{value:"date-taken-desc"},"Date taken descending")),o.a.createElement(se.a,null,"Sorting filters must be set before photo search"))}var de=a(398),pe=a(399);function he(e){var t=Object(n.useContext)(p),a=Object(n.useContext)(te),r=function(t){t.preventDefault(),e.searchFlikr()};return o.a.createElement("form",{onSubmit:r},o.a.createElement(re.a,{onSubmit:r,style:{width:"100%"}},o.a.createElement(le.a,{htmlFor:"adornment-text"},"Optional text query"),o.a.createElement(ee.a,{id:"adornment-text",type:"text",fullWidth:!0,placeholder:"search for a keyword in tags,albums,titles etc",value:t.searchText,onChange:function(e){a({type:"SET_SEARCH_TEXT",payload:e.target.value})},endAdornment:o.a.createElement(de.a,{position:"end"},o.a.createElement(C.a,{style:t.searchText.length>0?{}:{display:"none"},"aria-label":"toggle password visibility",onClick:function(e){a({type:"SET_SEARCH_TEXT",payload:""})}},o.a.createElement(pe.a,null)))})),o.a.createElement(se.a,{style:{margin:"5px 0 "}},"Adding text to the query will greatly limit the results"))}var ge=a(53),fe=a(193),Ee=a(28),be=a(442),ve=a(445);function ye(e){var t=Object(n.useContext)(p),a=Object(n.useContext)(te),r=Object(n.useState)(new Date(2004,1,1)),l=Object(i.a)(r,2),c=l[0],s=l[1],u=!!t.minUploadDate,m=u?t.minUploadDate:c;return o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(Ee.a,{utils:ge.a},o.a.createElement(be.a,{minDate:"2000,1,1",style:{marginLeft:"0.5rem"},disabled:!u,margin:"normal",id:"date-picker-dialog",label:"min upload date",format:"dd/MM/yyyy",value:m,onChange:function(e){m=e,s(e),a({type:"SET_MIN_UPLOAD_DATE",minUploadDate:Object(fe.a)(e,"yyyy-MM-dd")})}})),o.a.createElement(ve.a,{style:{alignSelf:"flex-end",marginLeft:"1rem"},checked:u,onChange:function(e){e.target.checked?a({type:"SET_MIN_UPLOAD_DATE",minUploadDate:Object(fe.a)(m,"yyyy-MM-dd")}):a({type:"SET_MIN_UPLOAD_DATE",minUploadDate:null})},value:"min upload date",color:"primary",inputProps:{"aria-label":"minimum upload date"}}))}function _e(e){var t=Object(n.useContext)(te),a=Object(n.useContext)(p),r=Object(n.useState)(new Date),l=Object(i.a)(r,2),c=l[0],s=l[1],u=!!a.maxUploadDate,m=u?a.maxUploadDate:c;return o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(Ee.a,{utils:ge.a},o.a.createElement(be.a,{minDate:"2000,1,1",style:{marginLeft:"0.5rem"},disabled:!u,margin:"normal",id:"date-picker-dialog",label:"max upload date",format:"dd/MM/yyyy",value:m,onChange:function(e){m=e,s(e),t({type:"SET_MAX_UPLOAD_DATE",maxUploadDate:Object(fe.a)(e,"yyyy-MM-dd")})}})),o.a.createElement(ve.a,{style:{alignSelf:"flex-end",marginLeft:"1rem"},checked:u,onChange:function(e){e.target.checked?t({type:"SET_MAX_UPLOAD_DATE",maxUploadDate:Object(fe.a)(m,"yyyy-MM-dd")}):t({type:"SET_MAX_UPLOAD_DATE",maxUploadDate:null})},value:"use max upload date",color:"primary",inputProps:{"aria-label":"maximum upload date"}}))}function xe(e){var t=Object(n.useContext)(te),a=Object(n.useContext)(p),r=Object(n.useState)(new Date(2004,1,1)),l=Object(i.a)(r,2),c=l[0],s=l[1],u=!!a.minTakenDate,m=u?a.minTakenDate:c;return o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(Ee.a,{utils:ge.a},o.a.createElement(be.a,{style:{marginLeft:"0.5rem"},disabled:!u,margin:"normal",id:"date-picker-dialog",label:"min taken date",format:"dd/MM/yyyy",value:m,onChange:function(e){m=e,s(e),t({type:"SET_MIN_TAKEN_DATE",minTakenDate:Object(fe.a)(e,"yyyy-MM-dd")})}})),o.a.createElement(ve.a,{style:{alignSelf:"flex-end",marginLeft:"1rem"},checked:u,onChange:function(e){e.target.checked?t({type:"SET_MIN_TAKEN_DATE",minTakenDate:Object(fe.a)(m,"yyyy-MM-dd")}):t({type:"SET_MIN_TAKEN_DATE",minTakenDate:null})},value:"min taken date",color:"primary",inputProps:{"aria-label":"minimum taken date"}}))}function Oe(e){var t=Object(n.useContext)(te),a=Object(n.useContext)(p),r=Object(n.useState)(new Date),l=Object(i.a)(r,2),c=l[0],s=l[1],u=!!a.maxTakenDate,m=u?a.maxTakenDate:c;return o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(Ee.a,{utils:ge.a},o.a.createElement(be.a,{style:{marginLeft:"0.5rem"},disabled:!u,margin:"normal",id:"date-picker-dialog",label:"max taken date",format:"dd/MM/yyyy",value:m,onChange:function(e){return function(e){m=e,s(e),t({type:"SET_MAX_TAKEN_DATE",maxTakenDate:Object(fe.a)(e,"yyyy-MM-dd")})}(e)}})),o.a.createElement(ve.a,{style:{alignSelf:"flex-end",marginLeft:"1rem"},checked:u,onChange:function(e){e.target.checked?t({type:"SET_MAX_TAKEN_DATE",maxTakenDate:Object(fe.a)(m,"yyyy-MM-dd")}):t({type:"SET_MAX_TAKEN_DATE",maxTakenDate:!1})},value:"max taken date",color:"primary",inputProps:{"aria-label":"maximum taken date"}}))}var ke=a(403),we=a(404),je=a(405);function Te(e){var t=!e.checked;return o.a.createElement(ke.a,{row:!0,style:{justifyContent:"left"}},o.a.createElement(we.a,{control:o.a.createElement(je.a,{checked:t,onChange:function(t){e.callback()},value:t}),label:e.label}))}var Se=a(56),Pe=Object(_.a)({list:{width:"70vw"},fullList:{width:"auto"},hamburger:{marginRight:"0.5rem",color:"#fff"}});var De=Object(Se.f)((function(e){var t=Pe(),a=Object(n.useState)(!1),r=Object(i.a)(a,2),l=r[0],c=r[1],s=function(){return c(!l)},u=Object(n.useState)(!1),m=Object(i.a)(u,2),d=m[0],p=m[1],h=function(){return p(!d)},g=Object(n.useState)(!1),f=Object(i.a)(g,2),E=f[0],b=f[1],v=function(){b(!1),e.history.goBack()};return Object(n.useEffect)((function(){window.onpopstate=function(){b(!1)}})),o.a.createElement("div",null,e.location.pathname.startsWith("/menu/")&&!E&&o.a.createElement(Se.a,{to:"/"}),o.a.createElement(C.a,{onClick:function(){e.history.push("/menu/"),b(!0)},"aria-label":"Open Menu",size:"medium",className:t.hamburger},o.a.createElement(Y.a,{fontSize:"large"})),o.a.createElement(K.a,{open:E,onClose:v},o.a.createElement("div",{className:t.list,role:"presentation"},o.a.createElement(R.a,{style:{display:"flex",justifyContent:"flex-end"}},o.a.createElement(C.a,{onClick:v,style:{marginRight:"1rem"}},o.a.createElement(X.a,null))),o.a.createElement(U.a,null),o.a.createElement(R.a,null,o.a.createElement(G.a,{button:!0,onClick:s},o.a.createElement(W.a,null,o.a.createElement(V.a,null)),o.a.createElement(B.a,{primary:"Query Options"}),l?o.a.createElement(q.a,null):o.a.createElement(J.a,null)),o.a.createElement(z.a,{in:l,timeout:"auto",unmountOnExit:!0},o.a.createElement(R.a,{component:"div",disablePadding:!0},o.a.createElement(G.a,{style:{flexFlow:"column"}},o.a.createElement(oe,null)),o.a.createElement(G.a,null,o.a.createElement(me,null)),o.a.createElement(G.a,null,o.a.createElement(he,{searchFlikr:e.searchFlikr})),o.a.createElement(U.a,{className:t.divider}),o.a.createElement(G.a,null,o.a.createElement(ye,null)),o.a.createElement(G.a,null,o.a.createElement(_e,null)),o.a.createElement(U.a,{className:t.divider}),o.a.createElement(G.a,null,o.a.createElement(xe,null)),o.a.createElement(G.a,null,o.a.createElement(Oe,null))))),o.a.createElement(R.a,null,o.a.createElement(G.a,{button:!0,onClick:h},o.a.createElement(W.a,null,o.a.createElement(Q.a,null)),o.a.createElement(B.a,{primary:"Map Options"}),d?o.a.createElement(q.a,null):o.a.createElement(J.a,null)),o.a.createElement(z.a,{in:d,timeout:"auto",unmountOnExit:!0},o.a.createElement(R.a,{component:"div",disablePadding:!0},o.a.createElement(G.a,null,o.a.createElement(Te,{callback:e.togglePhotoMarkerDisplay,checked:e.displayPhotoMarkers,label:"Hide all results from the map"})),o.a.createElement(G.a,null,o.a.createElement(Te,{callback:e.toggleFavorites,checked:e.displayFavorites,label:"Hide all favorites from the map"})),o.a.createElement(G.a,null,o.a.createElement(H.a,{variant:"contained",style:{marginTop:"1rem",color:"black",width:"100%"},color:"secondary",size:"large",onClick:e.handleMyLocationClick},o.a.createElement(Z.a,{style:{marginRight:"1rem"}}),"My location"))))))))})),Ce=function(e){var t=Object(w.a)("(min-width:450px)"),a=Object(w.a)("(min-width:900px)"),n=Object(w.a)("(min-width:1200px)");switch(e){case 450:return t;case 900:return a;case 1200:return n}},Me=a(184),Ae=a.n(Me),Fe=Object(_.a)((function(e){return{root:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2)},grow:{flexGrow:1,color:"red",width:"100px"},icons_container:{display:"flex"},logo_container:{cursor:"pointer",display:"flex",alignItems:"center"},favorites:{color:"#ff0000"}}}));function Ie(e){var t=Object(x.a)();return o.a.createElement(O.a,{appear:!1,direction:"down",in:!t},e.children)}function Ne(e){var t=e.children,a=Fe(),n=Object(x.a)({disableHysteresis:!0,threshold:100});return o.a.createElement(k.a,{in:n},o.a.createElement("div",{onClick:function(e){var t=(e.target.ownerDocument||document).querySelector("#back-to-top-anchor");t&&t.scrollIntoView({behavior:"smooth",block:"center"})},role:"presentation",className:a.root},t))}function Le(e){var t=Fe(),a=Object(w.a)("(max-width:450px)");return o.a.createElement(o.a.Fragment,null,o.a.createElement(j.a,null),o.a.createElement(Ie,e,o.a.createElement(T.a,null,o.a.createElement(S.a,{disableGutters:!Ce(900)},!Ce(900)&&o.a.createElement(De,{searchFlikr:e.searchFlikr,handleMyLocationClick:e.handleMyLocationClick,togglePhotoMarkerDisplay:e.togglePhotoMarkerDisplay,toggleFavorites:e.toggleFavorites,displayPhotoMarkers:e.displayPhotoMarkers,displayFavorites:e.displayFavorites}),o.a.createElement("div",{className:t.logo_container,onClick:function(e){var t=(e.target.ownerDocument||document).querySelector("#back-to-top-anchor");t&&t.scrollIntoView({behavior:"smooth",block:"center"})}},o.a.createElement("img",{src:Ae.a,"aria-label":"World Gallery Logo",alt:"World Gallery Logo",style:{marginRight:"0.5rem",height:"45px"}}),o.a.createElement(P.a,{variant:"h6"},o.a.createElement("span",{style:{color:"#dedee6"}},"World"),o.a.createElement("span",{style:{color:"#ffc1d5"}},"Gallery"))),o.a.createElement("div",{className:t.grow}),o.a.createElement("div",{className:t.icons_container},e.photos>0&&!a&&o.a.createElement(D.a,{title:"column"===e.gridDirection?"Display images as Rows":"Display images as Columns","aria-label":"column"===e.gridDirection?"Display images as Rows":"Display images as Columns"},o.a.createElement(C.a,{color:"inherit",onClick:e.toggleGridDirection},"column"===e.gridDirection?o.a.createElement(o.a.Fragment,null,o.a.createElement(F.a,{className:t.control_icon})):o.a.createElement(o.a.Fragment,null,o.a.createElement(I.a,{className:t.control_icon})))),o.a.createElement(D.a,{title:"Open Favorites","aria-label":"Open Favorites"},o.a.createElement(C.a,{color:"inherit","aria-label":"Open Favorites",onClick:e.handleOpenFavorites},o.a.createElement(N.a,{className:t.favorites}))))))),o.a.createElement(S.a,{id:"back-to-top-anchor"}),o.a.createElement(M.a,{style:Ce(1200)?{margin:"5px 25px 2px"}:{margin:"5px 0 2px"}},e.children),o.a.createElement(Ne,e,o.a.createElement(A.a,{color:"secondary",size:"small","aria-label":"scroll back to top"},o.a.createElement(L.a,null))))}var Re=a(186),Ue=a(428),Ge=a(429),We=Object(_.a)((function(e){return{pin_to_map_btn:{position:"absolute",bottom:"2px",left:"2px",backgroundColor:"#f500577a","&:hover":{boxShadow:"0px 0px 11px 0px rgba(0,0,0,0.75)"}},options_btn:{top:"2px",right:"2px",position:"absolute",backgroundColor:"#ffffffa6","&:hover":{backgroundColor:"#f5f5f5e8",boxShadow:"0px 0px 11px 0px rgba(0,0,0,0.75)"}},image:{margin:"2px",display:"block"}}})),Be=o.a.memo((function(e){var t=e.index,a=e.photo,r=e.margin,l=e.direction,s=e.top,u=e.left,d=e.imageToggleFavorites,p=e.openLightbox,h=e.handleOpenMenuClick,g=We(),f=Object(n.useContext)(m),E=Object(n.useState)(!1),b=Object(i.a)(E,2),v=b[0],y=b[1],_=o.a.useMemo((function(){return!!f.favorites.find((function(e){return e.photoId===a.photoId}))}),[f.favorites,a.photoId]),x={backgroundColor:"#eee",cursor:"pointer",overflow:"hidden",position:"relative"};return console.log(l),"column"===l&&(x.position="absolute",x.left=u,x.top=s),Object(n.useEffect)((function(){console.log("Image Wrapper updated")}),[t,a,r,l,s,u,d,p,h]),Object(n.useEffect)((function(){console.log("Image Wrapper updated Because REASONS")})),o.a.createElement("div",{style:Object(c.a)({margin:r,height:a.height,width:a.width},x),className:g.container,onMouseEnter:function(e,t){y(!0)}.bind(void 0,a),onMouseLeave:function(e,t){y(!1)},onTouchStart:function(){y(!0),window.setTimeout((function(){y(!1)}),3e3)}},o.a.createElement("img",{src:a.src,title:a.title?a.title+" - by user ".concat(a.ownername):"untitled - by user ".concat(a.ownername),alt:a.alt,srcSet:a.srcSet,width:a.width,heigth:a.height,sizes:a.sizes,className:g.image,onClick:function(e){return p.call(void 0,e,{index:t,photo:a})}}),o.a.createElement(k.a,{in:v},o.a.createElement(A.a,{size:"small","aria-label":"more",className:g.options_btn,onClick:h.bind(void 0,a)},o.a.createElement(Ue.a,null))),o.a.createElement(k.a,{in:v},o.a.createElement(A.a,{size:"small",color:"secondary","aria-label":_?"remove from favorites":"add to favorites",className:g.pin_to_map_btn,onClick:d.bind(void 0,a,_)},_?o.a.createElement(N.a,{style:{color:"gold"}}):o.a.createElement(Ge.a,{style:{color:"#000"}}))))})),ze=a(194),He=a(430),Ke={width:"100%"};function Xe(e){var t=Object(n.useContext)(d);return o.a.createElement("div",null,o.a.createElement(ze.a,{id:"image-menu",anchorEl:e.anchorEl,keepMounted:!0,open:Boolean(e.anchorEl),onClose:e.handleMenuClose},!e.openFavorites&&o.a.createElement(ce.a,{onClick:function(){e.handleMenuClose(),t({type:"BLOCK_USER",userId:e.photoData.owner})}},"Temporary hide photos from this user"),o.a.createElement(ce.a,{onClick:e.handleMenuClose},o.a.createElement(He.a,{style:Ke,target:"_blank",href:e.photoData?"https://www.flickr.com/photos/".concat(e.photoData.owner,"/").concat(e.photoData.photoId):"",color:"inherit"},"Open Photo in Flickr"))))}var Ve=o.a.memo((function(e){var t=e.photos,a=e.responseDetails,r=e.direction,l=e.imageToggleFavorites,c=e.hiddenPhotos,s=e.openLightbox,u=e.openFavorites;o.a.useEffect((function(){console.log("IMAGE GRID: some props Caused Rerender!!!!!")}),[t,a,r,l,c]),console.log("IMAGEGRID UPDATED!");var m=Object(n.useState)(null),d=Object(i.a)(m,2),p=d[0],h=d[1],g=Object(n.useState)(null),f=Object(i.a)(g,2),E=f[0],b=f[1],v=function(e,t){b(e),h(t.currentTarget)},y=Object(n.useCallback)((function(e){return o.a.createElement(Be,{key:e.key,margin:"2px",index:e.index,photo:e.photo,left:e.left,top:e.top,imageToggleFavorites:l,direction:e.direction,openLightbox:e.onClick,handleOpenMenuClick:v,openFavorites:u})}),[l,u]);return o.a.createElement("div",null,u?o.a.createElement(o.a.Fragment,null,o.a.createElement(P.a,{variant:"subtitle1",component:"h2",gutterBottom:!0},0===t.length?"Favorites is empty":"".concat(t.length," photos in favorites:"))):o.a.createElement(o.a.Fragment,null,o.a.createElement(P.a,{variant:"h3",component:"h1",style:{marginTop:"1.9rem"}},"Results:"),o.a.createElement(P.a,{variant:"subtitle1",component:"h2",gutterBottom:!0},0===t.length?"Sorry could not find any photos in that particular area":"Displaying ".concat(t.length," of total ").concat(a.totalPhotos," photos found..."))),c.length>0&&o.a.createElement(P.a,{variant:"subtitle2",component:"p",gutterBottom:!0},"(",c.length,") photos from blocked users are hidden."),t.length>0&&o.a.createElement(Re.a,{photos:t,direction:r,renderImage:y,onClick:s}),o.a.createElement(Xe,{anchorEl:p,handleOpenMenuClick:v,handleMenuClose:function(){h(null)},photoData:E,openFavorites:u}))})),qe=Object(_.a)((function(e){return{button:{margin:"1rem auto",display:"block"}}})),Je=function(e){var t=qe();return o.a.createElement(H.a,{onClick:e.onClick,variant:"outlined",size:"large",className:t.button},"Load more photos")},Qe=a(431),Ze=Object(_.a)({root:{flexGrow:1,margin:"0.5rem 0"}});function Ye(){var e=Ze();return o.a.createElement("div",{className:e.root},o.a.createElement(Qe.a,null),o.a.createElement(Qe.a,{color:"secondary"}))}var $e=a(77),et=a(435),tt=a(451),at=a(433),nt=a(434),ot=a(114),rt=a.n(ot),lt=a(198),it=a(432),ct=Object(_.a)((function(e){return{root:{padding:"2px 4px",display:"flex",alignItems:"center",width:"100%",border:"1px solid #29272752"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:28,margin:4},form:{display:"flex",width:"100%",alignItems:"center"}}}));function st(){var e=ct(),t=Object(n.useContext)(m),a=Object(n.useRef)(null),r=Object(n.useRef)(null);Object(n.useEffect)((function(){t.mapLoaded&&(r.current=new window.google.maps.Geocoder)}),[t.mapLoaded]);var l=Object(n.useRef)(null),i=o.a.useCallback((function(){c(r.current,window.map)}),[r]);function c(e,t){var n=a.current.value;e.geocode({address:n},(function(e,a){"OK"===a?t.fitBounds(e[0].geometry.viewport):alert("Geocode was not successful for the following reason: "+a)}))}Object(n.useEffect)((function(){console.log("USEFFECT ON MOUNT(***********************************)"),t.mapLoaded&&(l.current=new window.google.maps.places.Autocomplete(a.current),l.current.setFields(["address_component","formatted_address"]),l.current.addListener("place_changed",i))}),[i,t.mapLoaded]);return o.a.createElement($e.a,{className:e.root,elevation:2},o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),c(r.current,window.map)},className:e.form},o.a.createElement(lt.a,{disabled:!t.mapLoaded,id:"autocomplete",inputRef:a,className:e.input,placeholder:"Search address or location",inputProps:{"aria-label":"search google maps"},defaultValue:"",endAdornment:o.a.createElement(de.a,{position:"end"},o.a.createElement(C.a,{"aria-label":"clear search google maps input",onClick:function(){a.current.value=""}},o.a.createElement(pe.a,null)))}),o.a.createElement(U.a,{className:e.divider,orientation:"vertical"}),o.a.createElement(C.a,{type:"submit",className:e.iconButton,"aria-label":"search",disabled:!t.mapLoaded},o.a.createElement(it.a,null))))}var ut=Object(_.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},details_root:{display:"flex",flexFlow:"column"},details_root_geolocation:{padding:"4px",marginBottom:"12px"}}}));function mt(e){var t=ut();return o.a.createElement("div",{className:t.root},o.a.createElement(tt.a,{defaultExpanded:!0},o.a.createElement(at.a,{expandIcon:o.a.createElement(rt.a,null),"aria-controls":"geolocation-search"},o.a.createElement(P.a,{className:t.heading},"Geolocation search")),o.a.createElement(nt.a,{id:"geolocation-search",classes:{root:t.details_root_geolocation}},o.a.createElement(st,null))),o.a.createElement(tt.a,null,o.a.createElement(at.a,{expandIcon:o.a.createElement(rt.a,null),"aria-controls":"request-options-content"},o.a.createElement(P.a,{className:t.heading},"Query Options")),o.a.createElement(nt.a,{id:"request-options-content",classes:{root:t.details_root}},e.requestOptions)),o.a.createElement(tt.a,null,o.a.createElement(at.a,{expandIcon:o.a.createElement(rt.a,null),"aria-controls":"map-options-content"},o.a.createElement(P.a,{className:t.heading},"Map Options")),o.a.createElement(nt.a,{id:"map-options-content",classes:{root:t.details_root}},e.mapOptions)))}var dt=Object(_.a)((function(e){return{panel:{textAlign:"center",maxWidth:"40vw",width:"40vw",display:"flex",flexFlow:"column",overflowY:"scroll"},panel_item:{margin:"8px",display:"flex"},wrapper:{margin:"0.5rem"},divider:{margin:"1rem 0"},control_icon:{marginRight:"1rem"},search_photos_box:{justifyContent:"center"},map_options_container:{display:"flex",flexFlow:"column",textAlign:"left"}}})),pt=Object(n.memo)((function(e){var t=Object(n.useContext)(m),a=dt();return o.a.createElement($e.a,{className:a.panel},o.a.createElement("div",{className:a.wrapper},o.a.createElement(M.a,{className:a.panel_item},o.a.createElement(P.a,null,"Zoom to the location that you want to search for photos and hit the search button.")),o.a.createElement(M.a,{className:a.panel_item+a.search_photos_box},o.a.createElement(H.a,{disabled:!t.mapLoaded,variant:"contained",style:{backgroundColor:"#179207",width:"100%"},size:"large",onClick:e.searchFlikr},o.a.createElement(et.a,{className:a.control_icon}),"Search Photos"),e.loadingPhotos&&o.a.createElement(Ye,null)),o.a.createElement(U.a,{className:a.divider}),o.a.createElement(mt,{requestOptions:o.a.createElement(o.a.Fragment,null,o.a.createElement(oe,null),o.a.createElement(me,null),o.a.createElement(he,{searchFlikr:e.searchFlikr}),o.a.createElement(U.a,{className:a.divider}),o.a.createElement(ye,null),o.a.createElement(_e,null),o.a.createElement(U.a,{className:a.divider}),o.a.createElement(xe,null),o.a.createElement(Oe,null)),mapOptions:o.a.createElement("div",{className:a.map_options_container},o.a.createElement(Te,{callback:e.togglePhotoMarkerDisplay,checked:e.displayPhotoMarkers,label:"Hide all results from map"}),o.a.createElement(Te,{callback:e.toggleFavorites,checked:e.displayFavorites,label:"Hide all favorites from map"}),o.a.createElement(H.a,{variant:"contained",style:{marginTop:"1rem",color:"black"},color:"secondary",size:"large",onClick:e.handleMyLocationClick,disabled:!t.mapLoaded},o.a.createElement(Z.a,{style:{marginRight:"1rem"}}),"My location"))}),o.a.createElement(M.a,{className:a.panel_item},e.children)))})),ht=Object(_.a)((function(e){return{panel:{textAlign:"center",display:"flex",flexFlow:"column"},wrapper:{margin:"0 0.5rem"},control_icon:{marginRight:"1rem"},search_btn_box:{margin:"0.5rem 0",width:"100%"}}})),gt=function(e){var t=ht();return o.a.createElement($e.a,{className:t.panel},o.a.createElement("div",{className:t.wrapper},o.a.createElement("div",{style:{marginTop:"5px"}},"Zoom to the location that you want to search for photos and hit the search button."),o.a.createElement(st,null),o.a.createElement(D.a,{title:"Search Photos","aria-label":"Search Photos"},o.a.createElement(H.a,{variant:"contained",style:{backgroundColor:"#179207"},size:"large",onClick:e.searchFlikr,className:t.search_btn_box},o.a.createElement(et.a,{className:t.control_icon}),"Search Photos")),e.loadingPhotos&&o.a.createElement(Ye,null)))},ft=a(400),Et=Object(_.a)((function(e){return{appBar:{position:"relative"},title:{flex:1},direction_btn:{margin:"0 1rem"}}})),bt=o.a.forwardRef((function(e,t){return o.a.createElement(O.a,Object.assign({direction:"up",ref:t},e))}));var vt=Object(Se.f)((function(e){var t=Et(),a=Object(n.useContext)(m),r=Object(w.a)("(max-width:450px)"),l=Object(n.useState)("row"),c=Object(i.a)(l,2),s=c[0],u=c[1],d=function(){e.handleCloseFavorites(),e.history.goBack()};return o.a.createElement("div",null,!e.openFavorites&&o.a.createElement(Se.a,{to:"/"}),o.a.createElement(ft.a,{fullScreen:!0,open:e.openFavorites,onClose:d,TransitionComponent:bt},o.a.createElement(T.a,{className:t.appBar},o.a.createElement(S.a,null,o.a.createElement(P.a,{variant:"h5",component:"h1",className:t.title},"Favorites"),a.favorites.length>0&&!r&&o.a.createElement(D.a,{title:"column"===s?"Display images as Rows":"Display images as Columns","aria-label":"column"===s?"Display images as Rows":"Display images as Columns"},o.a.createElement(C.a,{className:t.direction_btn,color:"inherit",onClick:function(){u("row"===s?"column":"row")}},"column"===s?o.a.createElement(o.a.Fragment,null,o.a.createElement(F.a,{className:t.control_icon})):o.a.createElement(o.a.Fragment,null,o.a.createElement(I.a,{className:t.control_icon})))),o.a.createElement(C.a,{edge:"start",color:"inherit",onClick:d,"aria-label":"close"},o.a.createElement(pe.a,null)))),a.favorites&&o.a.createElement(Ve,{photos:a.favorites,hiddenPhotos:a.hiddenPhotos,responseDetails:e.responseDetails,direction:r?"column":s,imageToggleFavorites:e.imageToggleFavorites,openLightbox:e.openLightbox,openFavorites:e.openFavorites})))})),yt=a(436),_t=a(437),xt=Object(_.a)((function(e){return{header_container:{position:"absolute",top:"2px",left:"2px",width:"100vw",display:"flex",zIndex:"2000",justifyContent:"space-between",transition:"opacity 300ms",opacity:"1"},lightbox_btn:{color:"#fff",background:"rgba(255, 255, 255, 0.2)",margin:"2px",border:"1px solid #00000024","&:hover":{boxShadow:"0px 0px 11px 0px rgba(0,0,0,0.75)",background:"rgba(255, 255, 255, 0.3)"}},hide_on_idle:{opacity:"0"}}})),Ot=function(e){var t=xt(),a=Object(n.useContext)(m),r=o.a.useMemo((function(){return!!a.favorites.find((function(t){return t.photoId===e.currentView.photoId}))}),[a.favorites,e.currentView.photoId]);return e.isModal?o.a.createElement("div",{className:e.interactionIsIdle?t.header_container+" "+t.hide_on_idle:t.header_container},o.a.createElement(C.a,{"aria-label":"Pin photo on map",className:t.lightbox_btn,onClick:e.carouselProps.imageToggleFavorites.bind(void 0,e.data,r)},r?o.a.createElement(N.a,{style:{color:"gold"}}):o.a.createElement(Ge.a,null)),o.a.createElement("div",{className:t.btn_container_right},o.a.createElement(C.a,{"aria-label":"toggle fullscreen",className:t.lightbox_btn,edge:"start",onClick:e.modalProps.toggleFullscreen},e.modalProps.isFullscreen?o.a.createElement(yt.a,null):o.a.createElement(_t.a,null)),!e.modalProps.isFullscreen&&o.a.createElement(C.a,{"aria-label":"Close",className:t.lightbox_btn,edge:"start",onClick:e.modalProps.onClose},o.a.createElement(pe.a,null)))):null},kt=function(e){var t=e.data,a=e.getStyles,n=e.index,r=e.currentIndex,l=t.alt,i=t.src;return Math.abs(r-n)<=1?o.a.createElement("div",{style:a("view",e)},o.a.createElement("img",{alt:l||"Image ".concat(n),src:i,style:{height:"auto",maxHeight:"100vh",maxWidth:"100%",userSelect:"none"}})):null},wt=a(116),jt=a(446),Tt=a(438),St=a(439),Pt=a(440);function Dt(e){return o.a.createElement(O.a,Object.assign({},e,{direction:"up"}))}var Ct=Object(_.a)((function(e){return{close:{padding:e.spacing(.5)},success:{backgroundColor:"#43a047"},error:{backgroundColor:"#d32f2f"},warning:{backgroundColor:"#ec8f06"},message:{display:"flex",alignItems:"center"},icon:{marginRight:"5px"}}}));function Mt(){var e=Object(n.useContext)(m),t=Ct(),a="success"===e.toast.variant?Tt.a:"error"===e.toast.variant?St.a:Pt.a,r=o.a.useRef([]),l=o.a.useState(!1),c=Object(i.a)(l,2),s=c[0],u=c[1],d=o.a.useState(void 0),p=Object(i.a)(d,2),h=p[0],g=p[1],f=function(){r.current.length>0&&(g(r.current.shift()),u(!0))};Object(n.useEffect)((function(){var t=e.toast.message;t&&(r.current.push({message:t,key:(new Date).getTime()}),s?u(!1):f())}),[e.toast]);var E=function(e,t){"clickaway"!==t&&u(!1)};return o.a.createElement("div",null,o.a.createElement(jt.a,{key:h?h.key:void 0,anchorOrigin:{vertical:"bottom",horizontal:"left"},open:s,autoHideDuration:3500,onClose:E,onExited:function(){f()},TransitionComponent:Dt,ContentProps:{"aria-describedby":"message-id",classes:{root:"success"===e.toast.variant?t.success:"error"===e.toast.variant?t.error:t.warning}},message:o.a.createElement("span",{id:"message-id",className:t.message},o.a.createElement(a,{className:t.icon}),h?h.message:void 0),action:[o.a.createElement(C.a,{key:"close","aria-label":"close",color:"inherit",className:t.close,onClick:E},o.a.createElement(pe.a,null))]}))}var At=a(86),Ft=a(171),It=a(190),Nt=a.n(It),Lt=a(191),Rt=a.n(Lt),Ut=a(192),Gt=a.n(Ut),Wt=Object(_.a)((function(e){return{content:{maxHeight:"700px"},slide_text:{maxWidth:"90%"},slide_text_mobile:{paddingTop:"8px"},subtitle:{color:"#00024b"},slide_title:{whiteSpace:"initial",lineHeight:"23px",fontSize:"22px",color:"#00024b"},image:{maxWidth:"100%"}}})),Bt=function(e){var t=Wt(),a=Object(w.a)("(max-width:450px)");return o.a.createElement("div",{style:{position:"relative",width:"100%",height:65},className:"wrapper"},o.a.createElement(At.AutoRotatingCarousel,{mobile:a,autoplay:!1,label:"Get Started",open:e.open,onClose:e.closeCarousel,onStart:e.closeCarousel,style:{position:"absolute",color:"orange"}},o.a.createElement(At.Slide,{media:o.a.createElement("img",{src:Nt.a,alt:"Flickr Api plus Maps",className:t.image}),mediaBackgroundStyle:{backgroundColor:Ft.a[400]},classes:{textMobile:t.slide_text_mobile,text:t.slide_text,title:t.slide_title,subtitle:t.subtitle},style:{backgroundColor:Ft.a[700]},title:"Query Flickr's photos with one click",subtitle:"World Gallery is a Web App that lets you query Flickr public photos by the location that they were taken."}),o.a.createElement(At.Slide,{media:o.a.createElement("img",{src:Gt.a,alt:"Results are pinned on the Map",className:t.image}),mediaBackgroundStyle:{backgroundColor:Ft.a[400]},classes:{textMobile:t.slide_text_mobile,text:t.slide_text,title:t.slide_title,subtitle:t.subtitle},style:{backgroundColor:Ft.a[700]},title:"Results are pinned on the spot they where taken*",subtitle:"*On average a photo taken with a camera with a GPS or a smartphone will have an error of 5-15 meters.\n              No spatial accuracy can be guaranteed for photos where geolocation was set explicitly."}),o.a.createElement(At.Slide,{media:o.a.createElement("img",{src:Rt.a,alt:"Powered by Google Geocoding API, Place Autocomplete and Google Maps",className:t.image}),mediaBackgroundStyle:{backgroundColor:Ft.a[400]},classes:{textMobile:t.slide_text_mobile,text:t.slide_text,title:t.slide_title,subtitle:t.subtitle},style:{backgroundColor:Ft.a[700]},title:"Geolocation search for easy localization",subtitle:"Powered by Google's Geocoding and Location Autocomplete to quickly center the desired\n           country, city, landmark, establishment or address on the map."})))},zt=Object(n.lazy)((function(){return a.e(3).then(a.bind(null,455))})),Ht=function(e){return Object(c.a)({},e,{background:"rgba(255, 255, 255, 0.2)","&:hover, &:active":{boxShadow:"0px 0px 11px 0px rgba(0,0,0,0.75)",background:"rgba(255, 255, 255, 0.3)"},"&:active":{boxShadow:"0 1px 3px rgba(0, 0, 0, 0.14)",transform:"scale(0.96)"}})},Kt=function(e){return Object(c.a)({},e,{zIndex:"5500"})},Xt=function(e){return Object(c.a)({},e,{zIndex:"5000"})};var Vt=Object(Se.f)((function(e){var t=Object(n.useContext)(m),a=Object(n.useContext)(d),r=Object(n.useContext)(p),l=Object(w.a)("(max-width:450px)"),h=Object(Se.e)(),g=Object(n.useState)(!0),b=Object(i.a)(g,2),v=b[0],y=b[1],_=Object(n.useState)(!1),x=Object(i.a)(_,2),O=x[0],k=x[1];Object(n.useEffect)((function(){"/"===h.location.pathname&&j()}),[h.location.pathname]);var j=function(){k(!1)},T=Object(n.useState)(0),S=Object(i.a)(T,2),P=S[0],D=S[1],C=Object(n.useState)(!1),M=Object(i.a)(C,2),A=M[0],F=M[1],I=Object(n.useCallback)((function(t,a){a.photo;var n=a.index;D(n),F(!0);var o="/";switch(e.location.pathname){case"/":o="/img-carousel/";break;case"/favorites/":o="/favorites/img-carousel/";break;default:return}h.push(o)}),[h,e.location.pathname]),N=o.a.useRef(null),L=Object(n.useState)(!1),R=Object(i.a)(L,2),U=R[0],G=R[1],W=Object(n.useState)(null),B=Object(i.a)(W,2),z=B[0],H=B[1],K=Object(n.useState)("row"),X=Object(i.a)(K,2),V=X[0],q=X[1],J=Object(n.useState)(!0),Q=Object(i.a)(J,2),Z=Q[0],Y=Q[1],$=Object(n.useCallback)((function(){Y(!Z)}),[Y,Z]),ee=Object(n.useState)(!0),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],oe=function(){return ne(!ae)},re=Object(n.useCallback)((function(e,t){console.log(t),a(t?{type:"REMOVE_IMG_FROM_FAVORITES",image:e}:{type:"ADD_IMG_TO_FAVORITES",image:e})}),[a]),le=function(){var e;console.log("fetching...");var t=window.map?window.map.getBounds().toJSON():"error";e={minUploadDate:r.minUploadDate,maxUploadDate:r.maxUploadDate,minTakenDate:r.minTakenDate,maxTakenDate:r.maxTakenDate,resultsPerPage:r.resultsPerPage,sortMethod:r.sortMethod,searchText:r.searchText,bounds:t},G(!0),s(e).then((function(e){if(G(!1),"ok"===e.stat)H(Object(c.a)({},e)),a({type:"SET_PHOTOS",photos:e.photos}),window.setTimeout((function(){N.current.scrollIntoView({behavior:"smooth",block:"center"})}),100);else switch(e.code){case 4:a({type:"MAKE_TOAST",message:"Your location search intersects with antimeridian!\n                Make sure that the red vertical line is out of map extents",variant:"error"});break;case 9999:a({type:"MAKE_TOAST",message:"Failed to fetch, please check your internet connection",variant:"error"});break;default:a({type:"MAKE_TOAST",message:e.message,variant:"error"})}})).catch((function(e){G(!1),a({type:"MAKE_TOAST",message:e.message,variant:"error"})}))};Object(n.useEffect)((function(){fetch("https://geoip-db.com/json/42e6a770-b3ac-11e9-80ca-c95181800da7").then((function(e){return e.json()})).then((function(e){a({type:"SET_USER_LOCATION",userLocation:{lat:e.latitude,lng:e.longitude}})})).catch((function(e){console.log(e)}))}),[]);var ie=function(e){!function(e){var t=3e3,a=setInterval((function(){t<=0&&n(),window.map?(e(),n()):t-=10}),10),n=function(){return clearInterval(a)}}((function(){window.map.panTo(e),window.map.setZoom(16)}))},ce=function(){if(t.userLocation)ie(t.userLocation);else{"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(e){ie({lat:e.coords.latitude,lng:e.coords.longitude}),a({type:"SET_USER_LOCATION",userLocation:{lat:e.coords.latitude,lng:e.coords.longitude}})}),(function(e){return console.log(e)})):alert("Sorry geolocation is not supported by your broweser.")}};return o.a.createElement("div",{className:"App"},o.a.createElement(Le,Object.assign({photos:z?z.totalPages:0,toggleGridDirection:function(){q("row"===V?"column":"row")},gridDirection:V,searchFlikr:le,handleMyLocationClick:ce,togglePhotoMarkerDisplay:$,toggleFavorites:oe,displayPhotoMarkers:Z,displayFavorites:ae,handleOpenFavorites:function(){h.push("/favorites/"),k(!0)}},e),o.a.createElement("section",{style:Ce(900)?{display:"flex",height:"calc(100vh - 7px - 64px)"}:{display:"flex",height:"calc(100vh - 7px - 64px )",flexFlow:"column"}},Ce(900)&&o.a.createElement(pt,{searchFlikr:le,loadingPhotos:U,togglePhotoMarkerDisplay:$,toggleFavorites:oe,displayPhotoMarkers:Z,displayFavorites:ae,handleMyLocationClick:ce}),!Ce(900)&&o.a.createElement(gt,{searchFlikr:le,loadingPhotos:U}),o.a.createElement(n.Suspense,{fallback:o.a.createElement(u.a,{variant:"rect"})},o.a.createElement(zt,{setMapLoaded:function(){a({type:"SET_MAP_LOADED",mapLoaded:!0})},photos:t.filteredPhotos,favorites:t.favorites,displayPhotoMarkers:Z,displayFavorites:ae,screenWidth900px:Ce(900),openLightbox:function(e,t){var a=t.photo;t.index;D(0),F({photo:a}),h.push("/img-carousel/")},mapsErrorToast:function(){a({type:"MAKE_TOAST",message:"Failed to load Google Maps",variant:"error"})},idb:function(){var e;e=function(e){a({type:"ADD_IMG_TO_FAVORITES",image:e})},E.transaction("rw",E.favorites,(function(){return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.awrap(E.favorites.each((function(t){return e(t)})));case 2:case"end":return t.stop()}}))}))}}))),o.a.createElement("div",{ref:N}),t.filteredPhotos&&o.a.createElement(Ve,{photos:t.filteredPhotos,hiddenPhotos:t.hiddenPhotos,responseDetails:z,direction:l?"column":V,imageToggleFavorites:re,openFavorites:O,openLightbox:I}),z&&z.currentPage<z.totalPages&&o.a.createElement(o.a.Fragment,null,U&&o.a.createElement(Ye,null),o.a.createElement(Je,{onClick:function(){console.log("fetching next page...");var e=Object(c.a)({},z,{resultsPerPage:z.perPage});z.currentPage<z.totalPages&&(e.page=z.currentPage+1),G(!0),s(e).then((function(e){G(!1),H(Object(c.a)({},e)),a({type:"UPDATE_PHOTOS",photos:e.photos})})).catch((function(e){G(!1)}))}}))),o.a.createElement(wt.b,null,A&&("/img-carousel/"===h.location.pathname||"/favorites/img-carousel/"===h.location.pathname)&&o.a.createElement(wt.a,{onClose:function(){D(0),F(!1),h.goBack()},styles:{blanket:Xt,positioner:Kt}},o.a.createElement(wt.c,{imageToggleFavorites:re,components:{Header:Ot,View:kt},currentIndex:P,views:A.photo?[Object(c.a)({},A.photo,{srcset:A.photo.srcSet,caption:A.photo.title})]:O?t.favorites.map((function(e){return Object(c.a)({},e,{srcset:e.srcSet,caption:e.title})})):t.filteredPhotos.map((function(e){return Object(c.a)({},e,{srcset:e.srcSet,caption:e.title})})),styles:{navigationPrev:Ht,navigationNext:Ht}}))),O&&("/favorites/"===h.location.pathname||"/favorites/img-carousel/"===h.location.pathname)&&o.a.createElement(vt,{openFavorites:O,handleCloseFavorites:j,responseDetails:z,imageToggleFavorites:re,openLightbox:I}),v&&o.a.createElement(Bt,{open:v,closeCarousel:function(){return y(!1)}}),o.a.createElement(Mt,null),h.location.pathname.startsWith("/img-carousel/")&&!A&&o.a.createElement(Se.a,{to:"/"}),h.location.pathname.startsWith("/favorites/")&&!O&&o.a.createElement(Se.a,{to:"/"}),!["/","/menu/","/img-carousel/","/favorites/","/favorites/img-carousel/"].includes(h.location.pathname)&&o.a.createElement(Se.a,{to:"/"}))})),qt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Jt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Qt=a(80);l.a.render(o.a.createElement(Qt.a,null,o.a.createElement((function(e){var t=Object(n.useReducer)(y,{mapLoaded:!1,userLocation:null,searchRadius:3,photos:null,filteredPhotos:null,hiddenPhotos:[],favorites:[],blockedUsers:[],toast:{message:null,variant:null}}),a=Object(i.a)(t,2),r=a[0],l=a[1];return o.a.createElement(d.Provider,{value:l},o.a.createElement(m.Provider,{value:r},e.children))}),null,o.a.createElement((function(e){var t=Object(n.useReducer)(ae,{resultsPerPage:30,minUploadDate:!1,maxUploadDate:!1,minTakenDate:!1,maxTakenDate:!1,sortMethod:"date-posted-desc",searchText:""}),a=Object(i.a)(t,2),r=a[0],l=a[1];return o.a.createElement(te.Provider,{value:l},o.a.createElement(p.Provider,{value:r},e.children))}),null,o.a.createElement(j.a,null),o.a.createElement(Vt,null)))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/World-Gallery",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/World-Gallery","/service-worker.js");qt?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Jt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Jt(t,e)}))}}()}},[[216,1,2]]]);
//# sourceMappingURL=main.8f80966b.chunk.js.map