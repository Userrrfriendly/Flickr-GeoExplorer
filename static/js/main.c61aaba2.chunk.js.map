{"version":3,"sources":["assets/photoDark_Blue.png","requests/flikr.js","components/map/mapContainer.js","context/stateContext.js","context/dispatchContext.js","context/rootReducer.js","assets/logo.js","components/controlPanel/requestsNumberSlider.js","components/controlPanel/selectSortingMethod.js","components/controlPanel/textQuery.js","components/controlPanel/datePickers/minUploadDatePicker.js","components/controlPanel/datePickers/maxUploadDatePicker.js","components/controlPanel/datePickers/minTakenDatePicker.js","components/controlPanel/datePickers/maxTakenDatePicker.js","components/controlPanel/switches/customSwitch.js","components/drawer/drawer.js","CustomHooks/useScreenWidth.js","components/appBar/appBar.js","components/imageWrapper/imageWrapper.js","components/imageWrapper/imageMenu.js","components/imageGrid/imageGrid.js","components/controls/loadMoreBtn.js","components/LoadingBar/loadingBar.js","components/controlPanel/RadiusSlider.js","components/controlPanel/expansionPanels.js","components/controlPanel/controlPanel.js","components/controlPanel/controlPanelMobile.js","App.js","serviceWorker.js","index.js","context/store.js","assets/loveinterestDark.png"],"names":["module","exports","getPhotosByTitle","searchParams","query","console","log","url","URLSearchParams","append","searchText","sortMethod","minUploadDate","maxUploadDate","minTakenDate","maxTakenDate","searchMethod","bounds","south","west","north","east","lat","lng","radius","resultsPerPage","page","fetch","then","res","json","currentPage","photos","totalPages","pages","totalPhotos","total","perPage","perpage","photo","map","img","dateupload","datetaken","ownername","geolocation","parseFloat","latitude","longitude","photoId","id","width_t","parseInt","width_c","width_h","width_l","width_m","width_o","height_c","height_h","height_l","height_m","height_o","height","width","src","url_l","url_m","url_o","title","alt","key","owner","thumb","url_t","srcSet","url_c","url_h","sizes","catch","err","infoWindowContents","data","mapStyle","border","maxWidth","boxSizing","minHeight","maxHeight","Map","state","boundingBox","selectionMarker","photoMarkers","favorites","handleGoogleMapsError","window","gm_authFailure","props","document","querySelector","innerHTML","createGoogleApiScript","userLocation","body","script","createElement","async","defer","onerror","write","insertBefore","lastElementChild","initMap","google","maps","getElementById","center","zoom","gestureHandling","mapTypeId","MapTypeId","TERRAIN","streetViewControl","fullscreenControl","largeInfowindow","InfoWindow","event","addListenerOnce","getElementsByTagName","addPolygon","centerXY","toJSON","removePolygon","setBounds","zoomBounds","getBounds","northSouth","eastWest","boundsDynamic","removeMarker","rectangle","Rectangle","editable","draggable","setMap","getRadiusMarkerCoordinates","addListener","setState","polygon","createPhotoMarker","pin","show","marker","Marker","position","icon","photoMarker","scaledSize","animation","Animation","DROP","color","SETIMG","LASTMARKER","setIcon","heartMarker","RESET","forEach","prevState","pins","push","panTo","this","getPosition","setContent","open","showAllPhotoMarkers","markers","i","length","hideAllPhotoMarkers","showAllFavorites","hideAllFavorites","pinFavorite","favorite","addSearchCircle","searchCircle","Circle","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","searchRadius","SEARCHRADIUS","centerSearchCircle","setCenter","setSearchCenter","zoomToBounds","getCenter","fitBounds","prevProps","setRadius","displayPhotoMarkers","showFavorites","displayFavorites","f","triggerPhotoMarker","disableTriggerPhotoMarker","triggerCenter","disableCenter","triggerZoom","disableZoom","role","aria-label","style","screenWidth900px","flexGrow","React","Component","memo","StateContext","createContext","DispatchContext","SET_BOUNDING_BOX","SET_MAX_RESULTS_PER_PAGE","SET_USER_LOCATION","SET_SEARCH_RADIUS","SET_SEARCH_CENTER","SET_PHOTOS","UPDATE_PHOTOS","BLOCK_USER","ADD_IMG_TO_FAVORITES","REMOVE_IMG_FROM_FAVORITES","SET_MIN_UPLOAD_DATE","SET_MAX_UPLOAD_DATE","SET_MIN_TAKEN_DATE","SET_MAX_TAKEN_DATE","rootReducer","action","type","setBoundingBox","setResultsPerPage","searchCenter","setUserLocation","setSearchRadius","filteredPhotos","mapPhotos","filter","_find","el","blockedUsers","hiddenPhotos","setPhotos","newPhotosFiltered","includes","newHiddenPhotos","concat","newMapPhotos","updatePhotos","updatedBlockedUsers","userId","blockUser","image","addImgToFavorites","index","_findIndex","o","splice","removeImgFromFavorites","setMinUploadDate","setMaxUploadDate","setMinTakenDate","setMaxTakenDate","Logo","viewBox","cx","cy","r","fill","d","useStyles","makeStyles","root","display","alignItems","justifyContent","input","marginLeft","marginBottom","RequestNumberSlider","classes","store","useContext","dispatch","Typography","align","gutterBottom","className","Slider","value","onChange","newValue","aria-labelledby","step","min","max","marginRight","Input","margin","val","target","Number","isNaN","onBlur","Math","trunc","inputProps","theme","formControl","root_select","textAlign","SelectSortingMethod","FormControl","InputLabel","htmlFor","Select","handeSelectSortMethod","MenuItem","FormHelperText","TextQuery","handleSubmit","e","preventDefault","searchFlikr","onSubmit","fullWidth","placeholder","handleTextQueryChange","endAdornment","InputAdornment","IconButton","onClick","clearTextQuery","Close","MinUploadDatePicker","useState","Date","placeholderDate","setPlaceholderDate","checked","selectedDate","utils","DateFnsUtils","minDate","disabled","label","format","date","KeyboardButtonProps","Checkbox","alignSelf","MaxUploadDatePicker","MinTakenDatePicker","MaxTakenDatePicker","SwitchButton","FormGroup","row","FormControlLabel","control","Switch","callback","list","fullList","hamburger","DrawerMenu","openQueryOption","setOpenQueryOptions","handleQueryOptionsClick","openMapOptions","setOpenMapOptions","handleMapOptionsClick","drawerOpen","setDrawerOpen","closeDrawer","size","MenuRounded","fontSize","Drawer","onClose","List","ChevronLeft","Divider","ListItem","button","ListItemIcon","Ballot","ListItemText","primary","ExpandLess","ExpandMore","Collapse","in","timeout","unmountOnExit","component","disablePadding","flexFlow","divider","togglePhotoMarkerDisplay","toggleFavorites","Button","variant","marginTop","handleMyLocationClick","MyLocationTwoTone","useScreenWidth","useMediaQuery","bottom","spacing","right","grow","icons_container","logo_container","cursor","HideOnScroll","trigger","useScrollTrigger","Slide","appear","direction","appBarHide","children","ScrollTop","disableHysteresis","threshold","Zoom","anchor","ownerDocument","scrollIntoView","behavior","block","HideAppBar","matches","Fragment","CssBaseline","AppBar","Toolbar","disableGutters","useScreenWidth900","Tooltip","gridDirection","toggleGridDirection","control_icon","Box","Fab","KeyboardArrowUp","pin_to_map_btn","left","backgroundColor","boxShadow","options_btn","top","imageToggleFavorites","selected","openLightbox","handleOpenMenuClick","hover","setHover","isFavorite","cont","overflow","container","onMouseEnter","bind","onMouseLeave","onTouchStart","setTimeout","heigth","call","MoreVert","Favorite","FavoriteBorder","linkStyle","ImageMenu","Menu","anchorEl","keepMounted","Boolean","handleMenuClose","photoData","Link","href","header_container","zIndex","transition","opacity","lightbox_btn","background","hide_on_idle","navButtonStyles","base","transform","ViewRenderer","getStyles","currentIndex","abs","userSelect","CustomHeader","currentView","isModal","interactionIsIdle","carouselProps","btn_container_right","edge","modalProps","toggleFullscreen","isFullscreen","FullscreenExit","Fullscreen","responseDetails","setAppBarHide","columns","currentImage","setCurrentImage","viewerIsOpen","setViewerIsOpen","useEffect","useCallback","setAnchorEl","setPhotoData","currentTarget","imageRenderer","renderImage","components","Header","View","views","x","srcset","caption","styles","navigationPrev","navigationNext","LoadMoreButton","LoadingBar","LinearProgress","RadiusSlider","setValue","heading","typography","pxToRem","fontWeight","fontWeightRegular","details_root","ExpansionPanels","ExpansionPanel","ExpansionPanelSummary","expandIcon","aria-controls","ExpansionPanelDetails","requestOptions","mapOptions","panel","overflowY","panel_item","wrapper","search_photos_box","secondary_btn","map_options_container","ControlPanel","Paper","ImageSearchRounded","loadingPhotos","centerSearchAreaOnMap","CenterFocusStrong","zoomToSearchArea","ZoomOutMap","search_btn_box","ControlPanelMobile","App","resultsRef","useRef","setSortMethod","setSearchText","clearText","setLoadingPhotos","setTriggerZoom","setTriggerCenter","mapVisible","setMapVisible","setResponseDetails","setGridDirection","setDisplayPhotoMarkers","setDisplayFavorites","triggerPlotRadiusMarkerOnMap","setTtriggerPlotRadiusMarkerOnMap","disableRadiusTrigger","triggerMapExtents","setTriggerMapExtents","disableMapExtentsTrigger","FlikrApi","current","error","zoomToLocation","location","waitingThreshold","timer","setInterval","stopTimer","setZoom","clearInterval","navigator","getCurrentPosition","coords","alert","toggleMap","ref","hostname","match","ReactDOM","render","useReducer","radiusMarker","Provider","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c61aaba2.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAlCAYAAAAjt+tHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC6ElEQVRYhcWXP0wTURyAv5am1KY0JRJMCEkDQhxQREmMooREe4mDOKiDcXEE4wIOrq5uxIFBw2RcSUxYNM8YFgKDRCViTGwkTfwHBUVoylkuV4e+V694tH2llV/y8tp3l/d99+737u7nyWazABiG4QO8gF/2PqobFmADGcAWQlgAnmw2q+B+ICCbXwp4qwS3pUAGMGXLCCEsTywWU/AgEJZ9gNqsgAmkgQ3ZZ9RVBiS8WQgxW2VwQRiGcUb+tAHLufRBIcTs0GiChcU0Hz/9riq4s72e7q4gQohZwzCOIW+DM/ECQE3gwM45VZ55VbarVhO4i0SeqbK8WtmuE979Av9rsZ9R1l5vbvLxfu5o/n9bzwKbKfv/CaysWjR1vKkKUFtgNd6zJ0Ap8Yoet2pSNzknsBz5igTUxM9f/uL78jatLX4uDITLhu5ZYO2Hxe27CV5Mb+bHBvpCTD7u0J6rom145NQ7Ll+MsBrvybf+voaKElVbYPHDFgA3rh0sGB8ZPgTA56+Z2gok16yix9Nbes8HbYGT3UEAvi1vF4zHl0wAWlv8tRUIN9TxaCzK8J0Ec69SLCe3mZ7Z5OatJSYeRAke0Juyol1wZbCRSKSOS9fj+bGnTw5z7nSD9lwlde/d/+I6fr4/XLAL3OBTz9Zpixa/JSVXYHwiyfhEstRpFce+v46VQHXerXphKwHL0ehsr68Z0TF3nunlb7lkAnR3BWsioT7LZZiSaXtisZgfCAERihQmQ6MJJqd+lgW7OtjIw7Go6zFZmKwA60DKR24FTHLlErJocJZmXgAhxAxQUkLBDcM4K4dUfu0szUzALqc4zX/DCyHmi62EA95LYW7tXpyWKM9V7yzfXrtJOOAn5FWq++wUcC/Pi4UUC5DLk5CUeOuUcMCPS3hKNlOBdouSArtIhNRKAM4rT6EBL1vARSIsJeblsV4J3dCBawnskAjKpt40GXJLn9aBaws4JFRSqq2qtlhGBw7wBzAAVz/sPdCmAAAAAElFTkSuQmCC\"","/** *Flickrs API has got a bug -> even if you set radius units to km the geo-search is performed in miles\r\n * Since the UI is in km before each api call the radius is transformed from km to miles\r\n */\r\nconst kmToMiles = km => km / 1.609;\r\n\r\nexport const getPhotosByTitle = searchParams => {\r\n  /* This will ask flicker to fetch all photos (that have geolocation)\r\n    that contain the markers location title in any way (tag, image name, album name etc)\r\n    the photos returned will be within a 31km radius from the markers position\r\n    the func returns an array of photos details (id,farm,server etc)\r\n  */\r\n\r\n  console.log(searchParams);\r\n  //will be appended to response\r\n  let query;\r\n\r\n  let url = new URLSearchParams();\r\n  url.append(\"method\", \"flickr.photos.search\");\r\n  url.append(\"api_key\", \"f6536bb373bca1fcd14d4da1281f2839\");\r\n  // url.append('tags', marker.title); //text produces broader results than tags leave it for now may implement later\r\n  if (searchParams.searchText) url.append(\"text\", searchParams.searchText);\r\n  if (searchParams.sortMethod) url.append(\"sort\", searchParams.sortMethod);\r\n  if (searchParams.minUploadDate) {\r\n    url.append(\"min_upload_date\", searchParams.minUploadDate);\r\n  }\r\n  if (searchParams.maxUploadDate) {\r\n    url.append(\"max_upload_date\", searchParams.maxUploadDate);\r\n  }\r\n  if (searchParams.minTakenDate) {\r\n    url.append(\"min_taken_date\", searchParams.minTakenDate);\r\n  }\r\n  if (searchParams.maxTakenDate) {\r\n    url.append(\"max_taken_date\", searchParams.maxTakenDate);\r\n  }\r\n  if (searchParams.searchMethod === \"EXTENTS\") {\r\n    const { south, west, north, east } = searchParams.bounds;\r\n    query = {\r\n      searchMethod: searchParams.searchMethod,\r\n      bounds: searchParams.bounds\r\n      // south,\r\n      // west,\r\n      // north,\r\n      // east\r\n    };\r\n    url.append(\"bbox\", `${west},${south},${east},${north}`);\r\n  }\r\n  if (searchParams.searchMethod === \"CIRCLE\") {\r\n    url.append(\"lat\", searchParams.lat);\r\n    url.append(\"lon\", searchParams.lng);\r\n    url.append(\"radius\", kmToMiles(searchParams.radius)); //1 to 32 km\r\n    url.append(\"radius_units\", \"km\");\r\n    query = {\r\n      searchMethod: \"CIRCLE\",\r\n      lat: searchParams.lat,\r\n      lng: searchParams.lng,\r\n      radius: searchParams.radius\r\n    };\r\n  }\r\n\r\n  url.append(\"has_geo\", \"1\");\r\n  url.append(\r\n    \"per_page\",\r\n    searchParams.resultsPerPage ? searchParams.resultsPerPage : \"50\"\r\n  ); //250max for photos with geolocation\r\n  url.append(\"format\", \"json\");\r\n  url.append(\"nojsoncallback\", \"1\");\r\n  url.append(\r\n    \"extras\",\r\n    \"url_t,url_m,url_c,url_l,url_h,url_o,geo, date_upload, date_taken, owner_name\"\r\n  );\r\n  if (searchParams.page) url.append(\"page\", searchParams.page);\r\n\r\n  let arrayOfPhotos = fetch(\"https://api.flickr.com/services/rest/?\" + url)\r\n    .then(res => {\r\n      console.log(url);\r\n      return res.json().then(json => {\r\n        console.log(json);\r\n        // const test = {\r\n        //   ...json.photos,\r\n        //   photo: json.photos.photo.map(img => {\r\n        //     return {\r\n        //       ...img,\r\n        //       width_c: parseInt(img.width_c),\r\n        //       width_h: parseInt(img.width_h),\r\n        //       width_l: parseInt(img.width_l),\r\n        //       width_m: parseInt(img.width_m),\r\n        //       height_c: parseInt(img.height_c),\r\n        //       height_h: parseInt(img.height_h),\r\n        //       height_l: parseInt(img.height_l),\r\n        //       height_m: parseInt(img.height_m),\r\n        //       src: img.url_m, //flickr doesn't guarantee all sizes but medium will always be there\r\n        //       height: parseInt(img.height_m),\r\n        //       width: parseInt(img.width_m),\r\n        //       title: img.title,\r\n        //       alt: img.title,\r\n        //       key: img.id,\r\n        //       srcSet: [\r\n        //         `${img.url_m} ${img.width_m}w`,\r\n        //         `${img.url_c} ${img.width_c}w`,\r\n        //         `${img.url_l} ${img.width_l}w`,\r\n        //         `${img.url_h} ${img.width_h}w`\r\n        //       ],\r\n        //       sizes:\r\n        //         \"(min-width: 480px) 50vw, (min-width: 1024px) 33.3vw, 100vw\"\r\n        //     };\r\n        //   })\r\n        // };\r\n        // console.log(test);\r\n        return {\r\n          ...query,\r\n          currentPage: json.photos.page,\r\n          totalPages: json.photos.pages,\r\n          totalPhotos: json.photos.total,\r\n          perPage: json.photos.perpage,\r\n          photos: json.photos.photo.map(img => {\r\n            return {\r\n              // ...img,\r\n              dateupload: img.dateupload,\r\n              datetaken: img.datetaken,\r\n              ownername: img.ownername,\r\n              geolocation: {\r\n                lat: parseFloat(img.latitude),\r\n                lng: parseFloat(img.longitude)\r\n              },\r\n              photoId: img.id,\r\n              width_t: img.width_t ? parseInt(img.width_t) : \"\",\r\n              width_c: img.width_c ? parseInt(img.width_c) : \"\",\r\n              width_h: img.width_h ? parseInt(img.width_h) : \"\",\r\n              width_l: img.width_l ? parseInt(img.width_l) : \"\",\r\n              width_m: img.width_m ? parseInt(img.width_m) : \"\",\r\n              width_o: img.width_o ? parseInt(img.width_o) : \"\",\r\n              height_c: img.height_c ? parseInt(img.height_c) : \"\",\r\n              height_h: img.height_h ? parseInt(img.height_h) : \"\",\r\n              height_l: img.height_l ? parseInt(img.height_l) : \"\",\r\n              height_m: img.height_m ? parseInt(img.height_m) : \"\",\r\n              height_o: img.height_o ? parseInt(img.height_o) : \"\",\r\n              /* since you cant predict in what size will the photo be availiable:\r\n              if medium size is availiable use it if not get the original size\r\n              as fallback give the image 100px width and height */\r\n              height: img.height_m\r\n                ? parseInt(img.height_m)\r\n                : img.height_o\r\n                ? parseInt(img.height_o)\r\n                : 100,\r\n              width: img.width_m\r\n                ? parseInt(img.width_m)\r\n                : img.width_o\r\n                ? parseInt(img.width_o)\r\n                : 100,\r\n              src: img.url_l ? img.url_l : img.url_m ? img.url_m : img.url_o,\r\n              title: img.title,\r\n              alt: img.title,\r\n              key: img.id,\r\n              owner: img.owner,\r\n              thumb: img.url_t,\r\n              srcSet: [\r\n                img.url_m ? `${img.url_m} ${img.width_m}w` : \"\",\r\n                img.url_c ? `${img.url_c} ${img.width_c}w` : \"\",\r\n                img.url_l ? `${img.url_l} ${img.width_l}w` : \"\",\r\n                img.url_h ? `${img.url_h} ${img.width_h}w` : \"\",\r\n                img.url_o ? `${img.url_o} ${img.width_o}w` : \"\"\r\n              ],\r\n              sizes:\r\n                \"(min-width: 480px) 50vw, (min-width: 1024px) 33.3vw, 100vw\"\r\n            };\r\n          })\r\n        };\r\n      });\r\n    })\r\n    .catch(err => {\r\n      console.log(err);\r\n      return [\"error\"];\r\n    });\r\n\r\n  return arrayOfPhotos;\r\n};\r\n\r\nexport const flickrUrlConstructor = array => {\r\n  /* This takes the array of photo information from the getPhotosByTitle() \r\n  and transforms each photo to a straightforward url*/\r\n\r\n  let urlArr = {\r\n    default: [],\r\n    thumbNail: [], //t\r\n    medium: [], //c\r\n    large: [], //b\r\n    title: []\r\n  };\r\n  if (array[0] !== \"error\") {\r\n    for (let i = 0; i < array.length; i++) {\r\n      urlArr.default.push([\r\n        `https://farm${array[i].farm}.staticflickr.com/${array[i].server}/${array[i].id}_${array[i].secret}.jpg`,\r\n        array[i].id,\r\n        [array[i].title][0],\r\n        array[i].owner\r\n      ]);\r\n      urlArr.thumbNail.push([\r\n        `https://farm${array[i].farm}.staticflickr.com/${array[i].server}/${array[i].id}_${array[i].secret}_t.jpg`,\r\n        array[i].id,\r\n        [array[i].title][0]\r\n      ]);\r\n      urlArr.medium.push([\r\n        `https://farm${array[i].farm}.staticflickr.com/${array[i].server}/${array[i].id}_${array[i].secret}_c.jpg`,\r\n        array[i].id,\r\n        [array[i].title][0]\r\n      ]);\r\n      urlArr.large.push([\r\n        `https://farm${array[i].farm}.staticflickr.com/${array[i].server}/${array[i].id}_${array[i].secret}_b.jpg`,\r\n        array[i].id,\r\n        [array[i].title][0]\r\n      ]);\r\n      urlArr.title.push([array[i].title]);\r\n    }\r\n  } else {\r\n    urlArr = {\r\n      error: true,\r\n      default: [\"no-preview128px.png\"],\r\n      thumbNail: [\"no-preview128px.png\"], //t\r\n      medium: [\"no-preview128px.png\"], //c\r\n      large: [\"no-preview128px.png\"] //b\r\n    };\r\n  }\r\n  return urlArr;\r\n};\r\n\r\nexport const getPhotoGeoLocation = photo_id => {\r\n  /* This flicker api call returns a set of coordinates for a given photo\r\n    (Since there are no means to get the coordinates of a batch of photos)\r\n    this method must be called EACH TIME a new photograph marker is to be plotted on the map\r\n  */\r\n  let url = new URLSearchParams();\r\n  url.append(\"method\", \"flickr.photos.geo.getLocation\");\r\n  url.append(\"api_key\", \"f6536bb373bca1fcd14d4da1281f2839\");\r\n  url.append(\"format\", \"json\");\r\n  url.append(\"nojsoncallback\", \"1\");\r\n  url.append(\"photo_id\", photo_id);\r\n\r\n  let result = fetch(\"https://api.flickr.com/services/rest?\" + url)\r\n    .then(res => {\r\n      return res.json().then(json => {\r\n        console.log(json);\r\n        let position = {\r\n          lat: parseFloat(json.photo.location.latitude),\r\n          lng: parseFloat(json.photo.location.longitude)\r\n        };\r\n        return position;\r\n      });\r\n    })\r\n    .catch(err => {\r\n      console.log(err);\r\n      return [\"error\"];\r\n    });\r\n\r\n  return result;\r\n};\r\n","import React from \"react\";\r\n\r\nimport heartMarker from \"../../assets/loveinterestDark.png\";\r\nimport photoMarker from \"../../assets/photoDark_Blue.png\";\r\n\r\nconst infoWindowContents = data => {\r\n  return `\r\n  <h1 style=\"font-size:1rem;text-align:center;\"> ${\r\n    data.title ? data.title : \"untitled photo\"\r\n  } </h1>\r\n  <img title=\"${\r\n    data.title ? data.title : \"untitled photo\"\r\n  }\" style=\"margin: 0 auto;display: block;cursor:pointer;\" \r\n    src=${data.thumb} alt=\"${data.title}\">\r\n  <a \r\n    title=\"open photo in flickr\"\r\n    style=\"background-color: #3f51b5;\r\n    width: ${data.width_t}px;\r\n    color: white;\r\n    padding: 4px 5px;\r\n    text-align: center;\r\n    text-decoration: none;\r\n    display: inline-block;\r\n    text-align: center;\r\n    margin: 0 auto 0.5rem ;\r\n    display: block;\" \r\n    href=https://www.flickr.com/photos/${data.owner}/${data.photoId}\r\n    target=\"_blank\">View in flickr\r\n  </a>\r\n  `;\r\n};\r\n\r\n/*When the Map component mounts the following happen:\r\n * the google maps callback is 'tied' to the window obj (componentDidMount())\r\n * a script with the google maps api is created and inserted at the bottom of the body (createGoogleApiScript)\r\n * the callback func fires (initMap) and initializes google maps\r\n * then initMap creates the default markers (addDefaultMarkers) and the default infowindow\r\n *** At this point the App is ready for user interaction\r\n */\r\n\r\nconst mapStyle = {\r\n  width: \"100vw\",\r\n  // height: \"75vh\",\r\n  border: \"1px solid black\",\r\n  maxWidth: \"100%\",\r\n  boxSizing: \"border-box\",\r\n  minHeight: \"75vh\",\r\n  maxHeight: \"100%\"\r\n};\r\nclass Map extends React.Component {\r\n  state = {\r\n    boundingBox: null,\r\n    selectionMarker: null,\r\n    photoMarkers: [],\r\n    favorites: []\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.initMap = this.initMap;\r\n    this.handleGoogleMapsError();\r\n    this.createGoogleApiScript(this.state.userLocation);\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    console.log(this.props);\r\n    /**SET RADIUS IF IT CHANGED */\r\n    if (prevProps.searchRadius !== this.props.searchRadius) {\r\n      this.searchCircle.setRadius(this.props.searchRadius * 1000);\r\n    }\r\n    console.log(\"map updated\");\r\n\r\n    if (prevProps.photos !== this.props.photos) {\r\n      console.log(\"PHOTOS CHANGED - RERENDERING MARKERS\");\r\n      let photos = this.props.photos;\r\n      this.state.photoMarkers.forEach(pin => pin.setMap(null));\r\n      this.setState({ photoMarkers: [] });\r\n\r\n      photos.forEach(photo => {\r\n        return this.createPhotoMarker(photo, this.props.displayPhotoMarkers);\r\n      });\r\n    } else {\r\n      console.log(\"PHOTOS DID NOT CHANGE - NO RERENDER FOR MARKERS\");\r\n    }\r\n\r\n    if (prevProps.favorites !== this.props.favorites) {\r\n      console.log(\"if prevProps favorites....\");\r\n      this.hideAllFavorites();\r\n      this.setState({ favorites: [] });\r\n      const showFavorites = this.props.displayFavorites;\r\n      this.props.favorites.forEach(f => this.pinFavorite(f, showFavorites));\r\n    }\r\n\r\n    if (prevProps.displayPhotoMarkers !== this.props.displayPhotoMarkers) {\r\n      console.log(\"SHOW/HIDE PHOTOMARKERS\");\r\n      this.props.displayPhotoMarkers\r\n        ? this.showAllPhotoMarkers()\r\n        : this.hideAllPhotoMarkers();\r\n    }\r\n\r\n    if (prevProps.displayFavorites !== this.props.displayFavorites) {\r\n      console.log(\"SHOW/HIDE PHOTOMARKERS\");\r\n      this.props.displayFavorites\r\n        ? this.showAllFavorites()\r\n        : this.hideAllFavorites();\r\n    }\r\n\r\n    // if (prevProps.userLocation !== this.props.userLocation) {\r\n    //   /**  even though the component has mounted and is currently in re-render(update) phase\r\n    //    * window.map can be undefined (especially on first load where google.maps api is not cached and is not fully initialized)\r\n    //    * so there is a slim chance that window.map.panTo will run before google.maps is fully loaded thus trowing an error\r\n    //    * mapReady() checks if google.maps is loaded before trying to zoom  to the users location\r\n    //    * each time the check results to false it retries after 10ms, when the waitingTrheshold (3seconds) runs out it gives up\r\n    //    * (at this point google maps probably failed for some other reason, like network error, or auth problems...)\r\n    //    */\r\n    //   let waitingThreshold = 3000; //max number of milliseconds to wait for google.maps to initialize\r\n    //   const mapReady = () => {\r\n    //     if (waitingThreshold <= 0) {\r\n    //       stopTimer();\r\n    //     }\r\n    //     if (window.map) {\r\n    //       window.map.panTo(this.props.userLocation);\r\n    //       // this.addSearchCircle(this.props.userLocation);\r\n    //       window.map.setZoom(16);\r\n    //       stopTimer();\r\n    //     } else {\r\n    //       waitingThreshold -= 10;\r\n    //     }\r\n    //   };\r\n    //   const timer = setInterval(mapReady, 10);\r\n    //   const stopTimer = () => clearInterval(timer);\r\n    // }\r\n\r\n    // if (this.props.triggerMapExtents) {\r\n    //   window.\r\n    //   this.props.disableMapExtentsTrigger();\r\n    // }\r\n\r\n    if (this.props.triggerPhotoMarker) {\r\n      this.createPhotoMarker(\r\n        this.props.triggerPhotoMarker,\r\n        this.props.displayPhotoMarkers\r\n      );\r\n      this.props.disableTriggerPhotoMarker();\r\n    }\r\n\r\n    if (this.props.triggerCenter) {\r\n      this.searchCircle.setCenter(window.map.getCenter().toJSON());\r\n      this.props.disableCenter();\r\n    }\r\n\r\n    if (this.props.triggerZoom) {\r\n      this.zoomToBounds();\r\n      this.props.disableZoom();\r\n    }\r\n\r\n    // if (this.props.triggerBoundingBox) {\r\n    //   this.addPolygon();\r\n    //   this.props.disableBoundingBoxTrigger();\r\n    // }\r\n  }\r\n\r\n  handleGoogleMapsError = () => {\r\n    /* google maps method for handling authentication errors\r\n     * more on: https://developers.google.com/maps/documentation/javascript/events#auth-errors*/\r\n    window.gm_authFailure = () => {\r\n      this.props.handleGoogleMapsError();\r\n      document.querySelector(\".gm-err-title\").innerHTML =\r\n        \"Oops it seems there was a problem loading Google Maps!\";\r\n      document.querySelector(\".gm-err-message\").innerHTML =\r\n        \"Failed to authenticate Google Maps, please try again later\";\r\n    };\r\n  };\r\n\r\n  createGoogleApiScript = userLocation => {\r\n    let body = window.document.querySelector(\"body\");\r\n    let script = window.document.createElement(\"script\");\r\n    script.src =\r\n      \"https://maps.googleapis.com/maps/api/js?key=AIzaSyCzs3fKNRPknPJs8LaW9rsCvBxeY2QCJhg&v=3&callback=initMap\";\r\n    script.async = true;\r\n    script.defer = true;\r\n    script.onerror = function() {\r\n      document.write(\"Error Loading Google Maps...\");\r\n    };\r\n    body.insertBefore(script, body.lastElementChild);\r\n  };\r\n\r\n  initMap = () => {\r\n    console.log(\"Google Maps API Loaded...\");\r\n    // const rome = {\r\n    //   lat: 41.890384586382844,\r\n    //   lng: 12.492241690388028\r\n    // }; //Rome, colosseo\r\n    const europe = { lat: 47.55241106676634, lng: 11.389968539500511 };\r\n\r\n    window.map = new window.google.maps.Map(\r\n      document.getElementById(\"map-container\"),\r\n      {\r\n        center: europe,\r\n        zoom: 5,\r\n        gestureHandling: \"cooperative\",\r\n        mapTypeId: window.google.maps.MapTypeId.TERRAIN,\r\n        streetViewControl: false,\r\n        fullscreenControl: false\r\n      }\r\n    );\r\n    window.largeInfowindow = new window.google.maps.InfoWindow({\r\n      maxWidth: 200\r\n    });\r\n\r\n    // this.addSearchCircle(rome);\r\n\r\n    window.google.maps.event.addListenerOnce(window.map, \"idle\", () => {\r\n      document.getElementsByTagName(\"iframe\")[0].title = \"Google Maps\";\r\n      /* https://stackoverflow.com/questions/49012240/google-maps-js-iframe-title \r\n            used to pass the (false possitive) accessibility audits */\r\n    });\r\n  };\r\n\r\n  /*** ADDING POLYGON + add marker*/\r\n  addPolygon = () => {\r\n    const centerXY = window.map.center.toJSON();\r\n    /** fixed size roughly 2x2 km box  **/\r\n    // const km = 0.009;\r\n    // const boundsStatic = {\r\n    //   north: centerXY.lat + km,\r\n    //   south: centerXY.lat - km,\r\n    //   east: centerXY.lng + km,\r\n    //   west: centerXY.lng - km\r\n    // };\r\n\r\n    /** dyniamic based on zoom level roughly 25% of map width/height  **/\r\n    if (this.state.boundingBox) {\r\n      this.removePolygon();\r\n      this.props.setBounds(null);\r\n      // this.setState({ polygon: null });\r\n    } else {\r\n      const zoomBounds = window.map.getBounds().toJSON();\r\n      const northSouth = (zoomBounds.north - zoomBounds.south) / 5;\r\n      const eastWest = (zoomBounds.east - zoomBounds.west) / 5;\r\n      const boundsDynamic = {\r\n        north: centerXY.lat + northSouth,\r\n        south: centerXY.lat - northSouth,\r\n        east: centerXY.lng + eastWest,\r\n        west: centerXY.lng - eastWest\r\n      };\r\n      //if there is a polygon /or a marker on the screen remove it\r\n      this.removePolygon();\r\n      this.removeMarker();\r\n      // Define a rectangle and set its editable property to true.\r\n      this.rectangle = new window.google.maps.Rectangle({\r\n        bounds: boundsDynamic,\r\n        editable: true,\r\n        draggable: true\r\n      });\r\n      this.rectangle.setMap(window.map);\r\n      this.props.getRadiusMarkerCoordinates(null);\r\n      this.props.setBounds(boundsDynamic);\r\n      this.rectangle.addListener(\"bounds_changed\", () =>\r\n        this.props.setBounds(this.rectangle.bounds.toJSON())\r\n      );\r\n      this.setState({ boundingBox: this.rectangle });\r\n      window.polygon = this.rectangle;\r\n    }\r\n  };\r\n\r\n  removePolygon = () => {\r\n    if (this.state.boundingBox) {\r\n      this.state.boundingBox.setMap(null);\r\n      this.setState({ boundingBox: null });\r\n    }\r\n  };\r\n\r\n  createPhotoMarker = (pin, show) => {\r\n    let marker = new window.google.maps.Marker({\r\n      position: pin.geolocation,\r\n      map: show ? window.map : null,\r\n      icon: photoMarker,\r\n      scaledSize: 0.5,\r\n      title: pin.title,\r\n      animation: window.google.maps.Animation.DROP,\r\n      photoId: pin.photoId,\r\n      color: \"blue\"\r\n    });\r\n\r\n    window.SETIMG = () => window.LASTMARKER.setIcon(heartMarker);\r\n    window.RESET = () => {\r\n      this.state.photoMarkers.forEach(pin => pin.setMap(null));\r\n      this.setState({ photoMarkers: [] });\r\n    };\r\n\r\n    this.setState(prevState => {\r\n      const pins = prevState.photoMarkers;\r\n      pins.push(marker);\r\n      return { photoMarkers: pins };\r\n    });\r\n\r\n    marker.addListener(\"click\", function() {\r\n      window.map.panTo(this.getPosition());\r\n      // window.largeInfowindow.setContent(\"test\");\r\n      window.largeInfowindow.setContent(infoWindowContents(pin));\r\n\r\n      // window.map.setZoom(14);\r\n      // window.map.openInfoWindow(marker, window.largeInfowindow);\r\n      window.largeInfowindow.open(window.map, marker);\r\n      // toggleBounce();\r\n    });\r\n    window.photoMarker = marker;\r\n\r\n    // marker.addListener('click', function() {\r\n    //   infowindow.open(map, marker);\r\n    // });\r\n  };\r\n\r\n  showAllPhotoMarkers = () => {\r\n    const map = window.map;\r\n    const markers = this.state.photoMarkers;\r\n    for (let i = 0; i < markers.length; i++) {\r\n      markers[i].setMap(map);\r\n    }\r\n  };\r\n\r\n  hideAllPhotoMarkers = () => {\r\n    const markers = this.state.photoMarkers;\r\n    for (let i = 0; i < markers.length; i++) {\r\n      markers[i].setMap(null);\r\n    }\r\n  };\r\n\r\n  showAllFavorites = () => {\r\n    const map = window.map;\r\n    const markers = this.state.favorites;\r\n    for (let i = 0; i < markers.length; i++) {\r\n      markers[i].setMap(map);\r\n    }\r\n  };\r\n\r\n  hideAllFavorites = () => {\r\n    const markers = this.state.favorites;\r\n    for (let i = 0; i < markers.length; i++) {\r\n      markers[i].setMap(null);\r\n    }\r\n  };\r\n\r\n  pinFavorite = (img, show) => {\r\n    let marker = new window.google.maps.Marker({\r\n      position: img.geolocation,\r\n      map: show ? window.map : null,\r\n      icon: heartMarker,\r\n      title: img.title,\r\n      animation: window.google.maps.Animation.DROP,\r\n      photoId: img.photoId,\r\n      favorite: true\r\n    });\r\n\r\n    this.setState(prevState => {\r\n      const favorites = prevState.favorites;\r\n      favorites.push(marker);\r\n      return { favorites: favorites };\r\n    });\r\n\r\n    marker.addListener(\"click\", function() {\r\n      window.map.panTo(this.getPosition());\r\n      window.largeInfowindow.setContent(infoWindowContents(img));\r\n      window.largeInfowindow.open(window.map, marker);\r\n    });\r\n  };\r\n\r\n  addSearchCircle = center => {\r\n    this.searchCircle = new window.google.maps.Circle({\r\n      strokeColor: \"#0e2a99\",\r\n      strokeOpacity: 0.8,\r\n      strokeWeight: 2,\r\n      fillColor: \"#64b1e8\",\r\n      fillOpacity: 0.35,\r\n      map: window.map,\r\n      center: center ? center : { lat: 48.8, lng: 2.29 },\r\n      radius: this.props.searchRadius * 1000, //radius in store is in KM radius in maps is meters\r\n      draggable: true\r\n    });\r\n    window.SEARCHRADIUS = this.searchCircle; //DEBUGGING ONLY\r\n\r\n    /** a circle bound to the center of searchCircle,\r\n     * its only purpose is to graphically represent searchCircle's center */\r\n    this.centerSearchCircle = new window.google.maps.Circle({\r\n      strokeColor: \"#0e0047\",\r\n      strokeOpacity: 0.8,\r\n      strokeWeight: 3,\r\n      fillColor: \"#0e0047\",\r\n      fillOpacity: 0.35,\r\n      map: window.map,\r\n      center: this.searchCircle.center.toJSON(),\r\n      radius: 10\r\n    });\r\n\r\n    // window.testCENTER = this.centerSearchRadius;\r\n\r\n    this.searchCircle.addListener(\"drag\", () => {\r\n      this.centerSearchCircle.setCenter(this.searchCircle.center.toJSON());\r\n      // console.log(this.searchRadius.center.toJSON());\r\n    });\r\n\r\n    this.searchCircle.addListener(\"dragend\", () => {\r\n      this.props.setSearchCenter(this.searchCircle.center.toJSON());\r\n    });\r\n    this.searchCircle.addListener(\"center_changed\", () => {\r\n      this.props.setSearchCenter(this.searchCircle.center.toJSON());\r\n      this.centerSearchCircle.setCenter(this.searchCircle.center.toJSON());\r\n    });\r\n  };\r\n\r\n  zoomToBounds = () => {\r\n    const km = 0.009; //roughtly one km in degrees of lat/lng\r\n    const center = this.searchCircle.getCenter().toJSON();\r\n    const bounds = {\r\n      north: center.lat + km * this.props.searchRadius,\r\n      south: center.lat - km * this.props.searchRadius,\r\n      east: center.lng + km * this.props.searchRadius,\r\n      west: center.lng - km * this.props.searchRadius\r\n    };\r\n    console.log(bounds);\r\n    window.map.fitBounds(bounds);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        role=\"application\"\r\n        aria-label=\"Map\"\r\n        id=\"map-container\"\r\n        style={\r\n          this.props.screenWidth900px\r\n            ? mapStyle\r\n            : {\r\n                ...mapStyle,\r\n                minHeight: \"50vh\",\r\n                flexGrow: \"1\"\r\n              }\r\n        }\r\n      ></div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default React.memo(Map);\r\n","import React from \"react\";\r\n\r\nconst StateContext = React.createContext();\r\n\r\nexport default StateContext;\r\n","import React from \"react\";\r\n\r\nconst DispatchContext = React.createContext();\r\n\r\nexport default DispatchContext;\r\n","import { find as _find, findIndex as _findIndex } from \"lodash\";\r\nexport const SET_BOUNDING_BOX = \"SET_BOUNDING_BOX\";\r\n// export const SET_RADIUS_MARKER = \"SET_RADIUS_MARKER\";\r\n\r\nexport const SET_MAX_RESULTS_PER_PAGE = \"SET_MAX_RESULTS_PER_PAGE\";\r\nexport const SET_USER_LOCATION = \"SET_USER_LOCATION\";\r\nexport const SET_SEARCH_RADIUS = \"SET_SEARCH_RADIUS\";\r\nexport const SET_SEARCH_CENTER = \"SET_SEARCH_CENTER\";\r\nexport const SET_PHOTOS = \"SET_PHOTOS\";\r\nexport const UPDATE_PHOTOS = \"UPDATE_PHOTOS\";\r\nexport const BLOCK_USER = \"BLOCK_USER\";\r\nexport const ADD_IMG_TO_FAVORITES = \"ADD_IMG_TO_FAVORITES\";\r\nexport const REMOVE_IMG_FROM_FAVORITES = \"REMOVE_IMG_FROM_FAVORITES\";\r\nexport const SET_MIN_UPLOAD_DATE = \"SET_MIN_UPLOAD_DATE\";\r\nexport const SET_MAX_UPLOAD_DATE = \"SET_MAX_UPLOAD_DATE\";\r\nexport const SET_MIN_TAKEN_DATE = \"SET_MIN_TAKEN_DATE\";\r\nexport const SET_MAX_TAKEN_DATE = \"SET_MAX_TAKEN_DATE\";\r\n\r\nconst setBoundingBox = (action, state) => {\r\n  return { ...state, boundingBox: action.boundingBox };\r\n};\r\n\r\n// const setRadiusMarker = (action, state) => {\r\n//   return { ...state, radiusMarker: action.radiusMarker };\r\n// };\r\n\r\nconst setResultsPerPage = (action, state) => {\r\n  return {\r\n    ...state,\r\n    resultsPerPage: action.resultsPerPage\r\n  };\r\n};\r\n\r\nconst setUserLocation = (action, state) => {\r\n  return {\r\n    ...state,\r\n    userLocation: action.userLocation,\r\n    searchCenter: action.userLocation\r\n  };\r\n};\r\n\r\nconst setSearchRadius = (action, state) => {\r\n  return { ...state, searchRadius: action.searchRadius };\r\n};\r\n\r\nconst setSearchCenter = (action, state) => {\r\n  return { ...state, searchCenter: action.searchCenter };\r\n};\r\n\r\nconst setPhotos = (action, state) => {\r\n  /* currently setPhotos resets blocked users (initial request) */\r\n  const filteredPhotos = action.photos;\r\n  let mapPhotos = action.photos;\r\n  /** filter out any favorite photos so there are no duplicate markers  */\r\n  if (state.favorites.length > 0) {\r\n    mapPhotos = mapPhotos.filter(img => {\r\n      if (_find(state.favorites, el => el.photoId === img.photoId)) {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    });\r\n\r\n    console.log(mapPhotos);\r\n  }\r\n\r\n  return {\r\n    ...state,\r\n    photos: action.photos,\r\n    filteredPhotos,\r\n    blockedUsers: [],\r\n    hiddenPhotos: [],\r\n    mapPhotos\r\n  };\r\n};\r\n\r\nconst updatePhotos = (action, state) => {\r\n  /** updatePhotos will expand the previous query of photos (previous results + new results) */\r\n  /**One for each sounds better... if true go to newFiltered if false go to newHidden */\r\n  const newPhotosFiltered = action.photos.filter(\r\n    photo => !state.blockedUsers.includes(photo.owner)\r\n  );\r\n  const newHiddenPhotos = action.photos.filter(photo =>\r\n    state.blockedUsers.includes(photo.owner)\r\n  );\r\n  const filteredPhotos = state.filteredPhotos.concat(newPhotosFiltered);\r\n\r\n  let mapPhotos = state.mapPhotos;\r\n  let newMapPhotos = [...action.photos];\r\n  if (state.favorites.length > 0) {\r\n    newMapPhotos = newMapPhotos.filter(img => {\r\n      if (_find(state.favorites, el => el.photoId === img.photoId)) {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    });\r\n  }\r\n\r\n  mapPhotos = mapPhotos.concat(newMapPhotos);\r\n  const hiddenPhotos = state.hiddenPhotos.concat(newHiddenPhotos);\r\n  const photos = state.photos.concat(action.photos);\r\n\r\n  return { ...state, photos, filteredPhotos, hiddenPhotos, mapPhotos };\r\n};\r\n\r\nconst blockUser = (action, state) => {\r\n  const updatedBlockedUsers = state.blockedUsers.concat(action.userId);\r\n  // const filteredPhotos = state.filteredPhotos.concat(newPhotosFiltered);\r\n  const filteredPhotos = state.filteredPhotos.filter(\r\n    photo => !updatedBlockedUsers.includes(photo.owner)\r\n  );\r\n  const hiddenPhotos = state.photos.filter(photo =>\r\n    updatedBlockedUsers.includes(photo.owner)\r\n  );\r\n  return {\r\n    ...state,\r\n    blockedUsers: updatedBlockedUsers,\r\n    filteredPhotos,\r\n    hiddenPhotos\r\n  };\r\n};\r\n\r\nconst addImgToFavorites = (action, state) => {\r\n  const favorites = state.favorites.concat(action.image);\r\n  let mapPhotos = state.mapPhotos;\r\n  if (favorites.length > 0) {\r\n    mapPhotos = mapPhotos.filter(img => {\r\n      if (_find(favorites, el => el.photoId === img.photoId)) {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    });\r\n    console.log(mapPhotos);\r\n  }\r\n  return { ...state, favorites, mapPhotos };\r\n};\r\n\r\nconst removeImgFromFavorites = (action, state) => {\r\n  const favorites = [...state.favorites];\r\n  const isInCurrentResults = _find(state.photos, action.image) ? true : false;\r\n  const mapPhotos = isInCurrentResults\r\n    ? state.mapPhotos.concat(action.image)\r\n    : state.mapPhotos;\r\n\r\n  const index = _findIndex(favorites, function(o) {\r\n    return o.photoId === action.image.photoId;\r\n  });\r\n\r\n  if (index !== -1) favorites.splice(index, 1);\r\n  return { ...state, favorites, mapPhotos };\r\n};\r\n\r\nconst setMinUploadDate = (action, state) => {\r\n  return { ...state, minUploadDate: action.minUploadDate };\r\n};\r\n\r\nconst setMaxUploadDate = (action, state) => {\r\n  return { ...state, maxUploadDate: action.maxUploadDate };\r\n};\r\n\r\nconst setMinTakenDate = (action, state) => {\r\n  return { ...state, minTakenDate: action.minTakenDate };\r\n};\r\n\r\nconst setMaxTakenDate = (action, state) => {\r\n  return { ...state, maxTakenDate: action.maxTakenDate };\r\n};\r\n\r\nexport const rootReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case SET_BOUNDING_BOX:\r\n      console.log(action.type);\r\n      return setBoundingBox(action, state);\r\n    // case SET_RADIUS_MARKER:\r\n    //   console.log(action.type);\r\n    //   return setRadiusMarker(action, state);\r\n    //new ones\r\n\r\n    case SET_MAX_RESULTS_PER_PAGE:\r\n      console.log(action.type);\r\n      return setResultsPerPage(action, state);\r\n    case SET_USER_LOCATION:\r\n      console.log(action.type);\r\n      return setUserLocation(action, state);\r\n    case SET_SEARCH_RADIUS:\r\n      console.log(action.type);\r\n      return setSearchRadius(action, state);\r\n    case SET_SEARCH_CENTER:\r\n      console.log(action.type);\r\n      return setSearchCenter(action, state);\r\n    case SET_PHOTOS:\r\n      console.log(action.type);\r\n      return setPhotos(action, state);\r\n    case UPDATE_PHOTOS:\r\n      console.log(action.type);\r\n      return updatePhotos(action, state);\r\n    case BLOCK_USER:\r\n      console.log(action.type);\r\n      return blockUser(action, state);\r\n    case ADD_IMG_TO_FAVORITES:\r\n      console.log(action.type);\r\n      return addImgToFavorites(action, state);\r\n    case REMOVE_IMG_FROM_FAVORITES:\r\n      console.log(action.type);\r\n      return removeImgFromFavorites(action, state);\r\n    case SET_MIN_UPLOAD_DATE:\r\n      console.log(action.type);\r\n      return setMinUploadDate(action, state);\r\n    case SET_MAX_UPLOAD_DATE:\r\n      console.log(action.type);\r\n      return setMaxUploadDate(action, state);\r\n    case SET_MIN_TAKEN_DATE:\r\n      console.log(action.type);\r\n      return setMinTakenDate(action, state);\r\n    case SET_MAX_TAKEN_DATE:\r\n      console.log(action.type);\r\n      return setMaxTakenDate(action, state);\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default rootReducer;\r\n","import React from \"react\";\r\n\r\nconst Logo = props => (\r\n  <svg viewBox=\"0 0 448 448\" {...props}>\r\n    <circle cx={106.667} cy={127.973} r={106.667} fill=\"#2196f3\" />\r\n    <circle cx={341.333} cy={127.973} r={106.667} fill=\"#ec407a\" />\r\n    <g fill=\"#455a64\">\r\n      <path d=\"M32 426.64c-5.891 0-10.667-4.776-10.667-10.667V330.64c0-17.673 14.327-32 32-32H64c5.891 0 10.667 4.776 10.667 10.667S69.891 319.973 64 319.973H53.333c-5.891 0-10.667 4.776-10.667 10.667v85.333c.001 5.891-4.775 10.667-10.666 10.667z\" />\r\n      <path d=\"M64 362.64H10.667C4.776 362.64 0 357.864 0 351.973s4.776-10.667 10.667-10.667H64c5.891 0 10.667 4.776 10.667 10.667S69.891 362.64 64 362.64zM96 426.64c-5.891 0-10.667-4.776-10.667-10.667V309.306c0-5.891 4.776-10.667 10.667-10.667s10.667 4.776 10.667 10.667v106.667c0 5.891-4.776 10.667-10.667 10.667zM138.667 426.64c-5.891 0-10.667-4.776-10.667-10.667v-64c0-5.891 4.776-10.667 10.667-10.667s10.667 4.776 10.667 10.667v64c-.001 5.891-4.776 10.667-10.667 10.667zM213.333 426.64c-23.564 0-42.667-19.103-42.667-42.667s19.103-42.667 42.667-42.667a50.366 50.366 0 0140.384 14.72c3.652 4.624 2.864 11.334-1.76 14.987-4.624 3.652-11.334 2.865-14.987-1.76a33.21 33.21 0 00-23.637-6.613c-11.782 0-21.333 9.551-21.333 21.333 0 11.782 9.551 21.333 21.333 21.333a36.905 36.905 0 0024.576-7.659c4.234-3.978 10.873-3.836 14.933.32 4.066 4.148 4.066 10.786 0 14.933a56.658 56.658 0 01-39.509 13.74zM288 426.64c-5.891 0-10.667-4.776-10.667-10.667V309.306c0-5.891 4.776-10.667 10.667-10.667s10.667 4.776 10.667 10.667v106.667c0 5.891-4.776 10.667-10.667 10.667z\" />\r\n      <path d=\"M330.667 426.64a10.663 10.663 0 01-7.552-3.115l-42.667-42.667c-4.17-4.162-4.176-10.915-.014-15.085.499-.5 1.047-.95 1.636-1.342l32-21.333c4.901-3.27 11.525-1.947 14.795 2.955s1.947 11.525-2.955 14.795l-21.163 14.123 33.451 33.472c4.159 4.172 4.149 10.926-.024 15.085a10.672 10.672 0 01-7.507 3.112zM373.333 426.64c-5.891 0-10.667-4.776-10.667-10.667v-64c0-5.891 4.776-10.667 10.667-10.667S384 346.082 384 351.973v64c0 5.891-4.776 10.667-10.667 10.667z\" />\r\n      <path d=\"M373.333 405.306c-5.891 0-10.667-4.776-10.667-10.667 0-29.455 23.878-53.333 53.333-53.333 5.891 0 10.667 4.776 10.667 10.667s-4.776 10.667-10.667 10.667c-17.673 0-32 14.327-32 32 .001 5.891-4.775 10.666-10.666 10.666zM139.093 319.973c-5.891 0-10.667-4.776-10.667-10.667s4.776-10.667 10.667-10.667h.213c5.891 0 10.667 4.776 10.667 10.667s-4.776 10.667-10.667 10.667h-.213z\" />\r\n    </g>\r\n    <path d=\"M106.667 234.64C47.756 234.64 0 186.883 0 127.973S47.756 21.306 106.667 21.306s106.667 47.756 106.667 106.667c-.071 58.881-47.786 106.596-106.667 106.667zm0-192c-47.128 0-85.333 38.205-85.333 85.333s38.205 85.333 85.333 85.333S192 175.101 192 127.973 153.795 42.64 106.667 42.64zM341.333 234.64c-58.91 0-106.667-47.756-106.667-106.667S282.423 21.306 341.333 21.306 448 69.063 448 127.973c-.07 58.881-47.786 106.596-106.667 106.667zm0-192C294.205 42.64 256 80.845 256 127.973s38.205 85.333 85.333 85.333 85.333-38.205 85.333-85.333-38.204-85.333-85.333-85.333zM32 426.64c-5.891 0-10.667-4.776-10.667-10.667V330.64c0-17.673 14.327-32 32-32H64c5.891 0 10.667 4.776 10.667 10.667S69.891 319.973 64 319.973H53.333c-5.891 0-10.667 4.776-10.667 10.667v85.333c.001 5.891-4.775 10.667-10.666 10.667z\" />\r\n    <path d=\"M64 362.64H10.667C4.776 362.64 0 357.864 0 351.973s4.776-10.667 10.667-10.667H64c5.891 0 10.667 4.776 10.667 10.667S69.891 362.64 64 362.64zM96 426.64c-5.891 0-10.667-4.776-10.667-10.667V309.306c0-5.891 4.776-10.667 10.667-10.667s10.667 4.776 10.667 10.667v106.667c0 5.891-4.776 10.667-10.667 10.667zM138.667 426.64c-5.891 0-10.667-4.776-10.667-10.667v-64c0-5.891 4.776-10.667 10.667-10.667s10.667 4.776 10.667 10.667v64c-.001 5.891-4.776 10.667-10.667 10.667zM213.333 426.64c-23.564 0-42.667-19.103-42.667-42.667s19.103-42.667 42.667-42.667a50.39 50.39 0 0140.363 14.699c3.658 4.619 2.88 11.328-1.739 14.987-4.619 3.658-11.328 2.88-14.987-1.739a33.21 33.21 0 00-23.637-6.613c-11.782 0-21.333 9.551-21.333 21.333 0 11.782 9.551 21.333 21.333 21.333a36.93 36.93 0 0024.576-7.659c4.234-3.978 10.873-3.836 14.933.32 4.066 4.148 4.066 10.786 0 14.933a56.616 56.616 0 01-39.509 13.74zM288 426.64c-5.891 0-10.667-4.776-10.667-10.667V309.306c0-5.891 4.776-10.667 10.667-10.667s10.667 4.776 10.667 10.667v106.667c0 5.891-4.776 10.667-10.667 10.667z\" />\r\n    <path d=\"M330.667 426.64a10.663 10.663 0 01-7.552-3.115l-42.667-42.667c-4.17-4.162-4.176-10.915-.014-15.085.499-.5 1.047-.95 1.636-1.342l32-21.333c4.901-3.27 11.525-1.947 14.795 2.955s1.947 11.525-2.955 14.795l-21.184 14.123 33.472 33.472c4.159 4.172 4.149 10.926-.024 15.085a10.672 10.672 0 01-7.507 3.112zM373.333 426.64c-5.891 0-10.667-4.776-10.667-10.667v-64c0-5.891 4.776-10.667 10.667-10.667S384 346.082 384 351.973v64c0 5.891-4.776 10.667-10.667 10.667z\" />\r\n    <path d=\"M373.333 405.306c-5.891 0-10.667-4.776-10.667-10.667 0-29.455 23.878-53.333 53.333-53.333 5.891 0 10.667 4.776 10.667 10.667s-4.776 10.667-10.667 10.667c-17.673 0-32 14.327-32 32 .001 5.891-4.775 10.666-10.666 10.666zM139.093 319.973c-5.891 0-10.667-4.776-10.667-10.667 0-5.85 4.711-10.608 10.56-10.667h.213c5.891 0 10.667 4.776 10.667 10.667s-4.776 10.667-10.667 10.667h-.106z\" />\r\n  </svg>\r\n);\r\n\r\nexport default Logo;\r\n","import React, { useContext } from \"react\";\r\nimport { makeStyles, Input, Typography, Slider } from \"@material-ui/core/\";\r\nimport StateContext from \"../../context/stateContext\";\r\nimport DispatchContext from \"../../context/dispatchContext\";\r\nimport { SET_MAX_RESULTS_PER_PAGE } from \"../../context/rootReducer\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    display: \"flex\",\r\n    width: \"100%\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\"\r\n  },\r\n  input: {\r\n    marginLeft: \"1rem\",\r\n    marginBottom: \"1rem\",\r\n    maxWidth: \"4rem\"\r\n  }\r\n});\r\n\r\nexport default function RequestNumberSlider(props) {\r\n  const classes = useStyles();\r\n  const store = useContext(StateContext);\r\n  const dispatch = useContext(DispatchContext);\r\n\r\n  const handleSliderChange = (event, newValue) => {\r\n    dispatch({\r\n      type: SET_MAX_RESULTS_PER_PAGE,\r\n      resultsPerPage: newValue\r\n    });\r\n  };\r\n\r\n  const handleInputChange = event => {\r\n    let val = parseInt(event.target.value);\r\n    if (!Number.isNaN(val) && typeof val == \"number\") {\r\n      dispatch({\r\n        type: SET_MAX_RESULTS_PER_PAGE,\r\n        resultsPerPage: val\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleBlur = () => {\r\n    const value = store.resultsPerPage;\r\n    if (value <= 10) {\r\n      dispatch({\r\n        type: SET_MAX_RESULTS_PER_PAGE,\r\n        resultsPerPage: 10\r\n      });\r\n    } else if (value <= 250) {\r\n      dispatch({\r\n        type: SET_MAX_RESULTS_PER_PAGE,\r\n        resultsPerPage: Math.trunc(value / 10) * 10\r\n      });\r\n    } else if (value > 250) {\r\n      dispatch({\r\n        type: SET_MAX_RESULTS_PER_PAGE,\r\n        resultsPerPage: 250\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Typography align=\"center\" gutterBottom>\r\n        Number of photos to return per page\r\n      </Typography>\r\n\r\n      <div className={classes.root}>\r\n        <Slider\r\n          value={store.resultsPerPage}\r\n          onChange={handleSliderChange}\r\n          aria-labelledby=\"input-slider\"\r\n          step={10}\r\n          min={10}\r\n          max={250}\r\n          style={{ width: \"75%\", marginRight: \"0.5rem\", marginLeft: \"0.5rem\" }}\r\n        />\r\n        <Input\r\n          className={classes.input}\r\n          value={store.resultsPerPage}\r\n          type=\"number\"\r\n          margin=\"dense\"\r\n          onChange={handleInputChange}\r\n          onBlur={handleBlur}\r\n          inputProps={{\r\n            step: 10,\r\n            min: 10,\r\n            max: 250,\r\n            type: \"number\",\r\n            \"aria-labelledby\": \"input-slider\"\r\n          }}\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  InputLabel,\r\n  MenuItem,\r\n  FormHelperText,\r\n  FormControl,\r\n  Select,\r\n  makeStyles\r\n} from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  formControl: {\r\n    width: \"100%\"\r\n  },\r\n  root_select: {\r\n    textAlign: \"left\"\r\n  }\r\n}));\r\n\r\nexport default function SelectSortingMethod(props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <FormControl className={classes.formControl}>\r\n      <InputLabel htmlFor=\"sorting-helper\">Display results by:</InputLabel>\r\n      <Select\r\n        classes={{ root: classes.root_select }}\r\n        value={props.sortMethod}\r\n        onChange={props.handeSelectSortMethod}\r\n      >\r\n        <MenuItem value={\"date-posted-asc\"}>Date posted ascending</MenuItem>\r\n        <MenuItem value={\"date-posted-desc\"}>Date posted descending</MenuItem>\r\n        <MenuItem value={\"date-taken-asc\"}>Date taken ascending</MenuItem>\r\n        <MenuItem value={\"date-taken-desc\"}>Date taken descending</MenuItem>\r\n      </Select>\r\n      <FormHelperText>\r\n        Sorting filters must be set before photo search\r\n      </FormHelperText>\r\n    </FormControl>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  // TextField,\r\n  InputAdornment,\r\n  InputLabel,\r\n  Input,\r\n  IconButton,\r\n  FormControl,\r\n  FormHelperText\r\n} from \"@material-ui/core/\";\r\nimport { Close } from \"@material-ui/icons/\";\r\n\r\nexport default function TextQuery(props) {\r\n  const handleSubmit = e => {\r\n    e.preventDefault();\r\n    console.log(\"Submit!\");\r\n    props.searchFlikr();\r\n  };\r\n  return (\r\n    <>\r\n      {/* <form onSubmit={handleSubmit}>\r\n        <TextField\r\n          label=\"Optional text query\"\r\n          value={props.searchText}\r\n          onChange={props.handleTextQueryChange}\r\n          fullWidth\r\n          // className={classes.textField}\r\n          helperText=\"Adding text to the query will greatly limit the photos results\"\r\n          margin=\"normal\"\r\n          placeholder=\"text search in photos names,tags,albums\"\r\n        />\r\n      </form> */}\r\n\r\n      <form onSubmit={handleSubmit}>\r\n        <FormControl onSubmit={handleSubmit} style={{ width: \"100%\" }}>\r\n          <InputLabel htmlFor=\"adornment-text\">Optional text query</InputLabel>\r\n          <Input\r\n            id=\"adornment-text\"\r\n            type=\"text\"\r\n            fullWidth\r\n            placeholder=\"search for a keyword in tags,albums,titles etc\"\r\n            value={props.searchText}\r\n            onChange={props.handleTextQueryChange}\r\n            endAdornment={\r\n              <InputAdornment position=\"end\">\r\n                {/* {props.searchText.length > 0 ? ( */}\r\n                <IconButton\r\n                  style={props.searchText.length > 0 ? {} : { display: \"none\" }}\r\n                  aria-label=\"toggle password visibility\"\r\n                  onClick={props.clearTextQuery}\r\n                >\r\n                  <Close />\r\n                </IconButton>\r\n                {/* ) : null} */}\r\n              </InputAdornment>\r\n            }\r\n          />\r\n        </FormControl>\r\n        <FormHelperText style={{ margin: \"5px 0 \" }}>\r\n          Adding text to the query will greatly limit the results\r\n        </FormHelperText>\r\n      </form>\r\n    </>\r\n  );\r\n}\r\n","import \"date-fns\";\r\nimport React, { useState, useContext } from \"react\";\r\nimport DateFnsUtils from \"@date-io/date-fns\";\r\nimport { format } from \"date-fns\";\r\nimport {\r\n  MuiPickersUtilsProvider,\r\n  KeyboardDatePicker\r\n} from \"@material-ui/pickers\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport StateContext from \"../../../context/stateContext\";\r\nimport DispatchContext from \"../../../context/dispatchContext\";\r\nimport { SET_MIN_UPLOAD_DATE } from \"../../../context/rootReducer\";\r\n\r\nexport default function MinUploadDatePicker(props) {\r\n  const store = useContext(StateContext);\r\n  const dispatch = useContext(DispatchContext);\r\n  /** placeholderDate is used:\r\n   * 1) As initial date at the initialization of the component\r\n   * 2) As a placeholder when the user unchecks the checkbox\r\n   * so that the date doesn't reset each time after disabling the datepicker\r\n   * current implementation won't work on mobile because:\r\n   * when the drawer is closed the datepickers are unmounted and its state is wiped\r\n   * -initial minUploadDate is set to Flickrs official launch year 2004\r\n   */\r\n  const [placeholderDate, setPlaceholderDate] = useState(new Date(2004, 1, 1));\r\n\r\n  const checked = store.minUploadDate ? true : false;\r\n  let selectedDate = checked ? store.minUploadDate : placeholderDate;\r\n\r\n  const handleCheckBox = event => {\r\n    if (event.target.checked) {\r\n      dispatch({\r\n        type: SET_MIN_UPLOAD_DATE,\r\n        minUploadDate: format(selectedDate, \"yyyy-MM-dd\")\r\n      });\r\n    } else {\r\n      dispatch({\r\n        type: SET_MIN_UPLOAD_DATE,\r\n        minUploadDate: null\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleDateChange = date => {\r\n    selectedDate = date;\r\n    setPlaceholderDate(date);\r\n    dispatch({\r\n      type: SET_MIN_UPLOAD_DATE,\r\n      minUploadDate: format(date, \"yyyy-MM-dd\") //sql format, also works with flickr api and unlike getUnixTime(date) is readable\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div style={{ display: \"flex\" }}>\r\n      <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n        <KeyboardDatePicker\r\n          minDate={\"2000,1,1\"}\r\n          style={{ marginLeft: \"0.5rem\" }}\r\n          disabled={!checked}\r\n          margin=\"normal\"\r\n          id=\"date-picker-dialog\"\r\n          label=\"min upload date\"\r\n          format=\"dd/MM/yyyy\"\r\n          value={selectedDate}\r\n          onChange={handleDateChange}\r\n          KeyboardButtonProps={{\r\n            \"aria-label\": \"change date\"\r\n          }}\r\n        />\r\n      </MuiPickersUtilsProvider>\r\n      <Checkbox\r\n        style={{ alignSelf: \"flex-end\", marginLeft: \"1rem\" }}\r\n        checked={checked}\r\n        onChange={handleCheckBox}\r\n        value=\"min upload date\"\r\n        color=\"primary\"\r\n        inputProps={{\r\n          \"aria-label\": \"minimum upload date\"\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import \"date-fns\";\r\nimport React, { useState, useContext } from \"react\";\r\nimport DateFnsUtils from \"@date-io/date-fns\";\r\nimport { format } from \"date-fns\";\r\nimport {\r\n  MuiPickersUtilsProvider,\r\n  KeyboardDatePicker\r\n} from \"@material-ui/pickers\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport DispatchContext from \"../../../context/dispatchContext\";\r\nimport StateContext from \"../../../context/stateContext\";\r\nimport { SET_MAX_UPLOAD_DATE } from \"../../../context/rootReducer\";\r\n\r\nexport default function MaxUploadDatePicker(props) {\r\n  const dispatch = useContext(DispatchContext);\r\n  const store = useContext(StateContext);\r\n\r\n  const [placeholderDate, setPlaceholderDate] = useState(new Date());\r\n\r\n  const checked = store.maxUploadDate ? true : false;\r\n  let selectedDate = checked ? store.maxUploadDate : placeholderDate;\r\n\r\n  const handleCheckBox = event => {\r\n    if (event.target.checked) {\r\n      dispatch({\r\n        type: SET_MAX_UPLOAD_DATE,\r\n        maxUploadDate: format(selectedDate, \"yyyy-MM-dd\")\r\n      });\r\n    } else {\r\n      dispatch({\r\n        type: SET_MAX_UPLOAD_DATE,\r\n        maxUploadDate: null\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleDateChange = date => {\r\n    selectedDate = date;\r\n    setPlaceholderDate(date);\r\n    dispatch({\r\n      type: SET_MAX_UPLOAD_DATE,\r\n      maxUploadDate: format(date, \"yyyy-MM-dd\")\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div style={{ display: \"flex\" }}>\r\n      <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n        <KeyboardDatePicker\r\n          minDate={\"2000,1,1\"}\r\n          style={{ marginLeft: \"0.5rem\" }}\r\n          disabled={!checked}\r\n          margin=\"normal\"\r\n          id=\"date-picker-dialog\"\r\n          label=\"max upload date\"\r\n          format=\"dd/MM/yyyy\"\r\n          value={selectedDate}\r\n          onChange={handleDateChange}\r\n          KeyboardButtonProps={{\r\n            \"aria-label\": \"change date\"\r\n          }}\r\n        />\r\n      </MuiPickersUtilsProvider>\r\n      <Checkbox\r\n        style={{ alignSelf: \"flex-end\", marginLeft: \"1rem\" }}\r\n        checked={checked}\r\n        onChange={handleCheckBox}\r\n        value=\"use max upload date\"\r\n        color=\"primary\"\r\n        inputProps={{\r\n          \"aria-label\": \"maximum upload date\"\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import \"date-fns\";\r\nimport React, { useState, useContext } from \"react\";\r\nimport DateFnsUtils from \"@date-io/date-fns\";\r\nimport { format } from \"date-fns\";\r\nimport {\r\n  MuiPickersUtilsProvider,\r\n  KeyboardDatePicker\r\n} from \"@material-ui/pickers\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport DispatchContext from \"../../../context/dispatchContext\";\r\nimport StateContext from \"../../../context/stateContext\";\r\nimport { SET_MIN_TAKEN_DATE } from \"../../../context/rootReducer\";\r\n\r\nexport default function MinTakenDatePicker(props) {\r\n  const dispatch = useContext(DispatchContext);\r\n  const store = useContext(StateContext);\r\n\r\n  const [placeholderDate, setPlaceholderDate] = useState(new Date(2004, 1, 1));\r\n\r\n  const checked = store.minTakenDate ? true : false;\r\n  let selectedDate = checked ? store.minTakenDate : placeholderDate;\r\n\r\n  const handleCheckBox = event => {\r\n    if (event.target.checked) {\r\n      dispatch({\r\n        type: SET_MIN_TAKEN_DATE,\r\n        minTakenDate: format(selectedDate, \"yyyy-MM-dd\") //sql format readable by humans and flickr API\r\n      });\r\n    } else {\r\n      dispatch({\r\n        type: SET_MIN_TAKEN_DATE,\r\n        minTakenDate: null\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleDateChange = date => {\r\n    selectedDate = date;\r\n    setPlaceholderDate(date);\r\n    dispatch({\r\n      type: SET_MIN_TAKEN_DATE,\r\n      minTakenDate: format(date, \"yyyy-MM-dd\")\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div style={{ display: \"flex\" }}>\r\n      <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n        <KeyboardDatePicker\r\n          style={{ marginLeft: \"0.5rem\" }}\r\n          disabled={!checked}\r\n          margin=\"normal\"\r\n          id=\"date-picker-dialog\"\r\n          label=\"min taken date\"\r\n          format=\"dd/MM/yyyy\"\r\n          value={selectedDate}\r\n          onChange={handleDateChange}\r\n          KeyboardButtonProps={{\r\n            \"aria-label\": \"change date\"\r\n          }}\r\n        />\r\n      </MuiPickersUtilsProvider>\r\n      <Checkbox\r\n        style={{ alignSelf: \"flex-end\", marginLeft: \"1rem\" }}\r\n        checked={checked}\r\n        onChange={handleCheckBox}\r\n        value=\"min taken date\"\r\n        color=\"primary\"\r\n        inputProps={{\r\n          \"aria-label\": \"minimum taken date\"\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import \"date-fns\";\r\nimport React, { useState, useContext } from \"react\";\r\nimport DateFnsUtils from \"@date-io/date-fns\";\r\nimport { format } from \"date-fns\";\r\nimport {\r\n  MuiPickersUtilsProvider,\r\n  KeyboardDatePicker\r\n} from \"@material-ui/pickers\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport DispatchContext from \"../../../context/dispatchContext\";\r\nimport StateContext from \"../../../context/stateContext\";\r\nimport { SET_MAX_TAKEN_DATE } from \"../../../context/rootReducer\";\r\n\r\nexport default function MaxTakenDatePicker(props) {\r\n  const dispatch = useContext(DispatchContext);\r\n  const store = useContext(StateContext);\r\n\r\n  const [placeholderDate, setPlaceholderDate] = useState(new Date());\r\n\r\n  const checked = store.maxTakenDate ? true : false;\r\n  let selectedDate = checked ? store.maxTakenDate : placeholderDate;\r\n\r\n  const handleCheckBox = event => {\r\n    if (event.target.checked) {\r\n      dispatch({\r\n        type: SET_MAX_TAKEN_DATE,\r\n        maxTakenDate: format(selectedDate, \"yyyy-MM-dd\")\r\n      });\r\n    } else {\r\n      dispatch({\r\n        type: SET_MAX_TAKEN_DATE,\r\n        maxTakenDate: false\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleDateChange = date => {\r\n    selectedDate = date;\r\n    setPlaceholderDate(date);\r\n    dispatch({\r\n      type: SET_MAX_TAKEN_DATE,\r\n      maxTakenDate: format(date, \"yyyy-MM-dd\")\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div style={{ display: \"flex\" }}>\r\n      <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n        <KeyboardDatePicker\r\n          style={{ marginLeft: \"0.5rem\" }}\r\n          disabled={!checked}\r\n          margin=\"normal\"\r\n          id=\"date-picker-dialog\"\r\n          label=\"max taken date\"\r\n          format=\"dd/MM/yyyy\"\r\n          value={selectedDate}\r\n          onChange={handleDateChange}\r\n          KeyboardButtonProps={{\r\n            \"aria-label\": \"change date\"\r\n          }}\r\n        />\r\n      </MuiPickersUtilsProvider>\r\n      <Checkbox\r\n        style={{ alignSelf: \"flex-end\", marginLeft: \"1rem\" }}\r\n        checked={checked}\r\n        onChange={handleCheckBox}\r\n        value=\"max taken date\"\r\n        color=\"primary\"\r\n        inputProps={{\r\n          \"aria-label\": \"maximum taken date\"\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport FormGroup from \"@material-ui/core/FormGroup\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\n\r\nexport default function SwitchButton(props) {\r\n  const checked = !props.checked;\r\n\r\n  const handleSwitchChange = event => {\r\n    props.callback();\r\n  };\r\n\r\n  return (\r\n    <FormGroup row style={{ justifyContent: \"left\" }}>\r\n      <FormControlLabel\r\n        control={\r\n          <Switch\r\n            checked={checked}\r\n            onChange={handleSwitchChange}\r\n            value={checked}\r\n          />\r\n        }\r\n        label={props.label}\r\n      />\r\n    </FormGroup>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Drawer,\r\n  IconButton,\r\n  List,\r\n  Divider,\r\n  ListItem,\r\n  ListItemIcon,\r\n  ListItemText,\r\n  Collapse,\r\n  Button,\r\n  makeStyles\r\n} from \"@material-ui/core/\";\r\nimport {\r\n  MenuRounded,\r\n  ExpandLess,\r\n  ExpandMore,\r\n  MyLocationTwoTone,\r\n  Map,\r\n  Ballot,\r\n  ChevronLeft\r\n} from \"@material-ui/icons/\";\r\nimport RequstNumberSlider from \"../controlPanel/requestsNumberSlider\";\r\nimport SelectSortingMethod from \"../controlPanel/selectSortingMethod\";\r\nimport TextQuery from \"../controlPanel/textQuery\";\r\nimport MinUploadDatePicker from \"../controlPanel/datePickers/minUploadDatePicker\";\r\nimport MaxUploadDatePicker from \"../controlPanel/datePickers/maxUploadDatePicker\";\r\nimport MinTakenDatePicker from \"../controlPanel/datePickers/minTakenDatePicker\";\r\nimport MaxTakenDatePicker from \"../controlPanel/datePickers/maxTakenDatePicker\";\r\nimport CustomSwitch from \"../controlPanel/switches/customSwitch\";\r\n\r\nconst useStyles = makeStyles({\r\n  list: {\r\n    width: \"70vw\"\r\n  },\r\n  fullList: {\r\n    width: \"auto\"\r\n  },\r\n  hamburger: {\r\n    marginRight: \"0.5rem\",\r\n    color: \"#fff\"\r\n  }\r\n});\r\n\r\nexport default function DrawerMenu(props) {\r\n  const classes = useStyles();\r\n\r\n  const [openQueryOption, setOpenQueryOptions] = useState(false);\r\n  const handleQueryOptionsClick = () => setOpenQueryOptions(!openQueryOption);\r\n  const [openMapOptions, setOpenMapOptions] = useState(false);\r\n  const handleMapOptionsClick = () => setOpenMapOptions(!openMapOptions);\r\n  const [drawerOpen, setDrawerOpen] = useState(false);\r\n  const toggleDrawer = () => {\r\n    const prevState = !drawerOpen;\r\n    setDrawerOpen(prevState);\r\n  };\r\n\r\n  const closeDrawer = () => {\r\n    setDrawerOpen(false);\r\n  };\r\n\r\n  const DrawerItems = () => (\r\n    <div className={classes.list} role=\"presentation\">\r\n      <List style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n        <IconButton onClick={closeDrawer} style={{ marginRight: \"1rem\" }}>\r\n          <ChevronLeft />\r\n        </IconButton>\r\n      </List>\r\n      <Divider />\r\n\r\n      <List>\r\n        <ListItem button onClick={handleQueryOptionsClick}>\r\n          <ListItemIcon>\r\n            <Ballot />\r\n          </ListItemIcon>\r\n          <ListItemText primary=\"Query Options\" />\r\n          {openQueryOption ? <ExpandLess /> : <ExpandMore />}\r\n        </ListItem>\r\n\r\n        <Collapse in={openQueryOption} timeout=\"auto\" unmountOnExit>\r\n          <List component=\"div\" disablePadding>\r\n            <ListItem style={{ flexFlow: \"column\" }}>\r\n              <RequstNumberSlider />\r\n            </ListItem>\r\n\r\n            <ListItem>\r\n              <SelectSortingMethod\r\n                handeSelectSortMethod={props.handeSelectSortMethod}\r\n                sortMethod={props.sortMethod}\r\n              />\r\n            </ListItem>\r\n\r\n            <ListItem>\r\n              <TextQuery\r\n                handleTextQueryChange={props.handleTextQueryChange}\r\n                clearTextQuery={props.clearTextQuery}\r\n                searchText={props.searchText}\r\n                searchFlikr={props.searchFlikr}\r\n              />\r\n            </ListItem>\r\n\r\n            <Divider className={classes.divider} />\r\n\r\n            <ListItem>\r\n              <MinUploadDatePicker />\r\n            </ListItem>\r\n\r\n            <ListItem>\r\n              <MaxUploadDatePicker />\r\n            </ListItem>\r\n\r\n            <Divider className={classes.divider} />\r\n\r\n            <ListItem>\r\n              <MinTakenDatePicker />\r\n            </ListItem>\r\n            <ListItem>\r\n              <MaxTakenDatePicker />\r\n            </ListItem>\r\n          </List>\r\n        </Collapse>\r\n      </List>\r\n      {/* SECOND COLLAPSABLE LIST  */}\r\n      <List>\r\n        <ListItem button onClick={handleMapOptionsClick}>\r\n          <ListItemIcon>\r\n            <Map />\r\n          </ListItemIcon>\r\n          <ListItemText primary=\"Map Options\" />\r\n          {openMapOptions ? <ExpandLess /> : <ExpandMore />}\r\n        </ListItem>\r\n\r\n        <Collapse in={openMapOptions} timeout=\"auto\" unmountOnExit>\r\n          <List component=\"div\" disablePadding>\r\n            <ListItem>\r\n              <CustomSwitch\r\n                callback={props.togglePhotoMarkerDisplay}\r\n                checked={props.displayPhotoMarkers}\r\n                label=\"Hide all results from the map\"\r\n              />\r\n            </ListItem>\r\n            <ListItem>\r\n              <CustomSwitch\r\n                callback={props.toggleFavorites}\r\n                checked={props.displayFavorites}\r\n                label=\"Hide all favorites from the map\"\r\n              />\r\n            </ListItem>\r\n            <ListItem>\r\n              <Button\r\n                variant=\"contained\"\r\n                style={{ marginTop: \"1rem\", color: \"black\", width: \"100%\" }}\r\n                color=\"secondary\"\r\n                size={\"large\"}\r\n                onClick={props.handleMyLocationClick}\r\n              >\r\n                <MyLocationTwoTone style={{ marginRight: \"1rem\" }} />\r\n                My location\r\n              </Button>\r\n            </ListItem>\r\n          </List>\r\n        </Collapse>\r\n      </List>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <IconButton\r\n        onClick={toggleDrawer}\r\n        aria-label=\"Open Menu\"\r\n        size=\"medium\"\r\n        className={classes.hamburger}\r\n      >\r\n        <MenuRounded fontSize=\"large\" />\r\n      </IconButton>\r\n\r\n      <Drawer open={drawerOpen} onClose={closeDrawer}>\r\n        {DrawerItems()}\r\n      </Drawer>\r\n    </div>\r\n  );\r\n}\r\n","import useMediaQuery from \"@material-ui/core/useMediaQuery\";\r\n\r\n/**\r\n * useMediaQuery returns true if the screen width is >= 900px ,and false if it is <900\r\n */\r\nexport const useScreenWidth = () => {\r\n  const matches = useMediaQuery(\"(min-width:900px)\");\r\n  return matches;\r\n};\r\n","import React from \"react\";\r\nimport {\r\n  AppBar,\r\n  Toolbar,\r\n  Typography,\r\n  CssBaseline,\r\n  useScrollTrigger,\r\n  Box,\r\n  Slide,\r\n  useMediaQuery,\r\n  Zoom,\r\n  Fab,\r\n  IconButton,\r\n  Tooltip,\r\n  makeStyles\r\n} from \"@material-ui/core/\";\r\nimport {\r\n  KeyboardArrowUp,\r\n  ViewStream as Rows,\r\n  ViewWeek as Columns\r\n} from \"@material-ui/icons/\";\r\nimport Logo from \"../../assets/logo\";\r\nimport DrawerMenu from \"../drawer/drawer\";\r\nimport { useScreenWidth as useScreenWidth900 } from \"../../CustomHooks/useScreenWidth\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    position: \"fixed\",\r\n    bottom: theme.spacing(2),\r\n    right: theme.spacing(2)\r\n  },\r\n  grow: {\r\n    flexGrow: 1,\r\n    color: \"red\",\r\n    width: \"100px\"\r\n  },\r\n  icons_container: {\r\n    display: \"flex\"\r\n  },\r\n  logo_container: {\r\n    cursor: \"pointer\",\r\n    display: \"flex\",\r\n    alignItems: \"center\"\r\n  }\r\n}));\r\n\r\nfunction HideOnScroll(props) {\r\n  const trigger = useScrollTrigger();\r\n  return (\r\n    <Slide\r\n      appear={false}\r\n      direction=\"down\"\r\n      /* if appBarHide is true hide the appbar otherwise leave useScrollTrigger to deal with it */\r\n      in={props.appBarHide ? false : !trigger}\r\n    >\r\n      {props.children}\r\n    </Slide>\r\n  );\r\n}\r\n\r\nfunction ScrollTop(props) {\r\n  const { children } = props;\r\n  const classes = useStyles();\r\n  const trigger = useScrollTrigger({\r\n    disableHysteresis: true,\r\n    threshold: 100\r\n  });\r\n\r\n  const handleClick = event => {\r\n    const anchor = (event.target.ownerDocument || document).querySelector(\r\n      \"#back-to-top-anchor\"\r\n    );\r\n\r\n    if (anchor) {\r\n      anchor.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Zoom in={trigger}>\r\n      <div onClick={handleClick} role=\"presentation\" className={classes.root}>\r\n        {children}\r\n      </div>\r\n    </Zoom>\r\n  );\r\n}\r\n\r\nexport default function HideAppBar(props) {\r\n  const matches = useMediaQuery(\"(min-width:1200px)\");\r\n  const classes = useStyles();\r\n\r\n  const scrollToTop = event => {\r\n    const anchor = (event.target.ownerDocument || document).querySelector(\r\n      \"#back-to-top-anchor\"\r\n    );\r\n    if (anchor) {\r\n      anchor.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <CssBaseline />\r\n      <HideOnScroll appBarHide={props.appBarHide} {...props}>\r\n        <AppBar>\r\n          <Toolbar disableGutters={useScreenWidth900() ? false : true}>\r\n            {!useScreenWidth900() && (\r\n              <DrawerMenu\r\n                handeSelectSortMethod={props.handeSelectSortMethod}\r\n                sortMethod={props.sortMethod}\r\n                handleTextQueryChange={props.handleTextQueryChange}\r\n                clearTextQuery={props.clearTextQuery}\r\n                searchText={props.searchText}\r\n                searchFlikr={props.searchFlikr}\r\n                handleMyLocationClick={props.handleMyLocationClick}\r\n                togglePhotoMarkerDisplay={props.togglePhotoMarkerDisplay}\r\n                toggleFavorites={props.toggleFavorites}\r\n                displayPhotoMarkers={props.displayPhotoMarkers}\r\n                displayFavorites={props.displayFavorites}\r\n              />\r\n            )}\r\n\r\n            <div className={classes.logo_container} onClick={scrollToTop}>\r\n              <Logo\r\n                style={{ width: \"40px\", marginRight: \"0.75rem\", fill: \"white\" }}\r\n                aria-label=\"Flickr\"\r\n              />\r\n              <Typography variant=\"h6\">\r\n                <span style={{ color: \"#dedee6\" }}>Geo</span>\r\n                <span style={{ color: \"#ffc1d5\" }}>Explorer</span>\r\n              </Typography>\r\n            </div>\r\n            <div className={classes.grow} />\r\n            <div className={classes.icons_container}>\r\n              {props.photos > 0 && (\r\n                <Tooltip\r\n                  title={\r\n                    props.gridDirection === \"column\"\r\n                      ? \"Display images as Rows\"\r\n                      : \"Display images as Columns\"\r\n                  }\r\n                  aria-label={\r\n                    props.gridDirection === \"column\"\r\n                      ? \"Display images as Rows\"\r\n                      : \"Display images as Columns\"\r\n                  }\r\n                >\r\n                  <IconButton\r\n                    color=\"inherit\"\r\n                    onClick={props.toggleGridDirection}\r\n                  >\r\n                    {props.gridDirection === \"column\" ? (\r\n                      <>\r\n                        <Rows className={classes.control_icon} />\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <Columns className={classes.control_icon} />\r\n                      </>\r\n                    )}\r\n                  </IconButton>\r\n                </Tooltip>\r\n              )}\r\n              {/* //Favorites Page will be placed here when ready \r\n               <Tooltip title=\"Toggle Map\" aria-label=\"Toggle Map\">\r\n                <IconButton\r\n                  color=\"inherit\"\r\n                  aria-label=\"toggle map\"\r\n                  onClick={props.toggleMap}\r\n                >\r\n                  <Map />\r\n                </IconButton>\r\n              </Tooltip> */}\r\n            </div>\r\n          </Toolbar>\r\n        </AppBar>\r\n      </HideOnScroll>\r\n      <Toolbar id=\"back-to-top-anchor\" />\r\n      <Box\r\n        style={matches ? { margin: \"5px 25px 2px\" } : { margin: \"5px 0 2px\" }}\r\n      >\r\n        {props.children}\r\n      </Box>\r\n      <ScrollTop {...props}>\r\n        <Fab color=\"secondary\" size=\"small\" aria-label=\"scroll back to top\">\r\n          <KeyboardArrowUp />\r\n        </Fab>\r\n      </ScrollTop>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useState, useContext } from \"react\";\r\nimport { Fab, makeStyles, Zoom } from \"@material-ui/core\";\r\nimport { Favorite, FavoriteBorder, MoreVert } from \"@material-ui/icons\";\r\nimport { find as _find } from \"lodash\";\r\nimport StateContext from \"../../context/stateContext\";\r\n// import { getPhotoGeoLocation } from \"../../requests/flikr\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  pin_to_map_btn: {\r\n    position: \"absolute\",\r\n    bottom: \"2px\",\r\n    left: \"2px\",\r\n    backgroundColor: \"#f500577a\",\r\n    \"&:hover\": {\r\n      boxShadow: \"0px 0px 11px 0px rgba(0,0,0,0.75)\"\r\n    }\r\n  },\r\n  options_btn: {\r\n    top: \"2px\",\r\n    right: \"2px\",\r\n    position: \"absolute\",\r\n    backgroundColor: \"#ffffffa6\",\r\n    \"&:hover\": {\r\n      backgroundColor: \"#f5f5f5e8\",\r\n      boxShadow: \"0px 0px 11px 0px rgba(0,0,0,0.75)\"\r\n    }\r\n  },\r\n  image: {\r\n    margin: \"2px\",\r\n    display: \"block\"\r\n  }\r\n  // container: {\r\n  //   // position: \"relative\",\r\n  //   // width: \"100%\"\r\n  //   position: \"absolute\",\r\n  //   left: \"left\",\r\n  //   top: \"top\"\r\n  // }\r\n}));\r\n\r\nconst ImageWrapper = ({\r\n  index,\r\n  photo,\r\n  margin,\r\n  direction,\r\n  top,\r\n  left,\r\n  selected,\r\n  imageToggleFavorites,\r\n  openLightbox,\r\n  handleOpenMenuClick\r\n}) => {\r\n  const classes = useStyles();\r\n  const state = useContext(StateContext);\r\n  const [hover, setHover] = useState(false);\r\n  const isFavorite = _find(state.favorites, el => el.photoId === photo.photoId)\r\n    ? true\r\n    : false;\r\n\r\n  const cont = {\r\n    backgroundColor: \"#eee\",\r\n    cursor: \"pointer\",\r\n    overflow: \"hidden\",\r\n    position: \"relative\"\r\n  };\r\n\r\n  const handleOnMouseEnter = (photo, e) => {\r\n    setHover(true);\r\n  };\r\n  const handleOnMouseLeave = (photo, e) => {\r\n    setHover(false);\r\n  };\r\n\r\n  const handleTouch = () => {\r\n    setHover(true);\r\n    window.setTimeout(() => {\r\n      setHover(false);\r\n    }, 3000);\r\n  };\r\n\r\n  //CONTAINER OVERRIDES FOR COLUMNT LAYOUT\r\n  // position: \"absolute\",\r\n  // left: left,\r\n  // top: top\r\n  console.log(direction);\r\n  if (direction === \"column\") {\r\n    cont.position = \"absolute\";\r\n    cont.left = left;\r\n    cont.top = top;\r\n  }\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        margin,\r\n        height: photo.height,\r\n        width: photo.width,\r\n        ...cont\r\n        // position: \"absolute\",\r\n        // left: left,\r\n        // top: top\r\n      }}\r\n      className={classes.container}\r\n      onMouseEnter={handleOnMouseEnter.bind(this, photo)}\r\n      onMouseLeave={handleOnMouseLeave}\r\n      onTouchStart={handleTouch}\r\n    >\r\n      <img\r\n        src={photo.src}\r\n        title={\r\n          photo.title\r\n            ? photo.title + ` - by user ${photo.ownername}`\r\n            : `untitled - by user ${photo.ownername}`\r\n        }\r\n        alt={photo.alt}\r\n        srcSet={photo.srcSet}\r\n        width={photo.width}\r\n        heigth={photo.height}\r\n        sizes={photo.sizes}\r\n        className={classes.image}\r\n        onClick={event => openLightbox.call(this, event, { index, photo })}\r\n      />\r\n      <Zoom in={hover}>\r\n        <Fab\r\n          size=\"small\"\r\n          aria-label=\"add\"\r\n          className={classes.options_btn}\r\n          onClick={handleOpenMenuClick.bind(this, photo)}\r\n        >\r\n          <MoreVert />\r\n        </Fab>\r\n      </Zoom>\r\n\r\n      <Zoom in={hover}>\r\n        <Fab\r\n          size=\"small\"\r\n          color=\"secondary\"\r\n          aria-label=\"add\"\r\n          className={classes.pin_to_map_btn}\r\n          onClick={imageToggleFavorites.bind(this, photo, isFavorite)}\r\n        >\r\n          {isFavorite ? (\r\n            <Favorite style={{ color: \"gold\" }} />\r\n          ) : (\r\n            <FavoriteBorder style={{ color: \"#000\" }} />\r\n          )}\r\n        </Fab>\r\n      </Zoom>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(ImageWrapper);\r\n","import React from \"react\";\r\nimport { Menu, MenuItem, Link } from \"@material-ui/core/\";\r\nimport DispatchContext from \"../../context/dispatchContext\";\r\nimport { BLOCK_USER } from \"../../context/rootReducer\";\r\n\r\nconst linkStyle = {\r\n  width: \"100%\"\r\n};\r\n\r\nexport default function ImageMenu(props) {\r\n  const dispatch = React.useContext(DispatchContext);\r\n\r\n  const handleHideUser = () => {\r\n    props.handleMenuClose();\r\n    dispatch({\r\n      type: BLOCK_USER,\r\n      userId: props.photoData.owner\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Menu\r\n        id=\"image-menu\"\r\n        anchorEl={props.anchorEl}\r\n        keepMounted\r\n        open={Boolean(props.anchorEl)}\r\n        onClose={props.handleMenuClose}\r\n      >\r\n        <MenuItem onClick={handleHideUser}>\r\n          Temporary hide photos from this user\r\n        </MenuItem>\r\n        <MenuItem onClick={props.handleMenuClose}>\r\n          <Link\r\n            style={linkStyle}\r\n            target=\"_blank\"\r\n            href={\r\n              props.photoData\r\n                ? `https://www.flickr.com/photos/${props.photoData.owner}/${props.photoData.photoId}`\r\n                : \"\"\r\n            }\r\n            color=\"inherit\"\r\n          >\r\n            Open Photo in Flickr\r\n          </Link>\r\n        </MenuItem>\r\n      </Menu>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useCallback, useContext } from \"react\";\r\nimport Gallery from \"react-photo-gallery\";\r\nimport ImageWrapper from \"../imageWrapper/imageWrapper\";\r\nimport ImageMenu from \"../imageWrapper/imageMenu\";\r\nimport StateContext from \"../../context/stateContext\";\r\nimport Carousel, { Modal, ModalGateway } from \"react-images\";\r\nimport { makeStyles, IconButton, Typography } from \"@material-ui/core\";\r\nimport {\r\n  Close,\r\n  Fullscreen,\r\n  FullscreenExit,\r\n  Favorite,\r\n  FavoriteBorder\r\n} from \"@material-ui/icons\";\r\nimport { find as _find } from \"lodash\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  header_container: {\r\n    position: \"absolute\",\r\n    top: \"2px\",\r\n    left: \"2px\",\r\n    width: \"100vw\",\r\n    display: \"flex\",\r\n    zIndex: \"2000\",\r\n    justifyContent: \"space-between\", //\"flex-end\", to align btns to the right\r\n    transition: \"opacity 300ms\",\r\n    opacity: \"1\"\r\n  },\r\n  lightbox_btn: {\r\n    color: \"#fff\",\r\n    background: \"rgba(255, 255, 255, 0.2)\",\r\n    margin: \"2px\",\r\n    border: \"1px solid #00000024\",\r\n    \"&:hover\": {\r\n      boxShadow: \"0px 0px 11px 0px rgba(0,0,0,0.75)\",\r\n      background: \"rgba(255, 255, 255, 0.3)\"\r\n    }\r\n  },\r\n  hide_on_idle: {\r\n    opacity: \"0\"\r\n  }\r\n}));\r\n\r\nconst navButtonStyles = base => ({\r\n  ...base,\r\n  background: \"rgba(255, 255, 255, 0.2)\",\r\n  \"&:hover, &:active\": {\r\n    boxShadow: \"0px 0px 11px 0px rgba(0,0,0,0.75)\",\r\n    background: \"rgba(255, 255, 255, 0.3)\"\r\n  },\r\n  \"&:active\": {\r\n    boxShadow: \"0 1px 3px rgba(0, 0, 0, 0.14)\",\r\n    transform: \"scale(0.96)\"\r\n  }\r\n});\r\n\r\nconst ViewRenderer = props => {\r\n  /** By default react-images carousel loads all images\r\n   * Vustom viewRenderer ensures changes that behaviour and requests each image when it is about to render it\r\n   * more on the issue:-->  https://github.com/jossmac/react-images/issues/300 */\r\n  const overScanCount = 1;\r\n  const { data, getStyles, index, currentIndex } = props;\r\n  const { alt, src } = data;\r\n\r\n  return Math.abs(currentIndex - index) <= overScanCount ? (\r\n    <div style={getStyles(\"view\", props)}>\r\n      <img\r\n        alt={alt || `Image ${index}`}\r\n        src={src}\r\n        style={{\r\n          height: \"auto\",\r\n          maxHeight: \"100vh\",\r\n          maxWidth: \"100%\",\r\n          userSelect: \"none\"\r\n        }}\r\n      />\r\n    </div>\r\n  ) : null;\r\n};\r\n\r\nconst CustomHeader = props => {\r\n  /*most props like carouselProps, interactionIsIdle etc are passed by default props react-photo-gallery*/\r\n  const classes = useStyles();\r\n  const store = useContext(StateContext);\r\n  const isFavorite = _find(\r\n    store.favorites,\r\n    el => el.photoId === props.currentView.photoId\r\n  )\r\n    ? true\r\n    : false;\r\n\r\n  return props.isModal ? (\r\n    <div\r\n      className={\r\n        props.interactionIsIdle\r\n          ? classes.header_container + \" \" + classes.hide_on_idle\r\n          : classes.header_container\r\n      }\r\n    >\r\n      <IconButton\r\n        aria-label=\"Pin photo on map\"\r\n        className={classes.lightbox_btn}\r\n        onClick={props.carouselProps.imageToggleFavorites.bind(\r\n          this,\r\n          props.data,\r\n          isFavorite\r\n        )}\r\n      >\r\n        {isFavorite ? (\r\n          <Favorite style={{ color: \"gold\" }} />\r\n        ) : (\r\n          <FavoriteBorder />\r\n        )}\r\n      </IconButton>\r\n\r\n      <div className={classes.btn_container_right}>\r\n        <IconButton\r\n          aria-label=\"toggle fullscreen\"\r\n          className={classes.lightbox_btn}\r\n          edge=\"start\"\r\n          onClick={props.modalProps.toggleFullscreen}\r\n        >\r\n          {props.modalProps.isFullscreen ? <FullscreenExit /> : <Fullscreen />}\r\n        </IconButton>\r\n\r\n        {!props.modalProps.isFullscreen && (\r\n          <IconButton\r\n            aria-label=\"Close\"\r\n            className={classes.lightbox_btn}\r\n            edge=\"start\"\r\n            onClick={props.modalProps.onClose}\r\n          >\r\n            <Close />\r\n          </IconButton>\r\n        )}\r\n      </div>\r\n    </div>\r\n  ) : null;\r\n};\r\n\r\nconst ImageGrid = ({\r\n  photos,\r\n  responseDetails,\r\n  direction,\r\n  // addImgToFavorites,\r\n  imageToggleFavorites,\r\n  setAppBarHide,\r\n  columns,\r\n  hiddenPhotos\r\n}) => {\r\n  const [currentImage, setCurrentImage] = useState(0);\r\n  const [viewerIsOpen, setViewerIsOpen] = useState(false);\r\n\r\n  React.useEffect(() => {\r\n    //debugging\r\n    console.log(\"IMAGE GRID: some props Caused Rerender!!!!!\");\r\n  }, [\r\n    photos,\r\n    responseDetails,\r\n    direction,\r\n    // addImgToFavorites,\r\n    imageToggleFavorites,\r\n    setAppBarHide,\r\n    columns,\r\n    hiddenPhotos\r\n  ]);\r\n\r\n  console.log(\"IMAGEGRID UPDATED!\");\r\n  const openLightbox = useCallback(\r\n    (event, { photo, index }) => {\r\n      setAppBarHide(true);\r\n      setCurrentImage(index);\r\n      setViewerIsOpen(true);\r\n    },\r\n    [setAppBarHide]\r\n  );\r\n\r\n  const closeLightbox = () => {\r\n    setCurrentImage(0);\r\n    setViewerIsOpen(false);\r\n    setAppBarHide(false);\r\n  };\r\n\r\n  /** ImageMenu */\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [photoData, setPhotoData] = useState(null);\r\n  const handleOpenMenuClick = (data, event) => {\r\n    setPhotoData(data);\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  const handleMenuClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  /**Wrapper around ImageWrapper */\r\n  const imageRenderer = useCallback(\r\n    props => {\r\n      return (\r\n        <ImageWrapper\r\n          key={props.key}\r\n          margin={\"2px\"}\r\n          index={props.index}\r\n          photo={props.photo}\r\n          left={props.left}\r\n          top={props.top}\r\n          // addImgToFavorites={addImgToFavorites}\r\n          imageToggleFavorites={imageToggleFavorites}\r\n          direction={props.direction}\r\n          openLightbox={props.onClick}\r\n          handleOpenMenuClick={handleOpenMenuClick}\r\n        />\r\n      );\r\n    },\r\n    [imageToggleFavorites]\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <Typography variant=\"h3\" component=\"h1\" style={{ marginTop: \"1.9rem\" }}>\r\n        Results:\r\n      </Typography>\r\n      <Typography variant=\"subtitle1\" component=\"h2\" gutterBottom>\r\n        {photos.length === 0\r\n          ? `Sorry could not find any photos in that particular area`\r\n          : `Displaying ${photos.length} of total ${responseDetails.totalPhotos} photos found...`}\r\n      </Typography>\r\n      {hiddenPhotos.length > 0 && (\r\n        <Typography variant=\"subtitle2\" component=\"p\" gutterBottom>\r\n          ({hiddenPhotos.length}) photos from blocked users are hidden.\r\n        </Typography>\r\n      )}\r\n\r\n      {photos.length > 0 && (\r\n        <Gallery\r\n          photos={photos}\r\n          direction={direction}\r\n          renderImage={imageRenderer}\r\n          // addImgToFavorites={addImgToFavorites}\r\n          onClick={openLightbox}\r\n          // the above onClick is an optional react-photo-gallery prop\r\n          // It receives the arguments -> event and an object containing the index,\r\n          // Photos obj originally sent and the next and previous photos in the gallery if they exist\r\n        />\r\n      )}\r\n      <ModalGateway>\r\n        {viewerIsOpen ? (\r\n          <Modal onClose={closeLightbox}>\r\n            <Carousel\r\n              // addImgToFavorites={addImgToFavorites}\r\n              imageToggleFavorites={imageToggleFavorites}\r\n              components={{\r\n                Header: CustomHeader,\r\n\r\n                View: ViewRenderer\r\n              }}\r\n              currentIndex={currentImage}\r\n              views={photos.map(x => ({\r\n                ...x,\r\n                srcset: x.srcSet,\r\n                caption: x.title\r\n              }))}\r\n              styles={{\r\n                navigationPrev: navButtonStyles,\r\n                navigationNext: navButtonStyles\r\n              }}\r\n            />\r\n          </Modal>\r\n        ) : null}\r\n      </ModalGateway>\r\n      <ImageMenu\r\n        anchorEl={anchorEl}\r\n        handleOpenMenuClick={handleOpenMenuClick}\r\n        handleMenuClose={handleMenuClose}\r\n        photoData={photoData}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(ImageGrid);\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  button: {\r\n    margin: \"1rem auto\",\r\n    display: \"block\"\r\n  }\r\n}));\r\n\r\nconst LoadMoreButton = props => {\r\n  const classes = useStyles();\r\n  return (\r\n    <Button\r\n      onClick={props.onClick}\r\n      variant=\"outlined\"\r\n      size=\"large\"\r\n      className={classes.button}\r\n    >\r\n      Load more photos\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default LoadMoreButton;\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    flexGrow: 1,\r\n    margin: \"0.5rem 0\"\r\n  }\r\n});\r\n\r\nexport default function LoadingBar() {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <LinearProgress />\r\n      <LinearProgress color=\"secondary\" />\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Slider from \"@material-ui/core/Slider\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    display: \"flex\",\r\n    width: \"100%\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\"\r\n  },\r\n  input: {\r\n    marginLeft: \"1rem\",\r\n    marginBottom: \"1rem\"\r\n  }\r\n});\r\n\r\nexport default function RadiusSlider(props) {\r\n  const classes = useStyles();\r\n  const [value, setValue] = React.useState(3);\r\n\r\n  const handleSliderChange = (event, newValue) => {\r\n    setValue(newValue);\r\n    props.setSearchRadius(newValue);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Typography align=\"center\" gutterBottom>\r\n        Search Area Radius in Km\r\n      </Typography>\r\n\r\n      <div className={classes.root}>\r\n        <Slider\r\n          value={value}\r\n          onChange={handleSliderChange}\r\n          aria-labelledby=\"input-slider\"\r\n          step={0.5}\r\n          min={0.5}\r\n          max={30}\r\n          style={{ width: \"75%\", marginRight: \"0.5rem\", marginLeft: \"0.5rem\" }}\r\n        />\r\n        <Typography>{value + ` km`}</Typography>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  makeStyles,\r\n  ExpansionPanel,\r\n  ExpansionPanelSummary,\r\n  ExpansionPanelDetails,\r\n  Typography\r\n} from \"@material-ui/core/\";\r\n\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    width: \"100%\"\r\n  },\r\n  heading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n    fontWeight: theme.typography.fontWeightRegular\r\n  },\r\n  details_root: {\r\n    display: \"flex\",\r\n    flexFlow: \"column\"\r\n  }\r\n}));\r\n\r\nexport default function ExpansionPanels(props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <ExpansionPanel>\r\n        <ExpansionPanelSummary\r\n          expandIcon={<ExpandMoreIcon />}\r\n          aria-controls=\"request-options-content\"\r\n        >\r\n          <Typography className={classes.heading}>Query Options</Typography>\r\n        </ExpansionPanelSummary>\r\n        <ExpansionPanelDetails\r\n          id=\"request-options-content\"\r\n          classes={{ root: classes.details_root }}\r\n        >\r\n          {props.requestOptions}\r\n        </ExpansionPanelDetails>\r\n      </ExpansionPanel>\r\n      <ExpansionPanel>\r\n        <ExpansionPanelSummary\r\n          expandIcon={<ExpandMoreIcon />}\r\n          aria-controls=\"map-options-content\"\r\n        >\r\n          <Typography className={classes.heading}>Map Options</Typography>\r\n        </ExpansionPanelSummary>\r\n        <ExpansionPanelDetails\r\n          id=\"map-options-content\"\r\n          classes={{ root: classes.details_root }}\r\n        >\r\n          {props.mapOptions}\r\n        </ExpansionPanelDetails>\r\n      </ExpansionPanel>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport {\r\n  Paper,\r\n  makeStyles,\r\n  Box,\r\n  Typography,\r\n  Button,\r\n  Divider,\r\n  Tooltip\r\n} from \"@material-ui/core\";\r\nimport {\r\n  ImageSearchRounded,\r\n  CenterFocusStrong,\r\n  ZoomOutMap,\r\n  MyLocationTwoTone\r\n} from \"@material-ui/icons\";\r\nimport RadiusSlider from \"./RadiusSlider\";\r\nimport SelectSortingMethod from \"./selectSortingMethod\";\r\nimport TextQuery from \"./textQuery\";\r\nimport CustomSwitch from \"./switches/customSwitch\";\r\nimport RequstNumberSlider from \"./requestsNumberSlider\";\r\nimport OptionsPanel from \"./expansionPanels\";\r\nimport MinUploadDatePicker from \"./datePickers/minUploadDatePicker\";\r\nimport MaxUploadDatePicker from \"./datePickers/maxUploadDatePicker\";\r\nimport MaxTakenDatePicker from \"./datePickers/maxTakenDatePicker\";\r\nimport MinTakenDatePicker from \"./datePickers/minTakenDatePicker\";\r\nimport StateContext from \"../../context/stateContext\";\r\nimport LoadingBar from \"../LoadingBar/loadingBar\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  panel: {\r\n    textAlign: \"center\",\r\n    maxWidth: \"40vw\",\r\n    width: \"40vw\",\r\n    display: \"flex\",\r\n    flexFlow: \"column\",\r\n    overflowY: \"scroll\"\r\n  },\r\n  panel_item: {\r\n    margin: \"8px\",\r\n    display: \"flex\"\r\n  },\r\n  wrapper: {\r\n    margin: \"0.5rem\"\r\n  },\r\n  divider: {\r\n    margin: \"1rem 0\"\r\n  },\r\n  control_icon: {\r\n    marginRight: \"1rem\"\r\n  },\r\n  search_photos_box: {\r\n    justifyContent: \"center\"\r\n  },\r\n  secondary_btn: {\r\n    margin: \"1rem\"\r\n  },\r\n  map_options_container: {\r\n    display: \"flex\",\r\n    flexFlow: \"column\",\r\n    textAlign: \"left\"\r\n  }\r\n}));\r\n\r\nconst ControlPanel = props => {\r\n  const store = useContext(StateContext);\r\n\r\n  const classes = useStyles();\r\n\r\n  const infoTextBox = `Zoom to the location that you want to search for photos and hit the search button.`;\r\n  const infoTextCircle = `Drag the blue circle on the map to select the place where you want\r\nto search for photos, when done press the button below to make the request.`;\r\n  return (\r\n    <Paper className={classes.panel}>\r\n      <div className={classes.wrapper}>\r\n        {store.searchMethod === \"EXTENTS\" && (\r\n          <>\r\n            <Box className={classes.panel_item}>\r\n              <Typography>{infoTextBox}</Typography>\r\n            </Box>\r\n            <Box className={classes.panel_item + classes.search_photos_box}>\r\n              <Button\r\n                variant=\"contained\"\r\n                style={{ backgroundColor: \"#179207\" }}\r\n                size={\"large\"}\r\n                onClick={props.searchFlikr}\r\n              >\r\n                <ImageSearchRounded className={classes.control_icon} />\r\n                Search Photos\r\n              </Button>\r\n              {props.loadingPhotos && <LoadingBar />}\r\n            </Box>\r\n          </>\r\n        )}\r\n        {/* SEARCH BY RADIUS */}\r\n        {store.searchMethod === \"CIRCLE\" && (\r\n          <>\r\n            <Box className={classes.panel_item}>\r\n              <Typography>{infoTextCircle}</Typography>\r\n            </Box>\r\n            <RadiusSlider setSearchRadius={props.setSearchRadius} />\r\n            <Box\r\n              className={classes.panel_item + \" \" + classes.search_photos_box}\r\n            >\r\n              <Tooltip\r\n                title=\"Move Search-Area to the Center of map\"\r\n                aria-label=\"Move Search-Area to the Center of map\"\r\n              >\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  size=\"medium\"\r\n                  className={classes.secondary_btn}\r\n                  onClick={props.centerSearchAreaOnMap}\r\n                >\r\n                  <CenterFocusStrong />\r\n                </Button>\r\n              </Tooltip>\r\n              <Tooltip\r\n                title=\"Zoom to Search-Area extents\"\r\n                aria-label=\"Zoom to Search-Area extents\"\r\n              >\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  size=\"medium\"\r\n                  className={classes.secondary_btn}\r\n                  onClick={props.zoomToSearchArea}\r\n                >\r\n                  <ZoomOutMap />\r\n                </Button>\r\n              </Tooltip>\r\n            </Box>\r\n          </>\r\n        )}\r\n\r\n        <Divider className={classes.divider} />\r\n\r\n        <OptionsPanel\r\n          requestOptions={\r\n            <>\r\n              <RequstNumberSlider />\r\n              <SelectSortingMethod\r\n                handeSelectSortMethod={props.handeSelectSortMethod}\r\n                sortMethod={props.sortMethod}\r\n              />\r\n              <TextQuery\r\n                handleTextQueryChange={props.handleTextQueryChange}\r\n                clearTextQuery={props.clearTextQuery}\r\n                searchText={props.searchText}\r\n                searchFlikr={props.searchFlikr}\r\n              />\r\n              <Divider className={classes.divider} />\r\n              <MinUploadDatePicker />\r\n              <MaxUploadDatePicker />\r\n              <Divider className={classes.divider} />\r\n              <MinTakenDatePicker />\r\n              <MaxTakenDatePicker />\r\n            </>\r\n          }\r\n          mapOptions={\r\n            <div className={classes.map_options_container}>\r\n              <CustomSwitch\r\n                callback={props.togglePhotoMarkerDisplay}\r\n                checked={props.displayPhotoMarkers}\r\n                label=\"Hide all results from map\"\r\n              />\r\n              <CustomSwitch\r\n                callback={props.toggleFavorites}\r\n                checked={props.displayFavorites}\r\n                label=\"Hide all favorites from map\"\r\n              />\r\n              <Button\r\n                variant=\"contained\"\r\n                style={{ marginTop: \"1rem\", color: \"black\" }}\r\n                color=\"secondary\"\r\n                size={\"large\"}\r\n                onClick={props.handleMyLocationClick}\r\n              >\r\n                <MyLocationTwoTone style={{ marginRight: \"1rem\" }} />\r\n                My location\r\n              </Button>\r\n            </div>\r\n          }\r\n        ></OptionsPanel>\r\n        <Box className={classes.panel_item}>{props.children}</Box>\r\n      </div>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default ControlPanel;\r\n","import React, { useContext } from \"react\";\r\nimport {\r\n  Paper,\r\n  makeStyles,\r\n  Box,\r\n  Button,\r\n  Divider,\r\n  Tooltip\r\n} from \"@material-ui/core\";\r\nimport {\r\n  ImageSearchRounded,\r\n  CenterFocusStrong,\r\n  ZoomOutMap\r\n} from \"@material-ui/icons\";\r\nimport RadiusSlider from \"./RadiusSlider\";\r\nimport StateContext from \"../../context/stateContext\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  panel: {\r\n    textAlign: \"center\",\r\n    display: \"flex\",\r\n    flexFlow: \"column\"\r\n  },\r\n  panel_item: {\r\n    margin: \"8px\",\r\n    display: \"flex\"\r\n  },\r\n  wrapper: {\r\n    margin: \"0 0.5rem\"\r\n  },\r\n  divider: {\r\n    margin: \"1rem 0\"\r\n  },\r\n  control_icon: {\r\n    marginRight: \"1rem\"\r\n  },\r\n  search_photos_box: {\r\n    justifyContent: \"center\"\r\n  },\r\n  secondary_btn: {\r\n    margin: \"0 1rem\"\r\n  },\r\n  search_btn_box: {\r\n    margin: \"0.5rem 0\",\r\n    width: \"100%\"\r\n  }\r\n}));\r\n\r\nconst ControlPanelMobile = props => {\r\n  const classes = useStyles();\r\n  const store = useContext(StateContext);\r\n\r\n  const infoTextBox = `Zoom to the location that you want to search for photos and hit the search button.`;\r\n  // infoTextCircle is waiting for search by radius implementation\r\n  //   const infoTextCircle = `Drag the blue circle on the map to select the place where you want\r\n  // to search for photos, when done press the button below to make the request.`;\r\n\r\n  return (\r\n    <Paper className={classes.panel}>\r\n      <div className={classes.wrapper}>\r\n        {store.searchMethod === \"EXTENTS\" ? (\r\n          <>\r\n            <div>{infoTextBox}</div>\r\n            <Tooltip title=\"Search Photos\" aria-label=\"Search Photos\">\r\n              <Button\r\n                variant=\"contained\"\r\n                style={{ backgroundColor: \"#179207\" }}\r\n                size=\"large\"\r\n                onClick={props.searchFlikr}\r\n                className={classes.search_btn_box}\r\n              >\r\n                <ImageSearchRounded className={classes.control_icon} />\r\n                Search Photos\r\n              </Button>\r\n            </Tooltip>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <RadiusSlider setSearchRadius={props.setSearchRadius} />\r\n\r\n            <Divider className={classes.divider} />\r\n\r\n            <Box\r\n              className={classes.panel_item + \" \" + classes.search_photos_box}\r\n            >\r\n              <Tooltip title=\"Search Photos\" aria-label=\"Search Photos\">\r\n                <Button\r\n                  variant=\"contained\"\r\n                  style={{ backgroundColor: \"#179207\" }}\r\n                  size=\"medium\"\r\n                  onClick={props.searchFlikr}\r\n                  className={classes.secondary_btn}\r\n                >\r\n                  <ImageSearchRounded />\r\n                </Button>\r\n              </Tooltip>\r\n\r\n              <Tooltip\r\n                title=\"Move Search-Area to the Center of map\"\r\n                aria-label=\"Move Search-Area to the Center of map\"\r\n              >\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  size=\"medium\"\r\n                  className={classes.secondary_btn}\r\n                  onClick={props.centerSearchAreaOnMap}\r\n                >\r\n                  <CenterFocusStrong />\r\n                </Button>\r\n              </Tooltip>\r\n\r\n              <Tooltip\r\n                title=\"Zoom to Search-Area extents\"\r\n                aria-label=\"Zoom to Search-Area extents\"\r\n              >\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  size=\"medium\"\r\n                  className={classes.secondary_btn}\r\n                  onClick={props.zoomToSearchArea}\r\n                >\r\n                  <ZoomOutMap />\r\n                </Button>\r\n              </Tooltip>\r\n            </Box>\r\n          </>\r\n        )}\r\n      </div>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default ControlPanelMobile;\r\n","import React, { useState, useEffect, useContext, useCallback } from \"react\";\r\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\r\nimport * as FlikrApi from \"./requests/flikr\";\r\nimport MapWrapper from \"./components/map/mapContainer\";\r\nimport StateContext from \"./context/stateContext\";\r\nimport DispatchContext from \"./context/dispatchContext\";\r\nimport {\r\n  SET_BOUNDING_BOX,\r\n  // SET_RADIUS_MARKER,\r\n  SET_USER_LOCATION,\r\n  SET_SEARCH_CENTER,\r\n  SET_SEARCH_RADIUS,\r\n  SET_PHOTOS,\r\n  UPDATE_PHOTOS,\r\n  ADD_IMG_TO_FAVORITES,\r\n  REMOVE_IMG_FROM_FAVORITES\r\n} from \"./context/rootReducer\";\r\n\r\nimport Appbar from \"./components/appBar/appBar\";\r\nimport ImageGrid from \"./components/imageGrid/imageGrid\";\r\n\r\nimport LoadMoreButton from \"./components/controls/loadMoreBtn\";\r\nimport LoadingBar from \"./components/LoadingBar/loadingBar\";\r\nimport ControlPanel from \"./components/controlPanel/controlPanel\";\r\nimport ControlPanelMobile from \"./components/controlPanel/controlPanelMobile\";\r\n// import { find as _find } from \"lodash\";\r\n\r\nfunction App() {\r\n  const store = useContext(StateContext);\r\n  const dispatch = useContext(DispatchContext);\r\n\r\n  const screenWidth900px = useMediaQuery(\"(min-width:900px)\");\r\n\r\n  const resultsRef = React.useRef(null);\r\n\r\n  /**sorting filters for the results */\r\n  const [sortMethod, setSortMethod] = useState(\"date-posted-desc\");\r\n  const handeSelectSortMethod = event => {\r\n    setSortMethod(event.target.value);\r\n  };\r\n\r\n  /** option text for search */\r\n  const [searchText, setSearchText] = useState(\"\");\r\n  const handleTextQueryChange = (e, clearText) => {\r\n    setSearchText(e.target.value);\r\n  };\r\n  const clearTextQuery = () => setSearchText(\"\");\r\n\r\n  const [loadingPhotos, setLoadingPhotos] = useState(false);\r\n  const [triggerZoom, setTriggerZoom] = useState(false);\r\n  const [triggerCenter, setTriggerCenter] = useState(false);\r\n\r\n  const zoomToSearchArea = () => setTriggerZoom(true);\r\n  const disableZoom = useCallback(() => setTriggerZoom(false), [\r\n    setTriggerZoom\r\n  ]);\r\n  const centerSearchAreaOnMap = () => setTriggerCenter(true);\r\n  const disableCenter = useCallback(() => setTriggerCenter(false), [\r\n    setTriggerCenter\r\n  ]);\r\n\r\n  const [mapVisible, setMapVisible] = useState(true); //REFACTOR FOR MAP TO COLLAPSE (height:0) OR DELETE METHOD\r\n  const [responseDetails, setResponseDetails] = useState(null);\r\n\r\n  const [gridDirection, setGridDirection] = useState(\"row\");\r\n  const toggleGridDirection = () => {\r\n    setGridDirection(gridDirection === \"row\" ? \"column\" : \"row\");\r\n  };\r\n  /**explicitly hide appbar if the lightbox is open */\r\n  const [appBarHide, setAppBarHide] = useState(false);\r\n\r\n  /** Triggers plot photo on map  */\r\n  // const [triggerPhotoMarker, setTriggerPhotoMarker] = useState(false);\r\n  // const disableTriggerPhotoMarker = () => setTriggerPhotoMarker(false);\r\n\r\n  /** Markers trigger */\r\n  const [displayPhotoMarkers, setDisplayPhotoMarkers] = useState(true);\r\n  const togglePhotoMarkerDisplay = useCallback(() => {\r\n    setDisplayPhotoMarkers(!displayPhotoMarkers);\r\n  }, [setDisplayPhotoMarkers, displayPhotoMarkers]);\r\n\r\n  const [displayFavorites, setDisplayFavorites] = useState(true);\r\n  // const toggleFavorites = useCallback(() => {\r\n  //   setDisplayFavorites(!displayFavorites);\r\n  // }, [setDisplayFavorites, displayFavorites]);\r\n\r\n  const toggleFavorites = () => setDisplayFavorites(!displayFavorites);\r\n\r\n  // const addImgToFavorites = useCallback(\r\n  //   img => {\r\n  //     console.log(\"adding to favorites\");\r\n  //     dispatch({\r\n  //       type: ADD_IMG_TO_FAVORITES,\r\n  //       image: img\r\n  //     });\r\n  //   },\r\n  //   [dispatch]\r\n  // );\r\n\r\n  const imageToggleFavorites = useCallback(\r\n    (img, isFavorite) => {\r\n      console.log(isFavorite);\r\n      if (!isFavorite) {\r\n        dispatch({\r\n          type: ADD_IMG_TO_FAVORITES,\r\n          image: img\r\n        });\r\n      } else {\r\n        dispatch({\r\n          type: REMOVE_IMG_FROM_FAVORITES,\r\n          image: img\r\n        });\r\n      }\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  /* triggerPlotRadiusMarkerOnMap allows calling methods from anywhere inside mapContainer */\r\n  const [\r\n    triggerPlotRadiusMarkerOnMap,\r\n    setTtriggerPlotRadiusMarkerOnMap\r\n  ] = useState(false);\r\n\r\n  const disableRadiusTrigger = useCallback(\r\n    () => setTtriggerPlotRadiusMarkerOnMap(false),\r\n    [setTtriggerPlotRadiusMarkerOnMap]\r\n  );\r\n  /**Bounds */\r\n  // const [triggerBoundingBox, setTriggerBoundingBox] = useState(false);\r\n  // const pinBoundingBoxOnMap = () => setTriggerBoundingBox(true);\r\n  // const disableBoundingBoxTrigger = () => setTriggerBoundingBox(false);\r\n  const [triggerMapExtents, setTriggerMapExtents] = useState(false);\r\n  const disableMapExtentsTrigger = useCallback(\r\n    () => setTriggerMapExtents(false),\r\n    [setTriggerMapExtents]\r\n  );\r\n\r\n  // const getMapExtents = () => {\r\n  //   dispatch({\r\n  //     type: SET_BOUNDING_BOX,\r\n  //     bounds: window.map.getBounds().toJSON()\r\n  //   });\r\n  // };\r\n\r\n  const toggleMap = () => {\r\n    const prevState = mapVisible;\r\n    setMapVisible(!prevState);\r\n  };\r\n\r\n  const searchFlikr = () => {\r\n    console.log(\"fetching...\");\r\n    let searchParams;\r\n    // if (store.boundingBox) {\r\n    //   searchParams = { ...store.boundingBox, type: \"boundingBox\" };\r\n    // } else if (store.radiusMarker) {\r\n    //   searchParams = { ...store.radiusMarker, type: \"radiusMarker\" };\r\n    // } else {\r\n    //   searchParams = {\r\n    //     ...store.radiusMarker,\r\n    //     search: \"Search String goes here\"\r\n    //   };\r\n    // }\r\n    switch (store.searchMethod) {\r\n      case \"CIRCLE\":\r\n        searchParams = {\r\n          lat: store.searchCenter.lat,\r\n          lng: store.searchCenter.lng,\r\n          radius: store.searchRadius,\r\n          searchMethod: store.searchMethod,\r\n          resultsPerPage: store.resultsPerPage,\r\n          minUploadDate: store.minUploadDate,\r\n          maxUploadDate: store.maxUploadDate,\r\n          sortMethod,\r\n          searchText\r\n        };\r\n        break;\r\n      case \"EXTENTS\":\r\n        const bounds = window.map ? window.map.getBounds().toJSON() : \"error\";\r\n        console.log(bounds);\r\n        searchParams = {\r\n          searchMethod: store.searchMethod,\r\n          minUploadDate: store.minUploadDate,\r\n          maxUploadDate: store.maxUploadDate,\r\n          minTakenDate: store.minTakenDate,\r\n          maxTakenDate: store.maxTakenDate,\r\n          resultsPerPage: store.resultsPerPage,\r\n          bounds,\r\n          sortMethod,\r\n          searchText\r\n        };\r\n        break;\r\n      default:\r\n        console.log(\"invalid searchMethod\");\r\n        return;\r\n    }\r\n\r\n    setLoadingPhotos(true);\r\n    FlikrApi.getPhotosByTitle(searchParams)\r\n      .then(data => {\r\n        setLoadingPhotos(false);\r\n        setResponseDetails({\r\n          ...data\r\n        });\r\n        dispatch({\r\n          type: SET_PHOTOS,\r\n          photos: data.photos\r\n        });\r\n\r\n        /* if scrollIntoView is called syncronously there is a chance that the images are not loaded yet\r\n         * thus the body is still the same height and the element simply cannot be scrolled to. instead:\r\n         *  When the response is loaded wait 100ms for the body to resize (while image gallery loads),\r\n         * then scroll to the results (an empty div right above the results was used in order to avoid forwardingRefs)         *\r\n         */\r\n        window.setTimeout(() => {\r\n          resultsRef.current.scrollIntoView({\r\n            behavior: \"smooth\",\r\n            block: \"center\"\r\n          });\r\n        }, 100);\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n        setLoadingPhotos(false);\r\n      });\r\n  };\r\n\r\n  const fetchNextPage = () => {\r\n    console.log(\"fetching next page...\");\r\n    // let searchParams;\r\n    // if (responseDetails.query.type === \"boundingBox\") {\r\n    //   searchParams = { ...responseDetails.query };\r\n    // } else if (store.radiusMarker) {\r\n    //   searchParams = { ...responseDetails.query };\r\n    // }\r\n    const searchParams = {\r\n      ...responseDetails,\r\n      resultsPerPage: responseDetails.perPage\r\n    };\r\n    if (responseDetails.currentPage < responseDetails.totalPages) {\r\n      searchParams.page = responseDetails.currentPage + 1;\r\n    }\r\n    console.log(searchParams);\r\n    setLoadingPhotos(true);\r\n\r\n    FlikrApi.getPhotosByTitle(searchParams)\r\n      .then(data => {\r\n        setLoadingPhotos(false);\r\n\r\n        setResponseDetails({\r\n          ...data\r\n        });\r\n        dispatch({\r\n          type: UPDATE_PHOTOS,\r\n          photos: data.photos\r\n        });\r\n      })\r\n      .catch(error => {\r\n        setLoadingPhotos(false);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    //debugging only\r\n    console.log(store);\r\n    console.log(responseDetails); // IF RESPONSE DETAILS RETURNS ERROR THE APP CAN CRASH\r\n  }, [store, responseDetails]);\r\n\r\n  useEffect(() => {\r\n    //debugging only\r\n    console.log(store.filteredPhotos);\r\n  }, [store.filteredPhotos]);\r\n\r\n  useEffect(\r\n    () => {\r\n      /*fetch user location when app mounts*/\r\n      fetch(\"https://geoip-db.com/json/42e6a770-b3ac-11e9-80ca-c95181800da7\")\r\n        .then(res => res.json())\r\n        .then(position => {\r\n          dispatch({\r\n            type: SET_USER_LOCATION,\r\n            userLocation: { lat: position.latitude, lng: position.longitude }\r\n          });\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    // eslint-disable-next-line\r\n    []\r\n  );\r\n\r\n  const zoomToLocation = location => {\r\n    /** in case window.map is undefined (not loaded/initialized):\r\n     * mapReady() checks if google.maps is loaded before trying to zoom to the given location\r\n     * each time the check results to false it retries after 10ms, when the waitingTrheshold (3seconds) runs out it gives up\r\n     * (at this point google maps probably failed for some other reason, like network error, or auth problems...)\r\n     */\r\n    let waitingThreshold = 3000; //max number of milliseconds to wait for google.maps to initialize\r\n    const mapReady = () => {\r\n      if (waitingThreshold <= 0) {\r\n        stopTimer();\r\n      }\r\n      if (window.map) {\r\n        window.map.panTo(location);\r\n        window.map.setZoom(16);\r\n        stopTimer();\r\n      } else {\r\n        waitingThreshold -= 10;\r\n      }\r\n    };\r\n    const timer = setInterval(mapReady, 10);\r\n    const stopTimer = () => clearInterval(timer);\r\n  };\r\n\r\n  const handleMyLocationClick = () => {\r\n    if (store.userLocation) {\r\n      zoomToLocation(store.userLocation);\r\n    } else {\r\n      /* if geoip-db call failed or if it was blocked by an add-blocker use native geolocation API */\r\n      const success = position => {\r\n        zoomToLocation({\r\n          lat: position.coords.latitude,\r\n          lng: position.coords.longitude\r\n        });\r\n        dispatch({\r\n          type: SET_USER_LOCATION,\r\n          userLocation: {\r\n            lat: position.coords.latitude,\r\n            lng: position.coords.longitude\r\n          }\r\n        });\r\n      };\r\n      if (\"geolocation\" in navigator) {\r\n        navigator.geolocation.getCurrentPosition(success, err =>\r\n          console.log(err)\r\n        );\r\n      } else {\r\n        alert(\"Sorry geolocation is not supported by your broweser.\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const setBounds = useCallback(\r\n    bounds => {\r\n      dispatch({\r\n        type: SET_BOUNDING_BOX,\r\n        boundingBox: bounds\r\n      });\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  // const getRadiusMarkerCoordinates = marker => {\r\n  //   dispatch({\r\n  //     type: SET_RADIUS_MARKER,\r\n  //     radiusMarker: marker\r\n  //   });\r\n  // };\r\n\r\n  const setSearchCenter = useCallback(\r\n    center => {\r\n      dispatch({\r\n        type: SET_SEARCH_CENTER,\r\n        searchCenter: center\r\n      });\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const setSearchRadius = radius => {\r\n    dispatch({\r\n      type: SET_SEARCH_RADIUS,\r\n      searchRadius: radius\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Appbar\r\n        toggleMap={toggleMap}\r\n        appBarHide={appBarHide}\r\n        photos={responseDetails ? responseDetails.totalPages : 0}\r\n        toggleGridDirection={toggleGridDirection}\r\n        gridDirection={gridDirection}\r\n        handeSelectSortMethod={handeSelectSortMethod}\r\n        sortMethod={sortMethod}\r\n        handleTextQueryChange={handleTextQueryChange}\r\n        clearTextQuery={clearTextQuery}\r\n        searchText={searchText}\r\n        searchFlikr={searchFlikr}\r\n        handleMyLocationClick={handleMyLocationClick}\r\n        togglePhotoMarkerDisplay={togglePhotoMarkerDisplay}\r\n        toggleFavorites={toggleFavorites}\r\n        displayPhotoMarkers={displayPhotoMarkers}\r\n        displayFavorites={displayFavorites}\r\n      >\r\n        <section\r\n          style={\r\n            screenWidth900px\r\n              ? { display: \"flex\", height: \"calc(100vh - 7px - 64px)\" } //7px margins, 64appbar\r\n              : {\r\n                  display: \"flex\",\r\n                  height: \"calc(100vh - 7px - 64px )\",\r\n                  flexFlow: \"column\"\r\n                }\r\n          }\r\n        >\r\n          {screenWidth900px && (\r\n            <ControlPanel\r\n              setSearchRadius={setSearchRadius}\r\n              searchFlikr={searchFlikr}\r\n              loadingPhotos={loadingPhotos}\r\n              zoomToSearchArea={zoomToSearchArea}\r\n              centerSearchAreaOnMap={centerSearchAreaOnMap}\r\n              sortMethod={sortMethod}\r\n              handeSelectSortMethod={handeSelectSortMethod}\r\n              handleTextQueryChange={handleTextQueryChange}\r\n              clearTextQuery={clearTextQuery}\r\n              searchText={searchText}\r\n              zoomToLocation={zoomToLocation}\r\n              togglePhotoMarkerDisplay={togglePhotoMarkerDisplay}\r\n              toggleFavorites={toggleFavorites}\r\n              displayPhotoMarkers={displayPhotoMarkers}\r\n              displayFavorites={displayFavorites}\r\n              handleMyLocationClick={handleMyLocationClick}\r\n            ></ControlPanel>\r\n          )}\r\n          {/* {mapVisible && ()} */}\r\n          <MapWrapper\r\n            photos={store.mapPhotos}\r\n            favorites={store.favorites}\r\n            userLocation={store.userLocation}\r\n            setSearchCenter={setSearchCenter}\r\n            searchRadius={store.searchRadius}\r\n            // /** */\r\n            displayPhotoMarkers={displayPhotoMarkers}\r\n            displayFavorites={displayFavorites}\r\n            setBounds={setBounds}\r\n            // /**triggerGetMapExtents */\r\n            triggerMapExtents={triggerMapExtents}\r\n            disableMapExtentsTrigger={disableMapExtentsTrigger}\r\n            // /* photoMarker*/\r\n            // triggerPhotoMarker={triggerPhotoMarker}\r\n            // disableTriggerPhotoMarker={disableTriggerPhotoMarker}\r\n            // /* radius marker */\r\n            triggerPlotRadiusMarkerOnMap={triggerPlotRadiusMarkerOnMap}\r\n            disableRadiusTrigger={disableRadiusTrigger}\r\n            // /* boundingBox Trigger */\r\n            // // triggerBoundingBox={triggerBoundingBox}\r\n            // // disableBoundingBoxTrigger={disableBoundingBoxTrigger}\r\n            // /* triggeer zoom to search area */\r\n            triggerZoom={triggerZoom}\r\n            disableZoom={disableZoom}\r\n            // /* trigger center search area on map */\r\n            triggerCenter={triggerCenter}\r\n            disableCenter={disableCenter}\r\n            // /**ScreenSize */\r\n            screenWidth900px={screenWidth900px}\r\n          />\r\n\r\n          {!screenWidth900px && (\r\n            <ControlPanelMobile\r\n              setSearchRadius={setSearchRadius}\r\n              searchFlikr={searchFlikr}\r\n              loadingPhotos={loadingPhotos}\r\n              zoomToSearchArea={zoomToSearchArea}\r\n              centerSearchAreaOnMap={centerSearchAreaOnMap}\r\n              sortMethod={sortMethod}\r\n              handeSelectSortMethod={handeSelectSortMethod}\r\n              handleTextQueryChange={handleTextQueryChange}\r\n              searchText={searchText}\r\n            />\r\n          )}\r\n        </section>\r\n\r\n        <div ref={resultsRef}></div>\r\n        {store.filteredPhotos && (\r\n          <ImageGrid\r\n            photos={store.filteredPhotos}\r\n            hiddenPhotos={store.hiddenPhotos}\r\n            responseDetails={responseDetails}\r\n            direction={gridDirection}\r\n            imageToggleFavorites={imageToggleFavorites}\r\n            columns={2}\r\n            setAppBarHide={setAppBarHide}\r\n          />\r\n        )}\r\n\r\n        {responseDetails &&\r\n          responseDetails.currentPage < responseDetails.totalPages && (\r\n            <>\r\n              {loadingPhotos && <LoadingBar />}\r\n              <LoadMoreButton onClick={fetchNextPage} />\r\n            </>\r\n          )}\r\n      </Appbar>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Store from \"./context/store\";\n\nReactDOM.render(\n  <Store>\n    <CssBaseline />\n    <App />\n  </Store>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React, { useReducer } from \"react\";\r\n\r\nimport rootReducer from \"./rootReducer\";\r\nimport StateContext from \"./stateContext\";\r\nimport DispatchContext from \"./dispatchContext\";\r\n\r\nexport default function Store(props) {\r\n  const initialState = {\r\n    boundingBox: null,\r\n    radiusMarker: null,\r\n    //\r\n    searchMethod: \"EXTENTS\", // \"CIRCLE\" or \"BOX\"?\r\n    resultsPerPage: 30,\r\n    userLocation: null,\r\n    searchRadius: 3,\r\n    searchCenter: { lat: 48.80582620218145, lng: 2.1164958494489383 }, //paris, versailles,\r\n    photos: null,\r\n    filteredPhotos: null,\r\n    mapPhotos: [],\r\n    hiddenPhotos: [],\r\n    blockedUsers: [],\r\n    favorites: [],\r\n    minUploadDate: false,\r\n    maxUploadDate: false,\r\n    minTakenDate: false,\r\n    maxTakenDate: false\r\n  };\r\n\r\n  const [state, dispatch] = useReducer(rootReducer, initialState);\r\n\r\n  return (\r\n    <DispatchContext.Provider value={dispatch}>\r\n      <StateContext.Provider value={state}>\r\n        {props.children}\r\n      </StateContext.Provider>\r\n    </DispatchContext.Provider>\r\n  );\r\n}\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAlCAYAAAAjt+tHAAAACXBIWXMAAAsTAAALEwEAmpwYAAADSElEQVRYhc2XsU8TURzHP1ehKQWJgILEzRhhMUqLEqIDw90AXSAsBBYHRhKYmN39G2CDjYGhxOStCoEEjIYBiFGjCQGiULDApdQ7h75XrnB37eER/SUv13u/vvf93K+/+/X9NNu2ATAMowqIAFF5rSJcywMWkAMsIUQeQLNtW4lHgZgcUQkQCUnckgA5wJQjJ4TIa7quK/E4UC+vMa4nAiZwAhzJa049ZUyKNwshlkIWLjHDMLrlRwvIO0MfF0IsfRoZ4XhtDXNjI1ThWHs7tYkEQoglwzAeIX8GZ+LFgGsRBy7uqfIsorJdjWsRd4EoaqosDyvbg1jkXwlfpvhvAW729PDk2zfuvXp1yXd3YoKO7W2ahob+CkDTdb0RuA00CiGWljUNgC5Zop22UlODbZquPrWunHUVKm83sA/8cI3A/elp18XPTk9dxQGemmZFABfNFeBGfX3ZhVsDA6y1tpI/POQgnWY9kThf39hIcn+fZCZDVXOz7z6u9f53Nuu7aDOVoi2dLt43pFI0pFIsaxqJnR2qW1qKvuTuLqebm3xsb3fdyzUCn1++9BTfGhwsEXdal22XiCuraWvz3M/zLdh+/dp1/tfbt56b+VkkHg8G8H1ykuPV1UvzN1+8uBKAdXISDABgvbOTvampkrmHc3N8HR+/EkRgAIAvo6Ns9PaWzN3xyRE386sRFZXiwzdvWGttLd5/HRuruPAsV1f7+is+dp3t7LCZSnGrr4/s4mJhc03zLEzKX84CnfsyCwtkFhYuifxNaQ7l33BZ07DPzgKLhwYAsBKNcjA/H0jcCWCFAbHV3x/k65YCyDsGMY+aHYY59i5qRjhvl0yA2kTiWiDUsVyaKTUtTdf1KFAH3MKnMfk0MsLP2dmKxJqGh3kwM+Pqk4eRPSADZKsoRMCk0C4hmwZnaxYBEEK8A8pCKHHDMJ7LKZVfF1szE7AqaU6LZ3ghxKpfJBziSUpzy7s5LdOeq6uzfXvvBuEQ75BPqX5nJ4B7e+5nEixGIU/qJMQHJ4RD/LEUz8phKiEvKwvgAVGnIgE4nzxLAPGKAVwg6iXEqvQlpehREPFAABcg4nJEpStHIfQnQcQDAzggVFKqV1W9Yrkg4gB/AEq+djdASXN9AAAAAElFTkSuQmCC\""],"sourceRoot":""}