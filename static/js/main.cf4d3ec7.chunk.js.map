{"version":3,"sources":["requests/flikr.js","components/map/mapContainer.js","context/stateContext.js","context/dispatchContext.js","context/rootReducer.js","assets/logo.js","components/appBar/appBar.js","components/imageWrapper/imageWrapper.js","components/imageWrapper/imageMenu.js","components/imageGrid/imageGrid.js","components/controls/loadMoreBtn.js","components/LoadingBar/loadingBar.js","components/controlPanel/RadiusSlider.js","components/controlPanel/selectSortingMethod.js","components/controlPanel/textQuery.js","components/controlPanel/controlPanel.js","components/controlPanel/controlPanelMobile.js","App.js","serviceWorker.js","index.js","context/store.js","assets/PhotoMarker_20.svg"],"names":["getPhotosByTitle","searchParams","console","log","url","URLSearchParams","append","searchText","sortMethod","lat","lng","radius","page","fetch","then","res","json","currentPage","photos","totalPages","pages","totalPhotos","total","perPage","perpage","query","photo","map","img","dateupload","datetaken","ownername","geolocation","latitude","longitude","photoId","id","width_t","parseInt","width_c","width_h","width_l","width_m","width_o","height_c","height_h","height_l","height_m","height_o","height","width","src","url_l","url_m","url_o","title","alt","key","owner","thumb","url_t","srcSet","url_c","url_h","sizes","catch","err","getPhotoGeoLocation","photo_id","parseFloat","location","infoWindowContents","data","thumbnail","thumbWidth","mapStyle","border","maxWidth","boxSizing","minHeight","maxHeight","Map","state","boundingBox","selectionMarker","pinndedPhotos","handleGoogleMapsError","window","gm_authFailure","props","document","querySelector","innerHTML","createGoogleApiScript","userLocation","body","script","createElement","async","defer","onerror","write","insertBefore","lastElementChild","initMap","rome","google","maps","getElementById","center","zoom","gestureHandling","mapTypeId","MapTypeId","TERRAIN","streetViewControl","fullscreenControl","largeInfowindow","InfoWindow","addSearchCircle","event","addListenerOnce","getElementsByTagName","addPolygon","centerXY","toJSON","removePolygon","setBounds","zoomBounds","getBounds","northSouth","north","south","eastWest","east","west","boundsDynamic","removeMarker","rectangle","Rectangle","bounds","editable","draggable","setMap","getRadiusMarkerCoordinates","addListener","setState","polygon","addRadiusMarker","marker","Marker","position","animation","Animation","DROP","getPosition","pinPhotoMarkerOnMap","pin","customMarker","PhotoMarker_20","scale","icon","panTo","prevState","pins","push","this","setContent","open","photoMarker","searchCircle","Circle","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","searchRadius","SEARCHRADIUS","centerSearchCircle","setCenter","setSearchCenter","zoomToBounds","getCenter","fitBounds","prevProps","setRadius","waitingThreshold","timer","setInterval","stopTimer","setZoom","clearInterval","triggerPhotoMarker","disableTriggerPhotoMarker","triggerCenter","disableCenter","triggerZoom","disableZoom","role","aria-label","style","screenWidth900px","flexGrow","React","Component","StateContext","createContext","DispatchContext","SET_BOUNDING_BOX","SET_RADIUS_MARKER","SET_USER_LOCATION","SET_SEARCH_RADIUS","SET_SEARCH_CENTER","SET_PHOTOS","UPDATE_PHOTOS","BLOCK_USER","rootReducer","action","type","setBoundingBox","radiusMarker","setRadiusMarker","searchCenter","setUserLocation","setSearchRadius","filteredPhotos","blockedUsers","hiddenPhotos","setPhotos","newPhotosFiltered","filter","includes","newHiddenPhotos","concat","updatePhotos","updatedBlockedUsers","userId","blockUser","Logo","viewBox","cx","cy","r","fill","d","useStyles","makeStyles","theme","root","bottom","spacing","right","grow","color","icons_container","display","logo_container","cursor","alignItems","HideOnScroll","trigger","useScrollTrigger","Slide","appear","direction","in","appBarHide","children","ScrollTop","classes","disableHysteresis","threshold","Zoom","onClick","anchor","target","ownerDocument","scrollIntoView","behavior","block","className","HideAppBar","matches","useMediaQuery","Fragment","CssBaseline","AppBar","Toolbar","marginRight","Typography","variant","Tooltip","gridDirection","IconButton","toggleGridDirection","control_icon","toggleMap","Box","margin","Fab","size","KeyboardArrowUp","pin_to_map_btn","left","backgroundColor","boxShadow","options_btn","top","image","memo","index","pinPhotoOnMap","selected","openLightbox","handleOpenMenuClick","useState","hover","setHover","cont","overflow","container","onMouseEnter","e","bind","onMouseLeave","onTouchStart","setTimeout","heigth","call","MoreVert","result","MyLocationRounded","linkStyle","ImageMenu","dispatch","useContext","Menu","anchorEl","keepMounted","Boolean","onClose","handleMenuClose","MenuItem","photoData","Link","href","header_container","zIndex","justifyContent","transition","opacity","lightbox_btn","background","hide_on_idle","navButtonStyles","base","transform","ViewRenderer","getStyles","currentIndex","Math","abs","userSelect","CustomHeader","isModal","interactionIsIdle","carouselProps","btn_container_right","edge","modalProps","toggleFullscreen","isFullscreen","FullscreenExit","Fullscreen","Close","responseDetails","setAppBarHide","columns","currentImage","setCurrentImage","viewerIsOpen","setViewerIsOpen","useEffect","useCallback","setAnchorEl","setPhotoData","currentTarget","imageRenderer","component","marginTop","gutterBottom","length","renderImage","components","Header","View","views","x","srcset","caption","styles","navigationPrev","navigationNext","button","LoadMoreButton","Button","LoadingBar","LinearProgress","input","marginLeft","marginBottom","RadiusSlider","value","setValue","align","Slider","onChange","newValue","aria-labelledby","step","min","max","formControl","root_select","textAlign","SelectSortingMethod","FormControl","InputLabel","htmlFor","Select","handeSelectSortMethod","FormHelperText","TextQuery","handleSubmit","preventDefault","searchFlikr","onSubmit","Input","fullWidth","placeholder","handleTextQueryChange","endAdornment","InputAdornment","clearTextQuery","panel","flexFlow","panel_item","wrapper","divider","search_photos_box","secondary_btn","ControlPanel","Paper","ImageSearchRounded","Divider","centerSearchAreaOnMap","CenterFocusStrong","zoomToSearchArea","ZoomOutMap","ControlPanelMobile","App","store","resultsRef","useRef","setSortMethod","setSearchText","clearText","loadingPhotos","setLoadingPhotos","setTriggerZoom","setTriggerCenter","mapVisible","setMapVisible","setResponseDetails","setGridDirection","setTriggerPhotoMarker","triggerPlotRadiusMarkerOnMap","setTtriggerPlotRadiusMarkerOnMap","FlikrApi","current","END","offsetHeight","error","navigator","getCurrentPosition","coords","disableRadiusTrigger","ref","hostname","match","ReactDOM","render","useReducer","Provider","serviceWorker","ready","registration","unregister","module","exports"],"mappings":"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","file":"static/js/main.cf4d3ec7.chunk.js","sourcesContent":["/** *Flickrs API has got a bug -> even if you set radius units to km the geo-search is performed in miles\r\n * Since the UI is in km before each api call the radius is transformed from km to miles\r\n */\r\nconst kmToMiles = km => km / 1.609;\r\n\r\nexport const getPhotosByTitle = searchParams => {\r\n  /* This will ask flicker to fetch all photos (that have geolocation)\r\n    that contain the markers location title in any way (tag, image name, album name etc)\r\n    the photos returned will be within a 31km radius from the markers position\r\n    the func returns an array of photos details (id,farm,server etc)\r\n  */\r\n\r\n  console.log(searchParams);\r\n  //will be appended to response\r\n  let query;\r\n\r\n  let url = new URLSearchParams();\r\n  url.append(\"method\", \"flickr.photos.search\");\r\n  url.append(\"api_key\", \"f6536bb373bca1fcd14d4da1281f2839\");\r\n  // url.append('tags', marker.title); //text produces broader results than tags leave it for now may implement later\r\n  if (searchParams.searchText) url.append(\"text\", searchParams.searchText);\r\n  if (searchParams.sortMethod) url.append(\"sort\", searchParams.sortMethod);\r\n  // if (searchParams.type === \"boundingBox\") {\r\n  //   const { south, west, north, east } = searchParams;\r\n  //   query = { type: \"boundingBox\", south, west, north, east };\r\n  //   url.append(\"bbox\", `${west},${south},${east},${north}`);\r\n  // }\r\n\r\n  url.append(\"lat\", searchParams.lat);\r\n  url.append(\"lon\", searchParams.lng);\r\n  url.append(\"has_geo\", \"1\");\r\n  url.append(\"radius\", kmToMiles(searchParams.radius)); //1 to 32 km\r\n  // url.append(\"radius\", 0.310686); //1 to 31 km\r\n  url.append(\"radius_units\", \"km\");\r\n  url.append(\"per_page\", \"100\"); //250max for photos with geolocation\r\n  url.append(\"format\", \"json\");\r\n  url.append(\"nojsoncallback\", \"1\");\r\n  url.append(\r\n    \"extras\",\r\n    \"url_t,url_m,url_c,url_l,url_h,url_o,geo, date_upload, date_taken, owner_name\"\r\n  );\r\n  if (searchParams.page) url.append(\"page\", searchParams.page);\r\n\r\n  let arrayOfPhotos = fetch(\"https://api.flickr.com/services/rest/?\" + url)\r\n    .then(res => {\r\n      console.log(url);\r\n      return res.json().then(json => {\r\n        console.log(json);\r\n        // const test = {\r\n        //   ...json.photos,\r\n        //   photo: json.photos.photo.map(img => {\r\n        //     return {\r\n        //       ...img,\r\n        //       width_c: parseInt(img.width_c),\r\n        //       width_h: parseInt(img.width_h),\r\n        //       width_l: parseInt(img.width_l),\r\n        //       width_m: parseInt(img.width_m),\r\n        //       height_c: parseInt(img.height_c),\r\n        //       height_h: parseInt(img.height_h),\r\n        //       height_l: parseInt(img.height_l),\r\n        //       height_m: parseInt(img.height_m),\r\n        //       src: img.url_m, //flickr doesn't guarantee all sizes but medium will always be there\r\n        //       height: parseInt(img.height_m),\r\n        //       width: parseInt(img.width_m),\r\n        //       title: img.title,\r\n        //       alt: img.title,\r\n        //       key: img.id,\r\n        //       srcSet: [\r\n        //         `${img.url_m} ${img.width_m}w`,\r\n        //         `${img.url_c} ${img.width_c}w`,\r\n        //         `${img.url_l} ${img.width_l}w`,\r\n        //         `${img.url_h} ${img.width_h}w`\r\n        //       ],\r\n        //       sizes:\r\n        //         \"(min-width: 480px) 50vw, (min-width: 1024px) 33.3vw, 100vw\"\r\n        //     };\r\n        //   })\r\n        // };\r\n        // console.log(test);\r\n        return {\r\n          currentPage: json.photos.page,\r\n          totalPages: json.photos.pages,\r\n          totalPhotos: json.photos.total,\r\n          perPage: json.photos.perpage,\r\n          query,\r\n          photos: json.photos.photo.map(img => {\r\n            return {\r\n              // ...img,\r\n              dateupload: img.dateupload,\r\n              datetaken: img.datetaken,\r\n              ownername: img.ownername,\r\n              geolocation: { lat: img.latitude, lng: img.longitude },\r\n              photoId: img.id,\r\n              width_t: img.width_t ? parseInt(img.width_t) : \"\",\r\n              width_c: img.width_c ? parseInt(img.width_c) : \"\",\r\n              width_h: img.width_h ? parseInt(img.width_h) : \"\",\r\n              width_l: img.width_l ? parseInt(img.width_l) : \"\",\r\n              width_m: img.width_m ? parseInt(img.width_m) : \"\",\r\n              width_o: img.width_o ? parseInt(img.width_o) : \"\",\r\n              height_c: img.height_c ? parseInt(img.height_c) : \"\",\r\n              height_h: img.height_h ? parseInt(img.height_h) : \"\",\r\n              height_l: img.height_l ? parseInt(img.height_l) : \"\",\r\n              height_m: img.height_m ? parseInt(img.height_m) : \"\",\r\n              height_o: img.height_o ? parseInt(img.height_o) : \"\",\r\n              /* since you cant predict in what size will the photo be availiable:\r\n              if medium size is availiable use it if not get the original size\r\n              as fallback give the image 100px width and height */\r\n              height: img.height_m\r\n                ? parseInt(img.height_m)\r\n                : img.height_o\r\n                ? parseInt(img.height_o)\r\n                : 100,\r\n              width: img.width_m\r\n                ? parseInt(img.width_m)\r\n                : img.width_o\r\n                ? parseInt(img.width_o)\r\n                : 100,\r\n              src: img.url_l ? img.url_l : img.url_m ? img.url_m : img.url_o,\r\n              title: img.title,\r\n              alt: img.title,\r\n              key: img.id,\r\n              owner: img.owner,\r\n              thumb: img.url_t,\r\n              srcSet: [\r\n                img.url_m ? `${img.url_m} ${img.width_m}w` : \"\",\r\n                img.url_c ? `${img.url_c} ${img.width_c}w` : \"\",\r\n                img.url_l ? `${img.url_l} ${img.width_l}w` : \"\",\r\n                img.url_h ? `${img.url_h} ${img.width_h}w` : \"\",\r\n                img.url_o ? `${img.url_o} ${img.width_o}w` : \"\"\r\n              ],\r\n              sizes:\r\n                \"(min-width: 480px) 50vw, (min-width: 1024px) 33.3vw, 100vw\"\r\n            };\r\n          })\r\n        };\r\n      });\r\n    })\r\n    .catch(err => {\r\n      console.log(err);\r\n      return [\"error\"];\r\n    });\r\n\r\n  return arrayOfPhotos;\r\n};\r\n\r\nexport const flickrUrlConstructor = array => {\r\n  /* This takes the array of photo information from the getPhotosByTitle() \r\n  and transforms each photo to a straightforward url*/\r\n\r\n  let urlArr = {\r\n    default: [],\r\n    thumbNail: [], //t\r\n    medium: [], //c\r\n    large: [], //b\r\n    title: []\r\n  };\r\n  if (array[0] !== \"error\") {\r\n    for (let i = 0; i < array.length; i++) {\r\n      urlArr.default.push([\r\n        `https://farm${array[i].farm}.staticflickr.com/${array[i].server}/${array[i].id}_${array[i].secret}.jpg`,\r\n        array[i].id,\r\n        [array[i].title][0],\r\n        array[i].owner\r\n      ]);\r\n      urlArr.thumbNail.push([\r\n        `https://farm${array[i].farm}.staticflickr.com/${array[i].server}/${array[i].id}_${array[i].secret}_t.jpg`,\r\n        array[i].id,\r\n        [array[i].title][0]\r\n      ]);\r\n      urlArr.medium.push([\r\n        `https://farm${array[i].farm}.staticflickr.com/${array[i].server}/${array[i].id}_${array[i].secret}_c.jpg`,\r\n        array[i].id,\r\n        [array[i].title][0]\r\n      ]);\r\n      urlArr.large.push([\r\n        `https://farm${array[i].farm}.staticflickr.com/${array[i].server}/${array[i].id}_${array[i].secret}_b.jpg`,\r\n        array[i].id,\r\n        [array[i].title][0]\r\n      ]);\r\n      urlArr.title.push([array[i].title]);\r\n    }\r\n  } else {\r\n    urlArr = {\r\n      error: true,\r\n      default: [\"no-preview128px.png\"],\r\n      thumbNail: [\"no-preview128px.png\"], //t\r\n      medium: [\"no-preview128px.png\"], //c\r\n      large: [\"no-preview128px.png\"] //b\r\n    };\r\n  }\r\n  return urlArr;\r\n};\r\n\r\nexport const getPhotoGeoLocation = photo_id => {\r\n  /* This flicker api call returns a set of coordinates for a given photo\r\n    (Since there are no means to get the coordinates of a batch of photos)\r\n    this method must be called EACH TIME a new photograph marker is to be plotted on the map\r\n  */\r\n  let url = new URLSearchParams();\r\n  url.append(\"method\", \"flickr.photos.geo.getLocation\");\r\n  url.append(\"api_key\", \"f6536bb373bca1fcd14d4da1281f2839\");\r\n  url.append(\"format\", \"json\");\r\n  url.append(\"nojsoncallback\", \"1\");\r\n  url.append(\"photo_id\", photo_id);\r\n\r\n  let result = fetch(\"https://api.flickr.com/services/rest?\" + url)\r\n    .then(res => {\r\n      return res.json().then(json => {\r\n        console.log(json);\r\n        let position = {\r\n          lat: parseFloat(json.photo.location.latitude),\r\n          lng: parseFloat(json.photo.location.longitude)\r\n        };\r\n        return position;\r\n      });\r\n    })\r\n    .catch(err => {\r\n      console.log(err);\r\n      return [\"error\"];\r\n    });\r\n\r\n  return result;\r\n};\r\n","import React from \"react\";\r\nimport PhotoMarker_20 from \"../../assets/PhotoMarker_20.svg\";\r\n\r\nconst infoWindowContents = data => {\r\n  return `\r\n  <h1 style=\"font-size:1rem;text-align:center;\"> ${\r\n    data.title ? data.title : \"untitled photo\"\r\n  } </h1>\r\n  <img title=\"${\r\n    data.title ? data.title : \"untitled photo\"\r\n  }\" style=\"margin: 0 auto;display: block;cursor:pointer;\" \r\n    src=${data.thumbnail} alt=\"${data.title}\">\r\n  <a \r\n    title=\"open photo in flickr\"\r\n    style=\"background-color: #3f51b5;\r\n    width: ${data.thumbWidth}px;\r\n    color: white;\r\n    padding: 4px 5px;\r\n    text-align: center;\r\n    text-decoration: none;\r\n    display: inline-block;\r\n    text-align: center;\r\n    margin: 0 auto 0.5rem ;\r\n    display: block;\" \r\n    href=https://www.flickr.com/photos/${data.owner}/${data.id}\r\n    target=\"_blank\">View in flickr\r\n  </a>\r\n  `;\r\n};\r\n\r\n/*When the Map component mounts the following happen:\r\n * the google maps callback is 'tied' to the window obj (componentDidMount())\r\n * a script with the google maps api is created and inserted at the bottom of the body (createGoogleApiScript)\r\n * the callback func fires (initMap) and initializes google maps\r\n * then initMap creates the default markers (addDefaultMarkers) and the default infowindow\r\n *** At this point the App is ready for user interaction\r\n */\r\n\r\nconst mapStyle = {\r\n  width: \"100vw\",\r\n  // height: \"75vh\",\r\n  border: \"1px solid black\",\r\n  maxWidth: \"100%\",\r\n  boxSizing: \"border-box\",\r\n  minHeight: \"75vh\",\r\n  maxHeight: \"100%\"\r\n};\r\nclass Map extends React.Component {\r\n  state = {\r\n    boundingBox: null,\r\n    selectionMarker: null,\r\n    pinndedPhotos: []\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.initMap = this.initMap;\r\n    this.handleGoogleMapsError();\r\n    this.createGoogleApiScript(this.state.userLocation);\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    /**SET RADIUS IF IT CHANGED */\r\n    if (prevProps.searchRadius !== this.props.searchRadius) {\r\n      this.searchCircle.setRadius(this.props.searchRadius * 1000);\r\n    }\r\n    console.log(\"map updated\");\r\n\r\n    /*when the user location changes pan the map to it\r\n    (either when the response comes from geoip-db or if the user sets it explicitly)*/\r\n    if (prevProps.userLocation !== this.props.userLocation) {\r\n      /**  even though the component has mounted and is currently in re-render(update) phase\r\n       * window.map can be undefined (especially on first load where google.maps api is not cached and is not fully initialized)\r\n       * so there is a slim chance that window.map.panTo will run before google.maps is fully loaded thus trowing an error\r\n       * The following ugly code checks if google.maps is loaded before trying to zoom/add SearchCircle to the users location\r\n       * each time the check results to false it retries after 10ms, when the waitingTrheshold (3seconds) runs out it gives up\r\n       * (at this point google maps probably failed for some other reason, like network error, or auth problems...)\r\n       */\r\n      let waitingThreshold = 3000; //max number of milliseconds to wait for google.maps to initialize\r\n      const mapReady = () => {\r\n        if (waitingThreshold <= 0) {\r\n          stopTimer();\r\n        }\r\n        if (window.map) {\r\n          window.map.panTo(this.props.userLocation);\r\n          this.addSearchCircle(this.props.userLocation);\r\n          window.map.setZoom(12);\r\n          stopTimer();\r\n        } else {\r\n          waitingThreshold -= 10;\r\n        }\r\n      };\r\n      const timer = setInterval(mapReady, 10);\r\n      const stopTimer = () => clearInterval(timer);\r\n    }\r\n\r\n    if (this.props.triggerPhotoMarker) {\r\n      this.pinPhotoMarkerOnMap(this.props.triggerPhotoMarker);\r\n      this.props.disableTriggerPhotoMarker();\r\n    }\r\n\r\n    if (this.props.triggerCenter) {\r\n      this.searchCircle.setCenter(window.map.getCenter().toJSON());\r\n      this.props.disableCenter();\r\n    }\r\n\r\n    if (this.props.triggerZoom) {\r\n      this.zoomToBounds();\r\n      this.props.disableZoom();\r\n    }\r\n\r\n    // if (this.props.triggerPlotRadiusMarkerOnMap) {\r\n    //   this.addRadiusMarker();\r\n    //   this.props.disableRadiusTrigger();\r\n    // }\r\n    // if (this.props.triggerBoundingBox) {\r\n    //   this.addPolygon();\r\n    //   this.props.disableBoundingBoxTrigger();\r\n    // }\r\n  }\r\n\r\n  handleGoogleMapsError = () => {\r\n    /* google maps method for handling authentication errors\r\n     * more on: https://developers.google.com/maps/documentation/javascript/events#auth-errors*/\r\n    window.gm_authFailure = () => {\r\n      this.props.handleGoogleMapsError();\r\n      document.querySelector(\".gm-err-title\").innerHTML =\r\n        \"Oops it seems there was a problem loading Google Maps!\";\r\n      document.querySelector(\".gm-err-message\").innerHTML =\r\n        \"Failed to authenticate Google Maps, please try again later\";\r\n    };\r\n  };\r\n\r\n  createGoogleApiScript = userLocation => {\r\n    let body = window.document.querySelector(\"body\");\r\n    let script = window.document.createElement(\"script\");\r\n    script.src =\r\n      \"https://maps.googleapis.com/maps/api/js?key=AIzaSyCzs3fKNRPknPJs8LaW9rsCvBxeY2QCJhg&v=3&callback=initMap\";\r\n    script.async = true;\r\n    script.defer = true;\r\n    script.onerror = function() {\r\n      document.write(\"Error Loading Google Maps...\");\r\n    };\r\n    body.insertBefore(script, body.lastElementChild);\r\n  };\r\n\r\n  initMap = () => {\r\n    console.log(\"Google Maps API Loaded...\");\r\n    const rome = {\r\n      lat: 41.890384586382844,\r\n      lng: 12.492241690388028\r\n    }; //Rome, colosseo\r\n    window.map = new window.google.maps.Map(\r\n      document.getElementById(\"map-container\"),\r\n      {\r\n        center: rome, //Rome, colosseo\r\n        zoom: 10,\r\n        gestureHandling: \"cooperative\",\r\n        mapTypeId: window.google.maps.MapTypeId.TERRAIN,\r\n        streetViewControl: false,\r\n        fullscreenControl: false\r\n      }\r\n    );\r\n    window.largeInfowindow = new window.google.maps.InfoWindow({\r\n      maxWidth: 200\r\n    });\r\n\r\n    this.addSearchCircle(rome);\r\n\r\n    window.google.maps.event.addListenerOnce(window.map, \"idle\", () => {\r\n      document.getElementsByTagName(\"iframe\")[0].title = \"Google Maps\";\r\n      /* https://stackoverflow.com/questions/49012240/google-maps-js-iframe-title \r\n            used to pass the (false possitive) accessibility audits */\r\n    });\r\n  };\r\n\r\n  /*** ADDING POLYGON + add marker*/\r\n  addPolygon = () => {\r\n    const centerXY = window.map.center.toJSON();\r\n    /** fixed size roughly 2x2 km box  **/\r\n    // const km = 0.009;\r\n    // const boundsStatic = {\r\n    //   north: centerXY.lat + km,\r\n    //   south: centerXY.lat - km,\r\n    //   east: centerXY.lng + km,\r\n    //   west: centerXY.lng - km\r\n    // };\r\n\r\n    /** dyniamic based on zoom level roughly 25% of map width/height  **/\r\n    if (this.state.boundingBox) {\r\n      this.removePolygon();\r\n      this.props.setBounds(null);\r\n      // this.setState({ polygon: null });\r\n    } else {\r\n      const zoomBounds = window.map.getBounds().toJSON();\r\n      const northSouth = (zoomBounds.north - zoomBounds.south) / 5;\r\n      const eastWest = (zoomBounds.east - zoomBounds.west) / 5;\r\n      const boundsDynamic = {\r\n        north: centerXY.lat + northSouth,\r\n        south: centerXY.lat - northSouth,\r\n        east: centerXY.lng + eastWest,\r\n        west: centerXY.lng - eastWest\r\n      };\r\n      //if there is a polygon /or a marker on the screen remove it\r\n      this.removePolygon();\r\n      this.removeMarker();\r\n      // Define a rectangle and set its editable property to true.\r\n      this.rectangle = new window.google.maps.Rectangle({\r\n        bounds: boundsDynamic,\r\n        editable: true,\r\n        draggable: true\r\n      });\r\n      this.rectangle.setMap(window.map);\r\n      this.props.getRadiusMarkerCoordinates(null);\r\n      this.props.setBounds(boundsDynamic);\r\n      this.rectangle.addListener(\"bounds_changed\", () =>\r\n        this.props.setBounds(this.rectangle.bounds.toJSON())\r\n      );\r\n      this.setState({ boundingBox: this.rectangle });\r\n      window.polygon = this.rectangle;\r\n    }\r\n  };\r\n\r\n  removeMarker = () => {\r\n    if (this.state.selectionMarker) {\r\n      this.state.selectionMarker.setMap(null);\r\n      this.setState({ selectionMarker: null });\r\n    }\r\n  };\r\n\r\n  removePolygon = () => {\r\n    if (this.state.boundingBox) {\r\n      this.state.boundingBox.setMap(null);\r\n      this.setState({ boundingBox: null });\r\n    }\r\n  };\r\n\r\n  addRadiusMarker = location => {\r\n    if (this.state.selectionMarker) {\r\n      this.removeMarker();\r\n      this.props.getRadiusMarkerCoordinates(null);\r\n    } else {\r\n      //if a specific location is passed as arg, place the marker at that coords. If no args are passed use center of map\r\n      const centerXY = location ? location : window.map.center.toJSON();\r\n      //if marker/polygon already exists remove it\r\n      this.removeMarker();\r\n      this.removePolygon();\r\n\r\n      let marker = new window.google.maps.Marker({\r\n        position: centerXY,\r\n        map: window.map,\r\n        title: \"Test\",\r\n        draggable: true,\r\n        animation: window.google.maps.Animation.DROP\r\n      });\r\n      marker.addListener(\"dragend\", () =>\r\n        this.props.getRadiusMarkerCoordinates(marker.getPosition().toJSON())\r\n      );\r\n      this.setState({ selectionMarker: marker });\r\n      this.props.setBounds(null);\r\n      this.props.getRadiusMarkerCoordinates(marker.getPosition().toJSON());\r\n      window.marker = marker;\r\n    }\r\n  };\r\n\r\n  pinPhotoMarkerOnMap = pin => {\r\n    console.log(pin);\r\n    const customMarker = {\r\n      url: PhotoMarker_20,\r\n      scale: 0.1\r\n    };\r\n\r\n    let marker = new window.google.maps.Marker({\r\n      position: pin.position,\r\n      map: window.map,\r\n      icon: customMarker,\r\n      title: pin.title,\r\n      animation: window.google.maps.Animation.DROP\r\n    });\r\n\r\n    window.map.panTo(marker.getPosition());\r\n\r\n    this.setState(prevState => {\r\n      const pins = prevState.pinndedPhotos;\r\n      pins.push(marker);\r\n      return { pinndedPhotos: pins };\r\n    });\r\n\r\n    marker.addListener(\"click\", function() {\r\n      window.map.panTo(this.getPosition());\r\n      // window.largeInfowindow.setContent(\"test\");\r\n      window.largeInfowindow.setContent(infoWindowContents(pin));\r\n\r\n      // window.map.setZoom(14);\r\n      // window.map.openInfoWindow(marker, window.largeInfowindow);\r\n      window.largeInfowindow.open(window.map, marker);\r\n      // toggleBounce();\r\n    });\r\n    window.photoMarker = marker;\r\n\r\n    // marker.addListener('click', function() {\r\n    //   infowindow.open(map, marker);\r\n    // });\r\n  };\r\n\r\n  addSearchCircle = center => {\r\n    this.searchCircle = new window.google.maps.Circle({\r\n      strokeColor: \"#0e2a99\",\r\n      strokeOpacity: 0.8,\r\n      strokeWeight: 2,\r\n      fillColor: \"#64b1e8\",\r\n      fillOpacity: 0.35,\r\n      map: window.map,\r\n      center: center ? center : { lat: 48.8, lng: 2.29 },\r\n      radius: this.props.searchRadius * 1000, //radius in store is in KM radius in maps is meters\r\n      draggable: true\r\n    });\r\n    window.SEARCHRADIUS = this.searchCircle; //DEBUGGING ONLY\r\n\r\n    /** a circle bound to the center of searchCircle,\r\n     * its only purpose is to graphically represent searchCircle's center */\r\n    this.centerSearchCircle = new window.google.maps.Circle({\r\n      strokeColor: \"#0e0047\",\r\n      strokeOpacity: 0.8,\r\n      strokeWeight: 3,\r\n      fillColor: \"#0e0047\",\r\n      fillOpacity: 0.35,\r\n      map: window.map,\r\n      center: this.searchCircle.center.toJSON(),\r\n      radius: 10\r\n    });\r\n\r\n    // window.testCENTER = this.centerSearchRadius;\r\n\r\n    this.searchCircle.addListener(\"drag\", () => {\r\n      this.centerSearchCircle.setCenter(this.searchCircle.center.toJSON());\r\n      // console.log(this.searchRadius.center.toJSON());\r\n    });\r\n\r\n    this.searchCircle.addListener(\"dragend\", () => {\r\n      this.props.setSearchCenter(this.searchCircle.center.toJSON());\r\n    });\r\n    this.searchCircle.addListener(\"center_changed\", () => {\r\n      this.props.setSearchCenter(this.searchCircle.center.toJSON());\r\n      this.centerSearchCircle.setCenter(this.searchCircle.center.toJSON());\r\n    });\r\n  };\r\n\r\n  zoomToBounds = () => {\r\n    const km = 0.009; //roughtly one km in degrees of lat/lng\r\n    const center = this.searchCircle.getCenter().toJSON();\r\n    const bounds = {\r\n      north: center.lat + km * this.props.searchRadius,\r\n      south: center.lat - km * this.props.searchRadius,\r\n      east: center.lng + km * this.props.searchRadius,\r\n      west: center.lng - km * this.props.searchRadius\r\n    };\r\n    console.log(bounds);\r\n    window.map.fitBounds(bounds);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        role=\"application\"\r\n        aria-label=\"Map\"\r\n        id=\"map-container\"\r\n        style={\r\n          this.props.screenWidth900px\r\n            ? mapStyle\r\n            : {\r\n                ...mapStyle,\r\n                minHeight: \"50vh\",\r\n                flexGrow: \"1\"\r\n              }\r\n        }\r\n      ></div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Map;\r\n","import React from \"react\";\r\n\r\nconst StateContext = React.createContext();\r\n\r\nexport default StateContext;\r\n","import React from \"react\";\r\n\r\nconst DispatchContext = React.createContext();\r\n\r\nexport default DispatchContext;\r\n","export const SET_BOUNDING_BOX = \"SET_BOUNDING_BOX\";\r\nexport const SET_RADIUS_MARKER = \"SET_RADIUS_MARKER\";\r\n\r\nexport const SET_USER_LOCATION = \"SET_USER_LOCATION\";\r\nexport const SET_SEARCH_RADIUS = \"SET_SEARCH_RADIUS\";\r\nexport const SET_SEARCH_CENTER = \"SET_SEARCH_CENTER\";\r\nexport const SET_PHOTOS = \"SET_PHOTOS\";\r\nexport const UPDATE_PHOTOS = \"UPDATE_PHOTOS\";\r\nexport const BLOCK_USER = \"BLOCK_USER\";\r\n\r\nconst setBoundingBox = (action, state) => {\r\n  return { ...state, boundingBox: action.boundingBox };\r\n};\r\n\r\nconst setRadiusMarker = (action, state) => {\r\n  return { ...state, radiusMarker: action.radiusMarker };\r\n};\r\n\r\nconst setUserLocation = (action, state) => {\r\n  return {\r\n    ...state,\r\n    userLocation: action.userLocation,\r\n    searchCenter: action.userLocation\r\n  };\r\n};\r\n\r\nconst setSearchRadius = (action, state) => {\r\n  return { ...state, searchRadius: action.searchRadius };\r\n};\r\n\r\nconst setSearchCenter = (action, state) => {\r\n  return { ...state, searchCenter: action.searchCenter };\r\n};\r\n\r\nconst setPhotos = (action, state) => {\r\n  /* currently setPhotos resets blocked users (initial request) */\r\n  return {\r\n    ...state,\r\n    photos: action.photos,\r\n    filteredPhotos: action.photos,\r\n    blockedUsers: [],\r\n    hiddenPhotos: []\r\n  };\r\n};\r\n\r\nconst updatePhotos = (action, state) => {\r\n  /** updatePhotos will expand the previous query of photos (previous results + new results) */\r\n  const newPhotosFiltered = action.photos.filter(\r\n    photo => !state.blockedUsers.includes(photo.owner)\r\n  );\r\n  const newHiddenPhotos = action.photos.filter(photo =>\r\n    state.blockedUsers.includes(photo.owner)\r\n  );\r\n  const filteredPhotos = state.filteredPhotos.concat(newPhotosFiltered);\r\n  const hiddenPhotos = state.hiddenPhotos.concat(newHiddenPhotos);\r\n  const photos = state.photos.concat(action.photos);\r\n\r\n  return { ...state, photos, filteredPhotos, hiddenPhotos };\r\n};\r\n\r\nconst blockUser = (action, state) => {\r\n  const updatedBlockedUsers = state.blockedUsers.concat(action.userId);\r\n  // const filteredPhotos = state.filteredPhotos.concat(newPhotosFiltered);\r\n  const filteredPhotos = state.filteredPhotos.filter(\r\n    photo => !updatedBlockedUsers.includes(photo.owner)\r\n  );\r\n  const hiddenPhotos = state.photos.filter(photo =>\r\n    updatedBlockedUsers.includes(photo.owner)\r\n  );\r\n  return {\r\n    ...state,\r\n    blockedUsers: updatedBlockedUsers,\r\n    filteredPhotos,\r\n    hiddenPhotos\r\n  };\r\n};\r\n\r\nexport const rootReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case SET_BOUNDING_BOX:\r\n      console.log(action.type);\r\n      return setBoundingBox(action, state);\r\n    case SET_RADIUS_MARKER:\r\n      console.log(action.type);\r\n      return setRadiusMarker(action, state);\r\n    //new ones\r\n    case SET_USER_LOCATION:\r\n      console.log(action.type);\r\n      return setUserLocation(action, state);\r\n    case SET_SEARCH_RADIUS:\r\n      console.log(action.type);\r\n      return setSearchRadius(action, state);\r\n    case SET_SEARCH_CENTER:\r\n      console.log(action.type);\r\n      return setSearchCenter(action, state);\r\n    case SET_PHOTOS:\r\n      console.log(action.type);\r\n      return setPhotos(action, state);\r\n    case UPDATE_PHOTOS:\r\n      console.log(action.type);\r\n      return updatePhotos(action, state);\r\n    case BLOCK_USER:\r\n      console.log(action.type);\r\n      return blockUser(action, state);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default rootReducer;\r\n","import React from \"react\";\r\n\r\nconst Logo = props => (\r\n  <svg viewBox=\"0 0 448 448\" {...props}>\r\n    <circle cx={106.667} cy={127.973} r={106.667} fill=\"#2196f3\" />\r\n    <circle cx={341.333} cy={127.973} r={106.667} fill=\"#ec407a\" />\r\n    <g fill=\"#455a64\">\r\n      <path d=\"M32 426.64c-5.891 0-10.667-4.776-10.667-10.667V330.64c0-17.673 14.327-32 32-32H64c5.891 0 10.667 4.776 10.667 10.667S69.891 319.973 64 319.973H53.333c-5.891 0-10.667 4.776-10.667 10.667v85.333c.001 5.891-4.775 10.667-10.666 10.667z\" />\r\n      <path d=\"M64 362.64H10.667C4.776 362.64 0 357.864 0 351.973s4.776-10.667 10.667-10.667H64c5.891 0 10.667 4.776 10.667 10.667S69.891 362.64 64 362.64zM96 426.64c-5.891 0-10.667-4.776-10.667-10.667V309.306c0-5.891 4.776-10.667 10.667-10.667s10.667 4.776 10.667 10.667v106.667c0 5.891-4.776 10.667-10.667 10.667zM138.667 426.64c-5.891 0-10.667-4.776-10.667-10.667v-64c0-5.891 4.776-10.667 10.667-10.667s10.667 4.776 10.667 10.667v64c-.001 5.891-4.776 10.667-10.667 10.667zM213.333 426.64c-23.564 0-42.667-19.103-42.667-42.667s19.103-42.667 42.667-42.667a50.366 50.366 0 0140.384 14.72c3.652 4.624 2.864 11.334-1.76 14.987-4.624 3.652-11.334 2.865-14.987-1.76a33.21 33.21 0 00-23.637-6.613c-11.782 0-21.333 9.551-21.333 21.333 0 11.782 9.551 21.333 21.333 21.333a36.905 36.905 0 0024.576-7.659c4.234-3.978 10.873-3.836 14.933.32 4.066 4.148 4.066 10.786 0 14.933a56.658 56.658 0 01-39.509 13.74zM288 426.64c-5.891 0-10.667-4.776-10.667-10.667V309.306c0-5.891 4.776-10.667 10.667-10.667s10.667 4.776 10.667 10.667v106.667c0 5.891-4.776 10.667-10.667 10.667z\" />\r\n      <path d=\"M330.667 426.64a10.663 10.663 0 01-7.552-3.115l-42.667-42.667c-4.17-4.162-4.176-10.915-.014-15.085.499-.5 1.047-.95 1.636-1.342l32-21.333c4.901-3.27 11.525-1.947 14.795 2.955s1.947 11.525-2.955 14.795l-21.163 14.123 33.451 33.472c4.159 4.172 4.149 10.926-.024 15.085a10.672 10.672 0 01-7.507 3.112zM373.333 426.64c-5.891 0-10.667-4.776-10.667-10.667v-64c0-5.891 4.776-10.667 10.667-10.667S384 346.082 384 351.973v64c0 5.891-4.776 10.667-10.667 10.667z\" />\r\n      <path d=\"M373.333 405.306c-5.891 0-10.667-4.776-10.667-10.667 0-29.455 23.878-53.333 53.333-53.333 5.891 0 10.667 4.776 10.667 10.667s-4.776 10.667-10.667 10.667c-17.673 0-32 14.327-32 32 .001 5.891-4.775 10.666-10.666 10.666zM139.093 319.973c-5.891 0-10.667-4.776-10.667-10.667s4.776-10.667 10.667-10.667h.213c5.891 0 10.667 4.776 10.667 10.667s-4.776 10.667-10.667 10.667h-.213z\" />\r\n    </g>\r\n    <path d=\"M106.667 234.64C47.756 234.64 0 186.883 0 127.973S47.756 21.306 106.667 21.306s106.667 47.756 106.667 106.667c-.071 58.881-47.786 106.596-106.667 106.667zm0-192c-47.128 0-85.333 38.205-85.333 85.333s38.205 85.333 85.333 85.333S192 175.101 192 127.973 153.795 42.64 106.667 42.64zM341.333 234.64c-58.91 0-106.667-47.756-106.667-106.667S282.423 21.306 341.333 21.306 448 69.063 448 127.973c-.07 58.881-47.786 106.596-106.667 106.667zm0-192C294.205 42.64 256 80.845 256 127.973s38.205 85.333 85.333 85.333 85.333-38.205 85.333-85.333-38.204-85.333-85.333-85.333zM32 426.64c-5.891 0-10.667-4.776-10.667-10.667V330.64c0-17.673 14.327-32 32-32H64c5.891 0 10.667 4.776 10.667 10.667S69.891 319.973 64 319.973H53.333c-5.891 0-10.667 4.776-10.667 10.667v85.333c.001 5.891-4.775 10.667-10.666 10.667z\" />\r\n    <path d=\"M64 362.64H10.667C4.776 362.64 0 357.864 0 351.973s4.776-10.667 10.667-10.667H64c5.891 0 10.667 4.776 10.667 10.667S69.891 362.64 64 362.64zM96 426.64c-5.891 0-10.667-4.776-10.667-10.667V309.306c0-5.891 4.776-10.667 10.667-10.667s10.667 4.776 10.667 10.667v106.667c0 5.891-4.776 10.667-10.667 10.667zM138.667 426.64c-5.891 0-10.667-4.776-10.667-10.667v-64c0-5.891 4.776-10.667 10.667-10.667s10.667 4.776 10.667 10.667v64c-.001 5.891-4.776 10.667-10.667 10.667zM213.333 426.64c-23.564 0-42.667-19.103-42.667-42.667s19.103-42.667 42.667-42.667a50.39 50.39 0 0140.363 14.699c3.658 4.619 2.88 11.328-1.739 14.987-4.619 3.658-11.328 2.88-14.987-1.739a33.21 33.21 0 00-23.637-6.613c-11.782 0-21.333 9.551-21.333 21.333 0 11.782 9.551 21.333 21.333 21.333a36.93 36.93 0 0024.576-7.659c4.234-3.978 10.873-3.836 14.933.32 4.066 4.148 4.066 10.786 0 14.933a56.616 56.616 0 01-39.509 13.74zM288 426.64c-5.891 0-10.667-4.776-10.667-10.667V309.306c0-5.891 4.776-10.667 10.667-10.667s10.667 4.776 10.667 10.667v106.667c0 5.891-4.776 10.667-10.667 10.667z\" />\r\n    <path d=\"M330.667 426.64a10.663 10.663 0 01-7.552-3.115l-42.667-42.667c-4.17-4.162-4.176-10.915-.014-15.085.499-.5 1.047-.95 1.636-1.342l32-21.333c4.901-3.27 11.525-1.947 14.795 2.955s1.947 11.525-2.955 14.795l-21.184 14.123 33.472 33.472c4.159 4.172 4.149 10.926-.024 15.085a10.672 10.672 0 01-7.507 3.112zM373.333 426.64c-5.891 0-10.667-4.776-10.667-10.667v-64c0-5.891 4.776-10.667 10.667-10.667S384 346.082 384 351.973v64c0 5.891-4.776 10.667-10.667 10.667z\" />\r\n    <path d=\"M373.333 405.306c-5.891 0-10.667-4.776-10.667-10.667 0-29.455 23.878-53.333 53.333-53.333 5.891 0 10.667 4.776 10.667 10.667s-4.776 10.667-10.667 10.667c-17.673 0-32 14.327-32 32 .001 5.891-4.775 10.666-10.666 10.666zM139.093 319.973c-5.891 0-10.667-4.776-10.667-10.667 0-5.85 4.711-10.608 10.56-10.667h.213c5.891 0 10.667 4.776 10.667 10.667s-4.776 10.667-10.667 10.667h-.106z\" />\r\n  </svg>\r\n);\r\n\r\nexport default Logo;\r\n","import React from \"react\";\r\nimport {\r\n  AppBar,\r\n  Toolbar,\r\n  Typography,\r\n  CssBaseline,\r\n  useScrollTrigger,\r\n  Box,\r\n  Slide,\r\n  useMediaQuery,\r\n  Zoom,\r\n  Fab,\r\n  IconButton,\r\n  Tooltip,\r\n  makeStyles\r\n} from \"@material-ui/core/\";\r\nimport {\r\n  KeyboardArrowUp,\r\n  Map,\r\n  ViewStream as Rows,\r\n  ViewWeek as Columns\r\n} from \"@material-ui/icons/\";\r\nimport Logo from \"../../assets/logo\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    position: \"fixed\",\r\n    bottom: theme.spacing(2),\r\n    right: theme.spacing(2)\r\n  },\r\n  grow: {\r\n    flexGrow: 1,\r\n    color: \"red\",\r\n    width: \"100px\"\r\n  },\r\n  icons_container: {\r\n    display: \"flex\"\r\n  },\r\n  logo_container: {\r\n    cursor: \"pointer\",\r\n    display: \"flex\",\r\n    alignItems: \"center\"\r\n  }\r\n}));\r\n\r\nfunction HideOnScroll(props) {\r\n  const trigger = useScrollTrigger();\r\n  return (\r\n    <Slide\r\n      appear={false}\r\n      direction=\"down\"\r\n      /* if appBarHide is true hide the appbar otherwise leave useScrollTrigger to deal with it */\r\n      in={props.appBarHide ? false : !trigger}\r\n    >\r\n      {props.children}\r\n    </Slide>\r\n  );\r\n}\r\n\r\nfunction ScrollTop(props) {\r\n  const { children } = props;\r\n  const classes = useStyles();\r\n  const trigger = useScrollTrigger({\r\n    disableHysteresis: true,\r\n    threshold: 100\r\n  });\r\n\r\n  const handleClick = event => {\r\n    const anchor = (event.target.ownerDocument || document).querySelector(\r\n      \"#back-to-top-anchor\"\r\n    );\r\n\r\n    if (anchor) {\r\n      anchor.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Zoom in={trigger}>\r\n      <div onClick={handleClick} role=\"presentation\" className={classes.root}>\r\n        {children}\r\n      </div>\r\n    </Zoom>\r\n  );\r\n}\r\n\r\nexport default function HideAppBar(props) {\r\n  const matches = useMediaQuery(\"(min-width:1200px)\");\r\n  const classes = useStyles();\r\n\r\n  const scrollToTop = event => {\r\n    const anchor = (event.target.ownerDocument || document).querySelector(\r\n      \"#back-to-top-anchor\"\r\n    );\r\n    if (anchor) {\r\n      anchor.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <CssBaseline />\r\n      <HideOnScroll appBarHide={props.appBarHide} {...props}>\r\n        <AppBar>\r\n          <Toolbar>\r\n            <div className={classes.logo_container} onClick={scrollToTop}>\r\n              <Logo\r\n                style={{ width: \"40px\", marginRight: \"0.75rem\", fill: \"white\" }}\r\n                aria-label=\"Flickr\"\r\n              />\r\n              <Typography variant=\"h6\">\r\n                <span style={{ color: \"#dedee6\" }}>Geo</span>\r\n                <span style={{ color: \"#ffc1d5\" }}>Explorer</span>\r\n              </Typography>\r\n            </div>\r\n            <div className={classes.grow} />\r\n            <div className={classes.icons_container}>\r\n              {/* <Tooltip title=\"Search Photos\" aria-label=\"Search Photos\">\r\n                <IconButton\r\n                  color=\"inherit\"\r\n                  aria-label=\"search photos\"\r\n                  onClick={props.searchFlikr}\r\n                >\r\n                  <ImageSearchRounded />\r\n                </IconButton>\r\n              </Tooltip> */}\r\n              {props.photos > 0 && (\r\n                <Tooltip\r\n                  title={\r\n                    props.gridDirection === \"column\"\r\n                      ? \"Display images as Rows\"\r\n                      : \"Display images as Columns\"\r\n                  }\r\n                  aria-label={\r\n                    props.gridDirection === \"column\"\r\n                      ? \"Display images as Rows\"\r\n                      : \"Display images as Columns\"\r\n                  }\r\n                >\r\n                  <IconButton\r\n                    color=\"inherit\"\r\n                    onClick={props.toggleGridDirection}\r\n                  >\r\n                    {props.gridDirection === \"column\" ? (\r\n                      <>\r\n                        <Rows className={classes.control_icon} />\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <Columns className={classes.control_icon} />\r\n                      </>\r\n                    )}\r\n                  </IconButton>\r\n                </Tooltip>\r\n              )}\r\n              <Tooltip title=\"Toggle Map\" aria-label=\"Toggle Map\">\r\n                <IconButton\r\n                  color=\"inherit\"\r\n                  aria-label=\"toggle map\"\r\n                  onClick={props.toggleMap}\r\n                >\r\n                  <Map />\r\n                </IconButton>\r\n              </Tooltip>\r\n            </div>\r\n          </Toolbar>\r\n        </AppBar>\r\n      </HideOnScroll>\r\n      <Toolbar id=\"back-to-top-anchor\" />\r\n      <Box\r\n        style={matches ? { margin: \"5px 25px 2px\" } : { margin: \"5px 0 2px\" }}\r\n      >\r\n        {props.children}\r\n      </Box>\r\n      <ScrollTop {...props}>\r\n        <Fab color=\"secondary\" size=\"small\" aria-label=\"scroll back to top\">\r\n          <KeyboardArrowUp />\r\n        </Fab>\r\n      </ScrollTop>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Fab, makeStyles, Zoom } from \"@material-ui/core\";\r\nimport { MyLocationRounded, MoreVert } from \"@material-ui/icons\";\r\nimport { getPhotoGeoLocation } from \"../../requests/flikr\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  pin_to_map_btn: {\r\n    position: \"absolute\",\r\n    bottom: \"2px\",\r\n    left: \"2px\",\r\n    backgroundColor: \"#f500577a\",\r\n    \"&:hover\": {\r\n      boxShadow: \"0px 0px 11px 0px rgba(0,0,0,0.75)\"\r\n    }\r\n  },\r\n  options_btn: {\r\n    top: \"2px\",\r\n    right: \"2px\",\r\n    position: \"absolute\",\r\n    backgroundColor: \"#ffffffa6\",\r\n    \"&:hover\": {\r\n      backgroundColor: \"#f5f5f5e8\",\r\n      boxShadow: \"0px 0px 11px 0px rgba(0,0,0,0.75)\"\r\n    }\r\n  },\r\n  image: {\r\n    margin: \"2px\",\r\n    display: \"block\"\r\n  }\r\n  // container: {\r\n  //   // position: \"relative\",\r\n  //   // width: \"100%\"\r\n  //   position: \"absolute\",\r\n  //   left: \"left\",\r\n  //   top: \"top\"\r\n  // }\r\n}));\r\n\r\nconst ImageWrapper = ({\r\n  index,\r\n  photo,\r\n  margin,\r\n  direction,\r\n  top,\r\n  left,\r\n  selected,\r\n  pinPhotoOnMap,\r\n  openLightbox,\r\n  handleOpenMenuClick\r\n}) => {\r\n  const classes = useStyles();\r\n\r\n  const [hover, setHover] = useState(false);\r\n\r\n  const cont = {\r\n    backgroundColor: \"#eee\",\r\n    cursor: \"pointer\",\r\n    overflow: \"hidden\",\r\n    position: \"relative\"\r\n  };\r\n\r\n  const handlePinOnMapClick = id => {\r\n    getPhotoGeoLocation(id).then(res => {\r\n      const result = {\r\n        position: res,\r\n        thumbnail: photo.thumb,\r\n        title: photo.title,\r\n        id: photo.photoId,\r\n        owner: photo.owner,\r\n        thumbWidth: photo.width_t\r\n      };\r\n      return pinPhotoOnMap(result);\r\n    });\r\n  };\r\n\r\n  const handleOnMouseEnter = (photo, e) => {\r\n    setHover(true);\r\n  };\r\n  const handleOnMouseLeave = (photo, e) => {\r\n    setHover(false);\r\n  };\r\n\r\n  const handleTouch = () => {\r\n    setHover(true);\r\n    window.setTimeout(() => {\r\n      setHover(false);\r\n    }, 3000);\r\n  };\r\n\r\n  //CONTAINER OVERRIDES FOR COLUMNT LAYOUT\r\n  // position: \"absolute\",\r\n  // left: left,\r\n  // top: top\r\n\r\n  console.log(direction);\r\n  if (direction === \"column\") {\r\n    cont.position = \"absolute\";\r\n    cont.left = left;\r\n    cont.top = top;\r\n  }\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        margin,\r\n        height: photo.height,\r\n        width: photo.width,\r\n        ...cont\r\n        // position: \"absolute\",\r\n        // left: left,\r\n        // top: top\r\n      }}\r\n      className={classes.container}\r\n      onMouseEnter={handleOnMouseEnter.bind(this, photo)}\r\n      onMouseLeave={handleOnMouseLeave}\r\n      onTouchStart={handleTouch}\r\n    >\r\n      <img\r\n        src={photo.src}\r\n        title={\r\n          photo.title\r\n            ? photo.title + ` - by user ${photo.ownername}`\r\n            : `untitled - by user ${photo.ownername}`\r\n        }\r\n        alt={photo.alt}\r\n        srcSet={photo.srcSet}\r\n        width={photo.width}\r\n        heigth={photo.height}\r\n        sizes={photo.sizes}\r\n        className={classes.image}\r\n        onClick={event => openLightbox.call(this, event, { index, photo })}\r\n      />\r\n      <Zoom in={hover}>\r\n        <Fab\r\n          size=\"small\"\r\n          aria-label=\"add\"\r\n          className={classes.options_btn}\r\n          onClick={handleOpenMenuClick.bind(this, photo)}\r\n        >\r\n          <MoreVert />\r\n        </Fab>\r\n      </Zoom>\r\n\r\n      <Zoom in={hover}>\r\n        <Fab\r\n          size=\"small\"\r\n          color=\"secondary\"\r\n          aria-label=\"add\"\r\n          className={classes.pin_to_map_btn}\r\n          onClick={handlePinOnMapClick.bind(this, photo.photoId)}\r\n        >\r\n          <MyLocationRounded />\r\n        </Fab>\r\n      </Zoom>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(ImageWrapper);\r\n","import React from \"react\";\r\nimport { Menu, MenuItem, Link } from \"@material-ui/core/\";\r\nimport DispatchContext from \"../../context/dispatchContext\";\r\nimport { BLOCK_USER } from \"../../context/rootReducer\";\r\n\r\nconst linkStyle = {\r\n  width: \"100%\"\r\n};\r\n\r\nexport default function ImageMenu(props) {\r\n  const dispatch = React.useContext(DispatchContext);\r\n\r\n  const handleHideUser = () => {\r\n    props.handleMenuClose();\r\n    dispatch({\r\n      type: BLOCK_USER,\r\n      userId: props.photoData.owner\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Menu\r\n        id=\"image-menu\"\r\n        anchorEl={props.anchorEl}\r\n        keepMounted\r\n        open={Boolean(props.anchorEl)}\r\n        onClose={props.handleMenuClose}\r\n      >\r\n        <MenuItem onClick={handleHideUser}>\r\n          Temporary hide photos from this user\r\n        </MenuItem>\r\n        <MenuItem onClick={props.handleMenuClose}>\r\n          <Link\r\n            style={linkStyle}\r\n            target=\"_blank\"\r\n            href={\r\n              props.photoData\r\n                ? `https://www.flickr.com/photos/${props.photoData.owner}/${props.photoData.photoId}`\r\n                : \"\"\r\n            }\r\n            color=\"inherit\"\r\n          >\r\n            Open Photo in Flickr\r\n          </Link>\r\n        </MenuItem>\r\n      </Menu>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useCallback } from \"react\";\r\nimport Gallery from \"react-photo-gallery\";\r\nimport ImageWrapper from \"../imageWrapper/imageWrapper\";\r\nimport ImageMenu from \"../imageWrapper/imageMenu\";\r\n\r\nimport Carousel, { Modal, ModalGateway } from \"react-images\";\r\nimport { makeStyles, IconButton, Typography } from \"@material-ui/core\";\r\nimport {\r\n  Close,\r\n  Fullscreen,\r\n  FullscreenExit,\r\n  MyLocationRounded\r\n} from \"@material-ui/icons\";\r\nimport { getPhotoGeoLocation } from \"../../requests/flikr\";\r\nconst useStyles = makeStyles(theme => ({\r\n  header_container: {\r\n    position: \"absolute\",\r\n    top: \"1px\",\r\n    width: \"100vw\",\r\n    display: \"flex\",\r\n    zIndex: \"2000\",\r\n    justifyContent: \"space-between\", //\"flex-end\", to align btns to the right\r\n    transition: \"opacity 300ms\",\r\n    opacity: \"1\"\r\n  },\r\n  lightbox_btn: {\r\n    color: \"#fff\",\r\n    background: \"rgba(255, 255, 255, 0.2)\",\r\n    margin: \"2px\",\r\n    border: \"1px solid #00000024\",\r\n    \"&:hover\": {\r\n      boxShadow: \"0px 0px 11px 0px rgba(0,0,0,0.75)\",\r\n      background: \"rgba(255, 255, 255, 0.3)\"\r\n    }\r\n  },\r\n  hide_on_idle: {\r\n    opacity: \"0\"\r\n  }\r\n}));\r\n\r\nconst navButtonStyles = base => ({\r\n  ...base,\r\n  background: \"rgba(255, 255, 255, 0.2)\",\r\n  \"&:hover, &:active\": {\r\n    boxShadow: \"0px 0px 11px 0px rgba(0,0,0,0.75)\",\r\n    background: \"rgba(255, 255, 255, 0.3)\"\r\n  },\r\n  \"&:active\": {\r\n    boxShadow: \"0 1px 3px rgba(0, 0, 0, 0.14)\",\r\n    transform: \"scale(0.96)\"\r\n  }\r\n});\r\n\r\nconst ViewRenderer = props => {\r\n  /** https://github.com/jossmac/react-images/issues/300 */\r\n  const overScanCount = 1;\r\n  const { data, getStyles, index, currentIndex } = props;\r\n  const { alt, src } = data;\r\n\r\n  return Math.abs(currentIndex - index) <= overScanCount ? (\r\n    <div style={getStyles(\"view\", props)}>\r\n      <img\r\n        alt={alt || `Image ${index}`}\r\n        src={src}\r\n        style={{\r\n          height: \"auto\",\r\n          maxHeight: \"100vh\",\r\n          maxWidth: \"100%\",\r\n          userSelect: \"none\"\r\n        }}\r\n      />\r\n    </div>\r\n  ) : null;\r\n};\r\n\r\nconst CustomHeader = props => {\r\n  /*most props like carouselProps, interactionIsIdle etc are passed by default props react-photo-gallery*/\r\n  const classes = useStyles();\r\n  const handlePinOnMapClick = id => {\r\n    getPhotoGeoLocation(id).then(res => {\r\n      const result = {\r\n        position: res,\r\n        thumbnail: props.data.src,\r\n        title: props.data.title,\r\n        id: props.data.photoId,\r\n        thumbWidth: props.data.width_t\r\n      };\r\n      return props.carouselProps.pinPhotoOnMap(result);\r\n    });\r\n  };\r\n  return props.isModal ? (\r\n    <div\r\n      className={\r\n        props.interactionIsIdle\r\n          ? classes.header_container + \" \" + classes.hide_on_idle\r\n          : classes.header_container\r\n      }\r\n    >\r\n      <IconButton\r\n        aria-label=\"Pin photo on map\"\r\n        className={classes.lightbox_btn}\r\n        onClick={handlePinOnMapClick.bind(this, props.data.photoId)}\r\n      >\r\n        <MyLocationRounded />\r\n      </IconButton>\r\n\r\n      <div className={classes.btn_container_right}>\r\n        <IconButton\r\n          aria-label=\"toggle fullscreen\"\r\n          className={classes.lightbox_btn}\r\n          edge=\"start\"\r\n          onClick={props.modalProps.toggleFullscreen}\r\n        >\r\n          {props.modalProps.isFullscreen ? <FullscreenExit /> : <Fullscreen />}\r\n        </IconButton>\r\n\r\n        {!props.modalProps.isFullscreen && (\r\n          <IconButton\r\n            aria-label=\"Close\"\r\n            className={classes.lightbox_btn}\r\n            edge=\"start\"\r\n            onClick={props.modalProps.onClose}\r\n          >\r\n            <Close />\r\n          </IconButton>\r\n        )}\r\n      </div>\r\n    </div>\r\n  ) : null;\r\n};\r\n\r\nconst ImageGrid = ({\r\n  photos,\r\n  responseDetails,\r\n  direction,\r\n  pinPhotoOnMap,\r\n  setAppBarHide,\r\n  columns,\r\n  hiddenPhotos\r\n}) => {\r\n  const [currentImage, setCurrentImage] = useState(0);\r\n  const [viewerIsOpen, setViewerIsOpen] = useState(false);\r\n\r\n  React.useEffect(() => {\r\n    console.log(\"IMAGE GRID SMTH UPDATED!!!!!\");\r\n  }, [\r\n    photos,\r\n    responseDetails,\r\n    direction,\r\n    pinPhotoOnMap,\r\n    setAppBarHide,\r\n    columns,\r\n    hiddenPhotos\r\n  ]);\r\n\r\n  console.log(\"IMAGEGRID!##%$#@!\");\r\n  const openLightbox = useCallback(\r\n    (event, { photo, index }) => {\r\n      setAppBarHide(true);\r\n      setCurrentImage(index);\r\n      setViewerIsOpen(true);\r\n    },\r\n    [setAppBarHide]\r\n  );\r\n\r\n  const closeLightbox = () => {\r\n    setCurrentImage(0);\r\n    setViewerIsOpen(false);\r\n    setAppBarHide(false);\r\n  };\r\n\r\n  /** ImageMenu */\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [photoData, setPhotoData] = useState(null);\r\n  const handleOpenMenuClick = (data, event) => {\r\n    setPhotoData(data);\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  const handleMenuClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  /**Wrapper around ImageWrapper */\r\n  const imageRenderer = useCallback(\r\n    props => {\r\n      return (\r\n        <ImageWrapper\r\n          key={props.key}\r\n          margin={\"2px\"}\r\n          index={props.index}\r\n          photo={props.photo}\r\n          left={props.left}\r\n          top={props.top}\r\n          pinPhotoOnMap={pinPhotoOnMap}\r\n          direction={props.direction}\r\n          openLightbox={props.onClick}\r\n          handleOpenMenuClick={handleOpenMenuClick}\r\n        />\r\n      );\r\n    },\r\n    [pinPhotoOnMap]\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <Typography variant=\"h3\" component=\"h1\" style={{ marginTop: \"1.9rem\" }}>\r\n        Results:\r\n      </Typography>\r\n      <Typography variant=\"subtitle1\" component=\"h2\" gutterBottom>\r\n        {photos.length === 0\r\n          ? `Sorry could not find any photos in that particular area`\r\n          : `Displaying ${photos.length} of total ${responseDetails.totalPhotos} photos found...`}\r\n      </Typography>\r\n      {hiddenPhotos.length > 0 && (\r\n        <Typography variant=\"subtitle2\" component=\"p\" gutterBottom>\r\n          ({hiddenPhotos.length}) photos from blocked users are hidden.\r\n        </Typography>\r\n      )}\r\n\r\n      {photos.length > 0 && (\r\n        <Gallery\r\n          photos={photos}\r\n          direction={direction}\r\n          renderImage={imageRenderer}\r\n          pinPhotoOnMap={pinPhotoOnMap}\r\n          onClick={openLightbox}\r\n          // the above onClick is an optional react-photo-gallery prop\r\n          // It receives the arguments -> event and an object containing the index,\r\n          // Photos obj originally sent and the next and previous photos in the gallery if they exist\r\n        />\r\n      )}\r\n      <ModalGateway>\r\n        {viewerIsOpen ? (\r\n          <Modal onClose={closeLightbox}>\r\n            <Carousel\r\n              pinPhotoOnMap={pinPhotoOnMap}\r\n              components={{\r\n                Header: CustomHeader,\r\n\r\n                View: ViewRenderer\r\n              }}\r\n              currentIndex={currentImage}\r\n              views={photos.map(x => ({\r\n                ...x,\r\n                srcset: x.srcSet,\r\n                caption: x.title\r\n              }))}\r\n              styles={{\r\n                navigationPrev: navButtonStyles,\r\n                navigationNext: navButtonStyles\r\n              }}\r\n            />\r\n          </Modal>\r\n        ) : null}\r\n      </ModalGateway>\r\n      <ImageMenu\r\n        anchorEl={anchorEl}\r\n        handleOpenMenuClick={handleOpenMenuClick}\r\n        handleMenuClose={handleMenuClose}\r\n        photoData={photoData}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(ImageGrid);\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  button: {\r\n    margin: \"1rem auto\",\r\n    display: \"block\"\r\n  }\r\n}));\r\n\r\nconst LoadMoreButton = props => {\r\n  const classes = useStyles();\r\n  return (\r\n    <Button\r\n      onClick={props.onClick}\r\n      variant=\"outlined\"\r\n      size=\"large\"\r\n      className={classes.button}\r\n    >\r\n      Load more photos\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default LoadMoreButton;\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    flexGrow: 1,\r\n    margin: \"0.5rem 0\"\r\n  }\r\n});\r\n\r\nexport default function LoadingBar() {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <LinearProgress />\r\n      <LinearProgress color=\"secondary\" />\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Slider from \"@material-ui/core/Slider\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    display: \"flex\",\r\n    width: \"100%\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\"\r\n  },\r\n  input: {\r\n    marginLeft: \"1rem\",\r\n    marginBottom: \"1rem\"\r\n  }\r\n});\r\n\r\nexport default function RadiusSlider(props) {\r\n  const classes = useStyles();\r\n  const [value, setValue] = React.useState(3);\r\n\r\n  const handleSliderChange = (event, newValue) => {\r\n    setValue(newValue);\r\n    props.setSearchRadius(newValue);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Typography align=\"center\" gutterBottom>\r\n        Search Area Radius in Km\r\n      </Typography>\r\n\r\n      <div className={classes.root}>\r\n        <Slider\r\n          value={value}\r\n          onChange={handleSliderChange}\r\n          aria-labelledby=\"input-slider\"\r\n          step={0.5}\r\n          min={0.5}\r\n          max={30}\r\n          style={{ width: \"75%\", marginRight: \"0.5rem\", marginLeft: \"0.5rem\" }}\r\n        />\r\n        <Typography>{value + ` km`}</Typography>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  InputLabel,\r\n  MenuItem,\r\n  FormHelperText,\r\n  FormControl,\r\n  Select,\r\n  makeStyles\r\n} from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  formControl: {\r\n    width: \"100%\"\r\n  },\r\n  root_select: {\r\n    textAlign: \"left\"\r\n  }\r\n}));\r\n\r\nexport default function SelectSortingMethod(props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <FormControl className={classes.formControl}>\r\n      <InputLabel htmlFor=\"sorting-helper\">Sort photos by...</InputLabel>\r\n      <Select\r\n        classes={{ root: classes.root_select }}\r\n        value={props.sortMethod}\r\n        onChange={props.handeSelectSortMethod}\r\n      >\r\n        <MenuItem value={\"date-posted-asc\"}>Date posted ascending</MenuItem>\r\n        <MenuItem value={\"date-posted-desc\"}>Date posted descending</MenuItem>\r\n        <MenuItem value={\"date-taken-asc\"}>Date taken ascending</MenuItem>\r\n        <MenuItem value={\"date-taken-desc\"}>Date taken descending</MenuItem>\r\n      </Select>\r\n      <FormHelperText>\r\n        Sorting filters must be set before photo search\r\n      </FormHelperText>\r\n    </FormControl>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  // TextField,\r\n  InputAdornment,\r\n  InputLabel,\r\n  Input,\r\n  IconButton,\r\n  FormControl,\r\n  FormHelperText\r\n} from \"@material-ui/core/\";\r\nimport { Close } from \"@material-ui/icons/\";\r\n\r\nexport default function TextQuery(props) {\r\n  const handleSubmit = e => {\r\n    e.preventDefault();\r\n    console.log(\"Submit!\");\r\n    props.searchFlikr();\r\n  };\r\n  return (\r\n    <>\r\n      {/* <form onSubmit={handleSubmit}>\r\n        <TextField\r\n          label=\"Optional text query\"\r\n          value={props.searchText}\r\n          onChange={props.handleTextQueryChange}\r\n          fullWidth\r\n          // className={classes.textField}\r\n          helperText=\"Adding text to the query will greatly limit the photos results\"\r\n          margin=\"normal\"\r\n          placeholder=\"text search in photos names,tags,albums\"\r\n        />\r\n      </form> */}\r\n\r\n      <form onSubmit={handleSubmit}>\r\n        <FormControl onSubmit={handleSubmit} style={{ width: \"100%\" }}>\r\n          <InputLabel htmlFor=\"adornment-text\">Optional text query</InputLabel>\r\n          <Input\r\n            id=\"adornment-text\"\r\n            type=\"text\"\r\n            fullWidth\r\n            placeholder=\"search for a keyword/phrase in photo-titles,tags,albums\"\r\n            value={props.searchText}\r\n            onChange={props.handleTextQueryChange}\r\n            endAdornment={\r\n              <InputAdornment position=\"end\">\r\n                {/* {props.searchText.length > 0 ? ( */}\r\n                <IconButton\r\n                  style={props.searchText.length > 0 ? {} : { display: \"none\" }}\r\n                  aria-label=\"toggle password visibility\"\r\n                  onClick={props.clearTextQuery}\r\n                >\r\n                  <Close />\r\n                </IconButton>\r\n                {/* ) : null} */}\r\n              </InputAdornment>\r\n            }\r\n          />\r\n        </FormControl>\r\n        <FormHelperText style={{ margin: \"5px 0 \" }}>\r\n          Adding text to the query will greatly limit the photos results\r\n        </FormHelperText>\r\n      </form>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  Paper,\r\n  makeStyles,\r\n  Box,\r\n  Typography,\r\n  Button,\r\n  Divider,\r\n  Tooltip\r\n} from \"@material-ui/core\";\r\nimport {\r\n  ImageSearchRounded,\r\n  CenterFocusStrong,\r\n  ZoomOutMap\r\n} from \"@material-ui/icons\";\r\nimport RadiusSlider from \"./RadiusSlider\";\r\nimport SelectSortingMethod from \"./selectSortingMethod\";\r\nimport TextQuery from \"./textQuery\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  panel: {\r\n    textAlign: \"center\",\r\n    maxWidth: \"40vw\",\r\n    width: \"40vw\",\r\n    display: \"flex\",\r\n    flexFlow: \"column\"\r\n  },\r\n  panel_item: {\r\n    margin: \"8px\",\r\n    display: \"flex\"\r\n  },\r\n  wrapper: {\r\n    margin: \"0.5rem\"\r\n  },\r\n  divider: {\r\n    margin: \"1rem 0\"\r\n  },\r\n  control_icon: {\r\n    marginRight: \"1rem\"\r\n  },\r\n  search_photos_box: {\r\n    justifyContent: \"center\"\r\n  },\r\n  secondary_btn: {\r\n    margin: \"1rem\"\r\n  }\r\n}));\r\n\r\nconst ControlPanel = props => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Paper className={classes.panel}>\r\n      <div className={classes.wrapper}>\r\n        <Box className={classes.panel_item}>\r\n          <Typography>\r\n            Drag the blue circle on the map to select the place where you want\r\n            to search for photos, when done press the button below to make the\r\n            request.\r\n          </Typography>\r\n        </Box>\r\n\r\n        <Box className={classes.panel_item + classes.search_photos_box}>\r\n          <Button\r\n            variant=\"contained\"\r\n            style={{ backgroundColor: \"#179207\" }}\r\n            size={\"large\"}\r\n            onClick={props.searchFlikr}\r\n            // className={smallScreen ? classes.controls_mobile : classes.controls}\r\n          >\r\n            <ImageSearchRounded className={classes.control_icon} />\r\n            Search Photos\r\n          </Button>\r\n        </Box>\r\n        <Divider className={classes.divider} />\r\n        {/* Radius Slider  */}\r\n        <RadiusSlider setSearchRadius={props.setSearchRadius} />\r\n        <Box className={classes.panel_item + \" \" + classes.search_photos_box}>\r\n          <Tooltip\r\n            title=\"Move Search-Area to the Center of map\"\r\n            aria-label=\"Move Search-Area to the Center of map\"\r\n          >\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              size=\"medium\"\r\n              className={classes.secondary_btn}\r\n              onClick={props.centerSearchAreaOnMap}\r\n              // className={smallScreen ? classes.controls_mobile : classes.controls}\r\n            >\r\n              <CenterFocusStrong />\r\n            </Button>\r\n          </Tooltip>\r\n          <Tooltip\r\n            title=\"Zoom to Search-Area extents\"\r\n            aria-label=\"Zoom to Search-Area extents\"\r\n          >\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              size=\"medium\"\r\n              className={classes.secondary_btn}\r\n              onClick={props.zoomToSearchArea}\r\n              // className={smallScreen ? classes.controls_mobile : classes.controls}\r\n            >\r\n              <ZoomOutMap />\r\n            </Button>\r\n          </Tooltip>\r\n        </Box>\r\n        <Divider className={classes.divider} />\r\n\r\n        <Typography align=\"center\"> Search Options</Typography>\r\n        {/* Sorting Filters */}\r\n        <Box\r\n          className={classes.panel_item}\r\n          style={{ textAlign: \"left\", margin: \"0\" }}\r\n        >\r\n          <SelectSortingMethod\r\n            handeSelectSortMethod={props.handeSelectSortMethod}\r\n            sortMethod={props.sortMethod}\r\n          />\r\n        </Box>\r\n        {/* Search by Text */}\r\n        <TextQuery\r\n          handleTextQueryChange={props.handleTextQueryChange}\r\n          clearTextQuery={props.clearTextQuery}\r\n          searchText={props.searchText}\r\n          searchFlikr={props.searchFlikr}\r\n        />\r\n\r\n        <Box className={classes.panel_item}>{props.children}</Box>\r\n      </div>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default ControlPanel;\r\n","import React from \"react\";\r\nimport {\r\n  Paper,\r\n  makeStyles,\r\n  Box,\r\n  Button,\r\n  Divider,\r\n  Tooltip\r\n} from \"@material-ui/core\";\r\nimport {\r\n  ImageSearchRounded,\r\n  CenterFocusStrong,\r\n  ZoomOutMap\r\n} from \"@material-ui/icons\";\r\nimport RadiusSlider from \"./RadiusSlider\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  panel: {\r\n    textAlign: \"center\",\r\n    display: \"flex\",\r\n    flexFlow: \"column\"\r\n  },\r\n  panel_item: {\r\n    margin: \"8px\",\r\n    display: \"flex\"\r\n  },\r\n  wrapper: {\r\n    margin: \"0 0.5rem\"\r\n  },\r\n  divider: {\r\n    margin: \"1rem 0\"\r\n  },\r\n  control_icon: {\r\n    marginRight: \"1rem\"\r\n  },\r\n  search_photos_box: {\r\n    justifyContent: \"center\"\r\n  },\r\n  secondary_btn: {\r\n    margin: \"0 1rem\"\r\n  }\r\n}));\r\n\r\nconst ControlPanelMobile = props => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Paper className={classes.panel}>\r\n      <div className={classes.wrapper}>\r\n        {/* Radius Slider  */}\r\n        <RadiusSlider setSearchRadius={props.setSearchRadius} />\r\n\r\n        <Divider className={classes.divider} />\r\n\r\n        <Box className={classes.panel_item + \" \" + classes.search_photos_box}>\r\n          <Tooltip title=\"Search Photos\" aria-label=\"Search Photos\">\r\n            <Button\r\n              variant=\"contained\"\r\n              style={{ backgroundColor: \"#179207\" }}\r\n              size=\"medium\"\r\n              onClick={props.searchFlikr}\r\n              className={classes.secondary_btn}\r\n            >\r\n              <ImageSearchRounded />\r\n            </Button>\r\n          </Tooltip>\r\n\r\n          <Tooltip\r\n            title=\"Move Search-Area to the Center of map\"\r\n            aria-label=\"Move Search-Area to the Center of map\"\r\n          >\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              size=\"medium\"\r\n              className={classes.secondary_btn}\r\n              onClick={props.centerSearchAreaOnMap}\r\n              // className={smallScreen ? classes.controls_mobile : classes.controls}\r\n            >\r\n              <CenterFocusStrong />\r\n            </Button>\r\n          </Tooltip>\r\n\r\n          <Tooltip\r\n            title=\"Zoom to Search-Area extents\"\r\n            aria-label=\"Zoom to Search-Area extents\"\r\n          >\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              size=\"medium\"\r\n              className={classes.secondary_btn}\r\n              onClick={props.zoomToSearchArea}\r\n              // className={smallScreen ? classes.controls_mobile : classes.controls}\r\n            >\r\n              <ZoomOutMap />\r\n            </Button>\r\n          </Tooltip>\r\n        </Box>\r\n      </div>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default ControlPanelMobile;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\r\nimport * as FlikrApi from \"./requests/flikr\";\r\nimport MapWrapper from \"./components/map/mapContainer\";\r\nimport StateContext from \"./context/stateContext\";\r\nimport DispatchContext from \"./context/dispatchContext\";\r\nimport {\r\n  SET_BOUNDING_BOX,\r\n  SET_RADIUS_MARKER,\r\n  SET_USER_LOCATION,\r\n  SET_SEARCH_CENTER,\r\n  SET_SEARCH_RADIUS,\r\n  SET_PHOTOS,\r\n  UPDATE_PHOTOS\r\n} from \"./context/rootReducer\";\r\n\r\nimport Appbar from \"./components/appBar/appBar\";\r\nimport ImageGrid from \"./components/imageGrid/imageGrid\";\r\n\r\nimport LoadMoreButton from \"./components/controls/loadMoreBtn\";\r\nimport LoadingBar from \"./components/LoadingBar/loadingBar\";\r\nimport ControlPanel from \"./components/controlPanel/controlPanel\";\r\nimport ControlPanelMobile from \"./components/controlPanel/controlPanelMobile\";\r\n\r\nfunction App() {\r\n  const store = useContext(StateContext);\r\n  const dispatch = useContext(DispatchContext);\r\n\r\n  const screenWidth900px = useMediaQuery(\"(min-width:900px)\");\r\n\r\n  const resultsRef = React.useRef(null);\r\n\r\n  /**sorting filters for the results */\r\n  const [sortMethod, setSortMethod] = useState(\"date-posted-desc\");\r\n  const handeSelectSortMethod = event => {\r\n    setSortMethod(event.target.value);\r\n  };\r\n\r\n  /** option text for search */\r\n  const [searchText, setSearchText] = useState(\"\");\r\n  const handleTextQueryChange = (e, clearText) => {\r\n    setSearchText(e.target.value);\r\n  };\r\n  const clearTextQuery = () => setSearchText(\"\");\r\n\r\n  const [loadingPhotos, setLoadingPhotos] = useState(false);\r\n  const [triggerZoom, setTriggerZoom] = useState(false);\r\n  const [triggerCenter, setTriggerCenter] = useState(false);\r\n\r\n  const zoomToSearchArea = () => setTriggerZoom(true);\r\n  const disableZoom = () => setTriggerZoom(false);\r\n  const centerSearchAreaOnMap = () => setTriggerCenter(true);\r\n  const disableCenter = () => setTriggerCenter(false);\r\n\r\n  const [mapVisible, setMapVisible] = useState(true); //REFACTOR FOR MAP TO COLLAPSE (height:0) OR DELETE METHOD\r\n  const [responseDetails, setResponseDetails] = useState(null);\r\n\r\n  const [gridDirection, setGridDirection] = useState(\"row\");\r\n  const toggleGridDirection = () => {\r\n    setGridDirection(gridDirection === \"row\" ? \"column\" : \"row\");\r\n  };\r\n  /**explicitly hide appbar if the lightbox is open */\r\n  const [appBarHide, setAppBarHide] = useState(false);\r\n\r\n  /** Triggers plot photo on map  */\r\n  const [triggerPhotoMarker, setTriggerPhotoMarker] = useState(false);\r\n  const disableTriggerPhotoMarker = () => setTriggerPhotoMarker(false);\r\n\r\n  const pinPhotoOnMap = React.useCallback(pin => {\r\n    console.log(\"pinPhotoOnMAp\");\r\n    const { position, thumbnail, title, id, owner, thumbWidth } = pin;\r\n    setTriggerPhotoMarker({\r\n      position: position,\r\n      thumbnail: thumbnail,\r\n      title: title,\r\n      id,\r\n      owner,\r\n      thumbWidth\r\n      //src-screenset\r\n    });\r\n  }, []);\r\n\r\n  /* triggerPlotRadiusMarkerOnMap allows calling methods from anywhere inside mapContainer */\r\n  const [\r\n    triggerPlotRadiusMarkerOnMap,\r\n    setTtriggerPlotRadiusMarkerOnMap\r\n  ] = useState(false);\r\n\r\n  const disableRadiusTrigger = () => setTtriggerPlotRadiusMarkerOnMap(false);\r\n  /**Bounds */\r\n  // const [triggerBoundingBox, setTriggerBoundingBox] = useState(false);\r\n  // const pinBoundingBoxOnMap = () => setTriggerBoundingBox(true);\r\n  // const disableBoundingBoxTrigger = () => setTriggerBoundingBox(false);\r\n\r\n  const toggleMap = () => {\r\n    const prevState = mapVisible;\r\n    setMapVisible(!prevState);\r\n  };\r\n\r\n  const searchFlikr = () => {\r\n    console.log(\"fetching...\");\r\n    let searchParams;\r\n    // if (store.boundingBox) {\r\n    //   searchParams = { ...store.boundingBox, type: \"boundingBox\" };\r\n    // } else if (store.radiusMarker) {\r\n    //   searchParams = { ...store.radiusMarker, type: \"radiusMarker\" };\r\n    // } else {\r\n    //   searchParams = {\r\n    //     ...store.radiusMarker,\r\n    //     search: \"Search String goes here\"\r\n    //   };\r\n    // }\r\n    searchParams = {\r\n      lat: store.searchCenter.lat,\r\n      lng: store.searchCenter.lng,\r\n      radius: store.searchRadius,\r\n      sortMethod,\r\n      searchText\r\n    };\r\n\r\n    setLoadingPhotos(true);\r\n    FlikrApi.getPhotosByTitle(searchParams)\r\n      .then(data => {\r\n        setLoadingPhotos(false);\r\n        setResponseDetails({\r\n          currentPage: data.currentPage,\r\n          totalPages: data.totalPages,\r\n          totalPhotos: data.totalPhotos,\r\n          perPage: data.perPage,\r\n          query: data.query,\r\n          lat: store.searchCenter.lat,\r\n          lng: store.searchCenter.lng,\r\n          radius: store.searchRadius,\r\n          sortMethod,\r\n          searchText\r\n        });\r\n        dispatch({\r\n          type: SET_PHOTOS,\r\n          photos: data.photos\r\n        });\r\n\r\n        /* if scrollIntoView is called syncronously there is a chance that the images are not loaded yet\r\n         * thus the body is still the same height and the element simply cannot be scroll to top because instead:\r\n         *  When the response is loaded wait 100ms for the body to resize (while image gallery loads),\r\n         * then scroll to the results (an empty div right above the results was used in order to avoid forwardingrefs)         *\r\n         */\r\n        window.setTimeout(() => {\r\n          resultsRef.current.scrollIntoView({\r\n            behavior: \"smooth\",\r\n            block: \"start\"\r\n          });\r\n          window.END = document.body.offsetHeight;\r\n        }, 100);\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n        setLoadingPhotos(false);\r\n      });\r\n  };\r\n\r\n  const fetchNextPage = () => {\r\n    console.log(\"fetching next page...\");\r\n    // let searchParams;\r\n    // if (responseDetails.query.type === \"boundingBox\") {\r\n    //   searchParams = { ...responseDetails.query };\r\n    // } else if (store.radiusMarker) {\r\n    //   searchParams = { ...responseDetails.query };\r\n    // }\r\n    const searchParams = { ...responseDetails };\r\n    if (responseDetails.currentPage < responseDetails.totalPages) {\r\n      searchParams.page = responseDetails.currentPage + 1;\r\n    }\r\n\r\n    setLoadingPhotos(true);\r\n\r\n    FlikrApi.getPhotosByTitle(searchParams)\r\n      .then(data => {\r\n        setLoadingPhotos(false);\r\n\r\n        setResponseDetails({\r\n          ...responseDetails,\r\n          currentPage: data.currentPage,\r\n          totalPages: data.totalPages,\r\n          totalPhotos: data.totalPhotos,\r\n          perPage: data.perPage,\r\n          query: data.query\r\n        });\r\n        dispatch({\r\n          type: UPDATE_PHOTOS,\r\n          photos: data.photos\r\n        });\r\n      })\r\n      .catch(error => {\r\n        setLoadingPhotos(false);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    //debugging only\r\n    console.log(store);\r\n    console.log(responseDetails);\r\n  }, [store, responseDetails]);\r\n\r\n  useEffect(() => {\r\n    //debugging only\r\n    console.log(store.filteredPhotos);\r\n  }, [store.filteredPhotos]);\r\n\r\n  useEffect(() => {\r\n    /*fetch user location when app mounts*/\r\n    fetch(\"https://geoip-db.com/json/42e6a770-b3ac-11e9-80ca-c95181800da7\")\r\n      .then(res => res.json())\r\n      .then(position => {\r\n        console.log({ lat: position.latitude, lng: position.longitude });\r\n        dispatch({\r\n          type: SET_USER_LOCATION,\r\n          userLocation: { lat: position.latitude, lng: position.longitude }\r\n        });\r\n      })\r\n      .catch(err => {\r\n        /* if geoip-db call fails or if it is blocked by an add-blocker use native geolocation API for user position */\r\n        console.log(err);\r\n        const success = position => {\r\n          dispatch({\r\n            type: SET_USER_LOCATION,\r\n            userLocation: {\r\n              lat: position.coords.latitude,\r\n              lng: position.coords.longitude\r\n            }\r\n          });\r\n        };\r\n        if (\"geolocation\" in navigator) {\r\n          navigator.geolocation.getCurrentPosition(success, err =>\r\n            console.log(err)\r\n          );\r\n        }\r\n      });\r\n  }, [dispatch]);\r\n\r\n  const setBounds = bounds => {\r\n    dispatch({\r\n      type: SET_BOUNDING_BOX,\r\n      boundingBox: bounds\r\n    });\r\n  };\r\n\r\n  const getRadiusMarkerCoordinates = marker => {\r\n    dispatch({\r\n      type: SET_RADIUS_MARKER,\r\n      radiusMarker: marker\r\n    });\r\n  };\r\n\r\n  const setSearchCenter = center => {\r\n    dispatch({\r\n      type: SET_SEARCH_CENTER,\r\n      searchCenter: center\r\n    });\r\n  };\r\n\r\n  const setSearchRadius = radius => {\r\n    dispatch({\r\n      type: SET_SEARCH_RADIUS,\r\n      searchRadius: radius\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Appbar\r\n        toggleMap={toggleMap}\r\n        // searchFlikr={searchFlikr}\r\n        appBarHide={appBarHide}\r\n        photos={responseDetails ? responseDetails.totalPages : 0}\r\n        toggleGridDirection={toggleGridDirection}\r\n        gridDirection={gridDirection}\r\n      >\r\n        <section\r\n          // className={classes.main_container}\r\n          style={\r\n            screenWidth900px\r\n              ? { display: \"flex\", height: \"calc(100vh - 7px - 64px)\" } //7px margins, 64appbar\r\n              : {\r\n                  display: \"flex\",\r\n                  height: \"calc(100vh - 7px - 64px )\",\r\n                  flexFlow: \"column\"\r\n                }\r\n          }\r\n        >\r\n          {screenWidth900px && (\r\n            <ControlPanel\r\n              setSearchRadius={setSearchRadius}\r\n              searchFlikr={searchFlikr}\r\n              loadingPhotos={loadingPhotos}\r\n              zoomToSearchArea={zoomToSearchArea}\r\n              centerSearchAreaOnMap={centerSearchAreaOnMap}\r\n              sortMethod={sortMethod}\r\n              handeSelectSortMethod={handeSelectSortMethod}\r\n              handleTextQueryChange={handleTextQueryChange}\r\n              clearTextQuery={clearTextQuery}\r\n              searchText={searchText}\r\n            ></ControlPanel>\r\n          )}\r\n          {mapVisible && (\r\n            <MapWrapper\r\n              store={store}\r\n              /** */\r\n              userLocation={store.userLocation}\r\n              setSearchCenter={setSearchCenter}\r\n              searchRadius={store.searchRadius}\r\n              /** */\r\n              setBounds={setBounds}\r\n              getRadiusMarkerCoordinates={getRadiusMarkerCoordinates}\r\n              /* photoMarker*/\r\n              triggerPhotoMarker={triggerPhotoMarker}\r\n              disableTriggerPhotoMarker={disableTriggerPhotoMarker}\r\n              /* radius marker */\r\n              triggerPlotRadiusMarkerOnMap={triggerPlotRadiusMarkerOnMap}\r\n              disableRadiusTrigger={disableRadiusTrigger}\r\n              /* boundingBox Trigger */\r\n              // triggerBoundingBox={triggerBoundingBox}\r\n              // disableBoundingBoxTrigger={disableBoundingBoxTrigger}\r\n              /* triggeer zoom to search area */\r\n              triggerZoom={triggerZoom}\r\n              disableZoom={disableZoom}\r\n              /* trigger center search area on map */\r\n              triggerCenter={triggerCenter}\r\n              disableCenter={disableCenter}\r\n              /**ScreenSize */\r\n              screenWidth900px={screenWidth900px}\r\n            />\r\n          )}\r\n          {!screenWidth900px && (\r\n            <ControlPanelMobile\r\n              setSearchRadius={setSearchRadius}\r\n              searchFlikr={searchFlikr}\r\n              loadingPhotos={loadingPhotos}\r\n              zoomToSearchArea={zoomToSearchArea}\r\n              centerSearchAreaOnMap={centerSearchAreaOnMap}\r\n              sortMethod={sortMethod}\r\n              handeSelectSortMethod={handeSelectSortMethod}\r\n              handleTextQueryChange={handleTextQueryChange}\r\n              searchText={searchText}\r\n            />\r\n          )}\r\n        </section>\r\n\r\n        <div ref={resultsRef}></div>\r\n        {store.filteredPhotos && (\r\n          <ImageGrid\r\n            photos={store.filteredPhotos}\r\n            hiddenPhotos={store.hiddenPhotos}\r\n            responseDetails={responseDetails}\r\n            direction={gridDirection}\r\n            pinPhotoOnMap={pinPhotoOnMap}\r\n            columns={2}\r\n            setAppBarHide={setAppBarHide}\r\n          />\r\n        )}\r\n\r\n        {responseDetails &&\r\n          responseDetails.currentPage < responseDetails.totalPages && (\r\n            <>\r\n              {loadingPhotos && <LoadingBar />}\r\n              <LoadMoreButton onClick={fetchNextPage} />\r\n            </>\r\n          )}\r\n      </Appbar>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Store from \"./context/store\";\n\nReactDOM.render(\n  <Store>\n    <CssBaseline />\n    <App />\n  </Store>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React, { useReducer } from \"react\";\r\n\r\nimport rootReducer from \"./rootReducer\";\r\nimport StateContext from \"./stateContext\";\r\nimport DispatchContext from \"./dispatchContext\";\r\n\r\nexport default function Store(props) {\r\n  const initialState = {\r\n    boundingBox: null,\r\n    radiusMarker: null,\r\n    //\r\n    userLocation: null,\r\n    searchRadius: 3,\r\n    searchCenter: { lat: 48.80582620218145, lng: 2.1164958494489383 }, //paris, versailles,\r\n    photos: null,\r\n    filteredPhotos: null,\r\n    hiddenPhotos: [],\r\n    blockedUsers: []\r\n  };\r\n\r\n  const [state, dispatch] = useReducer(rootReducer, initialState);\r\n\r\n  return (\r\n    <DispatchContext.Provider value={dispatch}>\r\n      <StateContext.Provider value={state}>\r\n        {props.children}\r\n      </StateContext.Provider>\r\n    </DispatchContext.Provider>\r\n  );\r\n}\r\n","module.exports = __webpack_public_path__ + \"static/media/PhotoMarker_20.e88b541b.svg\";"],"sourceRoot":""}