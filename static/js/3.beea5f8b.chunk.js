(window["webpackJsonpflickr-explorer"]=window["webpackJsonpflickr-explorer"]||[]).push([[3],{320:function(e,o){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAlCAYAAAAjt+tHAAAACXBIWXMAAAsTAAALEwEAmpwYAAADSElEQVRYhc2XsU8TURzHP1ehKQWJgILEzRhhMUqLEqIDw90AXSAsBBYHRhKYmN39G2CDjYGhxOStCoEEjIYBiFGjCQGiULDApdQ7h75XrnB37eER/SUv13u/vvf93K+/+/X9NNu2ATAMowqIAFF5rSJcywMWkAMsIUQeQLNtW4lHgZgcUQkQCUnckgA5wJQjJ4TIa7quK/E4UC+vMa4nAiZwAhzJa049ZUyKNwshlkIWLjHDMLrlRwvIO0MfF0IsfRoZ4XhtDXNjI1ThWHs7tYkEQoglwzAeIX8GZ+LFgGsRBy7uqfIsorJdjWsRd4EoaqosDyvbg1jkXwlfpvhvAW729PDk2zfuvXp1yXd3YoKO7W2ahob+CkDTdb0RuA00CiGWljUNgC5Zop22UlODbZquPrWunHUVKm83sA/8cI3A/elp18XPTk9dxQGemmZFABfNFeBGfX3ZhVsDA6y1tpI/POQgnWY9kThf39hIcn+fZCZDVXOz7z6u9f53Nuu7aDOVoi2dLt43pFI0pFIsaxqJnR2qW1qKvuTuLqebm3xsb3fdyzUCn1++9BTfGhwsEXdal22XiCuraWvz3M/zLdh+/dp1/tfbt56b+VkkHg8G8H1ykuPV1UvzN1+8uBKAdXISDABgvbOTvampkrmHc3N8HR+/EkRgAIAvo6Ns9PaWzN3xyRE386sRFZXiwzdvWGttLd5/HRuruPAsV1f7+is+dp3t7LCZSnGrr4/s4mJhc03zLEzKX84CnfsyCwtkFhYuifxNaQ7l33BZ07DPzgKLhwYAsBKNcjA/H0jcCWCFAbHV3x/k65YCyDsGMY+aHYY59i5qRjhvl0yA2kTiWiDUsVyaKTUtTdf1KFAH3MKnMfk0MsLP2dmKxJqGh3kwM+Pqk4eRPSADZKsoRMCk0C4hmwZnaxYBEEK8A8pCKHHDMJ7LKZVfF1szE7AqaU6LZ3ghxKpfJBziSUpzy7s5LdOeq6uzfXvvBuEQ75BPqX5nJ4B7e+5nEixGIU/qJMQHJ4RD/LEUz8phKiEvKwvgAVGnIgE4nzxLAPGKAVwg6iXEqvQlpehREPFAABcg4nJEpStHIfQnQcQDAzggVFKqV1W9Yrkg4gB/AEq+djdASXN9AAAAAElFTkSuQmCC"},321:function(e,o){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAlCAYAAAAjt+tHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC6ElEQVRYhcWXP0wTURyAv5am1KY0JRJMCEkDQhxQREmMooREe4mDOKiDcXEE4wIOrq5uxIFBw2RcSUxYNM8YFgKDRCViTGwkTfwHBUVoylkuV4e+V694tH2llV/y8tp3l/d99+737u7nyWazABiG4QO8gF/2PqobFmADGcAWQlgAnmw2q+B+ICCbXwp4qwS3pUAGMGXLCCEsTywWU/AgEJZ9gNqsgAmkgQ3ZZ9RVBiS8WQgxW2VwQRiGcUb+tAHLufRBIcTs0GiChcU0Hz/9riq4s72e7q4gQohZwzCOIW+DM/ECQE3gwM45VZ55VbarVhO4i0SeqbK8WtmuE979Av9rsZ9R1l5vbvLxfu5o/n9bzwKbKfv/CaysWjR1vKkKUFtgNd6zJ0Ap8Yoet2pSNzknsBz5igTUxM9f/uL78jatLX4uDITLhu5ZYO2Hxe27CV5Mb+bHBvpCTD7u0J6rom145NQ7Ll+MsBrvybf+voaKElVbYPHDFgA3rh0sGB8ZPgTA56+Z2gok16yix9Nbes8HbYGT3UEAvi1vF4zHl0wAWlv8tRUIN9TxaCzK8J0Ec69SLCe3mZ7Z5OatJSYeRAke0Juyol1wZbCRSKSOS9fj+bGnTw5z7nSD9lwlde/d/+I6fr4/XLAL3OBTz9Zpixa/JSVXYHwiyfhEstRpFce+v46VQHXerXphKwHL0ehsr68Z0TF3nunlb7lkAnR3BWsioT7LZZiSaXtisZgfCAERihQmQ6MJJqd+lgW7OtjIw7Go6zFZmKwA60DKR24FTHLlErJocJZmXgAhxAxQUkLBDcM4K4dUfu0szUzALqc4zX/DCyHmi62EA95LYW7tXpyWKM9V7yzfXrtJOOAn5FWq++wUcC/Pi4UUC5DLk5CUeOuUcMCPS3hKNlOBdouSArtIhNRKAM4rT6EBL1vARSIsJeblsV4J3dCBawnskAjKpt40GXJLn9aBaws4JFRSqq2qtlhGBw7wBzAAVz/sPdCmAAAAAElFTkSuQmCC"},322:function(e,o,t){"use strict";t.r(o);var r=t(15),n=t(105),i=t(52),a=t(62),s=t(53);function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,o){return(p=Object.setPrototypeOf||function(e,o){return e.__proto__=o,e})(e,o)}var c=t(0),d=t.n(c),h=t(320),u=t.n(h),w=t(321),g=t.n(w);function A(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);o&&(r=r.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?A(t,!0).forEach((function(o){Object(r.a)(e,o,t[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(t).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}))}return e}var m=function(e){return'\n  <h1 style="font-size:1rem;text-align:center;"> '.concat(e.title?e.title:"untitled photo",' </h1>\n  <img title="').concat(e.title?e.title:"untitled photo",'" style="margin: 0 auto;display: block;cursor:pointer;" \n    src=').concat(e.thumb,' alt="').concat(e.title,'">\n  <a \n    title="open photo in flickr"\n    style="background-color: #3f51b5;\n    width: ').concat(e.width_t,'px;\n    color: white;\n    padding: 4px 5px;\n    text-align: center;\n    text-decoration: none;\n    display: inline-block;\n    text-align: center;\n    margin: 0 auto 0.5rem ;\n    display: block;" \n    href=https://www.flickr.com/photos/').concat(e.owner,"/").concat(e.photoId,'\n    target="_blank">View in flickr\n  </a>\n  ')},v={width:"100vw",border:"1px solid black",maxWidth:"100%",boxSizing:"border-box",minHeight:"75vh",maxHeight:"100%"},C=function(e){function o(){var e,t,r,i;Object(n.a)(this,o);for(var p=arguments.length,c=new Array(p),d=0;d<p;d++)c[d]=arguments[d];return r=this,i=(e=l(o)).call.apply(e,[this].concat(c)),(t=!i||"object"!==Object(a.a)(i)&&"function"!==typeof i?Object(s.a)(r):i).state={boundingBox:null,selectionMarker:null,photoMarkers:[],favorites:[]},t.handleGoogleMapsError=function(){window.gm_authFailure=function(){t.props.handleGoogleMapsError(),document.querySelector(".gm-err-title").innerHTML="Oops it seems there was a problem loading Google Maps!",document.querySelector(".gm-err-message").innerHTML="Failed to authenticate Google Maps, please try again later"}},t.createGoogleApiScript=function(e){var o=window.document.querySelector("body"),r=window.document.createElement("script");r.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCzs3fKNRPknPJs8LaW9rsCvBxeY2QCJhg&v=3&libraries=places&callback=initMap",r.async=!0,r.defer=!0,r.onerror=function(){document.write("Error Loading Google Maps...")},o.insertBefore(r,o.lastElementChild),r.addEventListener("load",(function(){t.props.setMapLoaded()}))},t.initMap=function(){console.log("Google Maps API Loaded...");window.map=new window.google.maps.Map(document.getElementById("map-container"),{center:{lat:47.55241106676634,lng:11.389968539500511},zoom:5,gestureHandling:"cooperative",mapTypeId:window.google.maps.MapTypeId.TERRAIN,streetViewControl:!1,fullscreenControl:!1}),window.largeInfowindow=new window.google.maps.InfoWindow({maxWidth:200}),window.google.maps.event.addListenerOnce(window.map,"idle",(function(){document.getElementsByTagName("iframe")[0].title="Google Maps"}))},t.addPolygon=function(){var e=window.map.center.toJSON();if(t.state.boundingBox)t.removePolygon(),t.props.setBounds(null);else{var o=window.map.getBounds().toJSON(),r=(o.north-o.south)/5,n=(o.east-o.west)/5,i={north:e.lat+r,south:e.lat-r,east:e.lng+n,west:e.lng-n};t.removePolygon(),t.removeMarker(),t.rectangle=new window.google.maps.Rectangle({bounds:i,editable:!0,draggable:!0}),t.rectangle.setMap(window.map),t.props.getRadiusMarkerCoordinates(null),t.props.setBounds(i),t.rectangle.addListener("bounds_changed",(function(){return t.props.setBounds(t.rectangle.bounds.toJSON())})),t.setState({boundingBox:t.rectangle}),window.polygon=t.rectangle}},t.removePolygon=function(){t.state.boundingBox&&(t.state.boundingBox.setMap(null),t.setState({boundingBox:null}))},t.createPhotoMarker=function(e,o){var r=new window.google.maps.Marker({position:e.geolocation,map:o?window.map:null,icon:g.a,scaledSize:.5,title:e.title,animation:window.google.maps.Animation.DROP,photoId:e.photoId,color:"blue"});window.SETIMG=function(){return window.LASTMARKER.setIcon(u.a)},window.RESET=function(){t.state.photoMarkers.forEach((function(e){return e.setMap(null)})),t.setState({photoMarkers:[]})},t.setState((function(e){var o=e.photoMarkers;return o.push(r),{photoMarkers:o}})),r.addListener("click",(function(){window.map.panTo(this.getPosition()),window.largeInfowindow.setContent(m(e)),window.largeInfowindow.open(window.map,r)})),window.photoMarker=r},t.showAllPhotoMarkers=function(){for(var e=window.map,o=t.state.photoMarkers,r=0;r<o.length;r++)o[r].setMap(e)},t.hideAllPhotoMarkers=function(){for(var e=t.state.photoMarkers,o=0;o<e.length;o++)e[o].setMap(null)},t.showAllFavorites=function(){for(var e=window.map,o=t.state.favorites,r=0;r<o.length;r++)o[r].setMap(e)},t.hideAllFavorites=function(){for(var e=t.state.favorites,o=0;o<e.length;o++)e[o].setMap(null)},t.pinFavorite=function(e,o){var r=new window.google.maps.Marker({position:e.geolocation,map:o?window.map:null,icon:u.a,title:e.title,animation:window.google.maps.Animation.DROP,photoId:e.photoId,favorite:!0});t.setState((function(e){var o=e.favorites;return o.push(r),{favorites:o}})),r.addListener("click",(function(){window.map.panTo(this.getPosition()),window.largeInfowindow.setContent(m(e)),window.largeInfowindow.open(window.map,r)}))},t.addSearchCircle=function(e){t.searchCircle=new window.google.maps.Circle({strokeColor:"#0e2a99",strokeOpacity:.8,strokeWeight:2,fillColor:"#64b1e8",fillOpacity:.35,map:window.map,center:e||{lat:48.8,lng:2.29},radius:1e3*t.props.searchRadius,draggable:!0}),window.SEARCHRADIUS=t.searchCircle,t.centerSearchCircle=new window.google.maps.Circle({strokeColor:"#0e0047",strokeOpacity:.8,strokeWeight:3,fillColor:"#0e0047",fillOpacity:.35,map:window.map,center:t.searchCircle.center.toJSON(),radius:10}),t.searchCircle.addListener("drag",(function(){t.centerSearchCircle.setCenter(t.searchCircle.center.toJSON())})),t.searchCircle.addListener("dragend",(function(){t.props.setSearchCenter(t.searchCircle.center.toJSON())})),t.searchCircle.addListener("center_changed",(function(){t.props.setSearchCenter(t.searchCircle.center.toJSON()),t.centerSearchCircle.setCenter(t.searchCircle.center.toJSON())}))},t.zoomToBounds=function(){var e=t.searchCircle.getCenter().toJSON(),o={north:e.lat+.009*t.props.searchRadius,south:e.lat-.009*t.props.searchRadius,east:e.lng+.009*t.props.searchRadius,west:e.lng-.009*t.props.searchRadius};console.log(o),window.map.fitBounds(o)},t}return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),o&&p(e,o)}(o,e),Object(i.a)(o,[{key:"componentDidMount",value:function(){window.initMap=this.initMap,this.handleGoogleMapsError(),this.createGoogleApiScript(this.state.userLocation)}},{key:"componentDidUpdate",value:function(e,o){var t=this;if(console.log(this.props),e.searchRadius!==this.props.searchRadius&&this.searchCircle.setRadius(1e3*this.props.searchRadius),console.log("map updated"),e.photos!==this.props.photos){console.log("PHOTOS CHANGED - RERENDERING MARKERS");var r=this.props.photos;this.state.photoMarkers.forEach((function(e){return e.setMap(null)})),this.setState({photoMarkers:[]}),r.forEach((function(e){return t.createPhotoMarker(e,t.props.displayPhotoMarkers)}))}else console.log("PHOTOS DID NOT CHANGE - NO RERENDER FOR MARKERS");if(e.favorites!==this.props.favorites){console.log("if prevProps favorites...."),this.hideAllFavorites(),this.setState({favorites:[]});var n=this.props.displayFavorites;this.props.favorites.forEach((function(e){return t.pinFavorite(e,n)}))}e.displayPhotoMarkers!==this.props.displayPhotoMarkers&&(console.log("SHOW/HIDE PHOTOMARKERS"),this.props.displayPhotoMarkers?this.showAllPhotoMarkers():this.hideAllPhotoMarkers()),e.displayFavorites!==this.props.displayFavorites&&(console.log("SHOW/HIDE PHOTOMARKERS"),this.props.displayFavorites?this.showAllFavorites():this.hideAllFavorites()),this.props.triggerPhotoMarker&&(this.createPhotoMarker(this.props.triggerPhotoMarker,this.props.displayPhotoMarkers),this.props.disableTriggerPhotoMarker()),this.props.triggerCenter&&(this.searchCircle.setCenter(window.map.getCenter().toJSON()),this.props.disableCenter()),this.props.triggerZoom&&(this.zoomToBounds(),this.props.disableZoom())}},{key:"render",value:function(){return d.a.createElement("div",{role:"application","aria-label":"Map",id:"map-container",style:this.props.screenWidth900px?v:f({},v,{minHeight:"50vh",flexGrow:"1"})})}}]),o}(d.a.Component);o.default=d.a.memo(C)}}]);
//# sourceMappingURL=3.beea5f8b.chunk.js.map