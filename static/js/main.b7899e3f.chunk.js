(window["webpackJsonpflickr-explorer"]=window["webpackJsonpflickr-explorer"]||[]).push([[0],{162:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(7),i=a.n(r),c=(a(93),a(10)),l=a(13),s=function(e){var t;console.log(e);var a=["cat","eagle","pancakes","cats","parrot","crusade","WW2","tank","Tal","nun","rose","nike","java","javaScript"],n=a[Math.floor(Math.random()*a.length)],o=new URLSearchParams;if(o.append("method","flickr.photos.search"),o.append("api_key","f6536bb373bca1fcd14d4da1281f2839"),e.search&&o.append("text",n),"boundingBox"===e.type){var r=e.south,i=e.west,c=e.north,l=e.east;t={type:"boundingBox",south:r,west:i,north:c,east:l},o.append("bbox","".concat(i,",").concat(r,",").concat(l,",").concat(c))}return"radiusMarker"===e.type&&(t={type:"radiusMarker",lat:e.lat,lng:e.lng},o.append("lat",e.lat),o.append("lon",e.lng)),o.append("has_geo","1"),o.append("radius","3"),o.append("radius_units","km"),o.append("per_page","100"),o.append("format","json"),o.append("nojsoncallback","1"),o.append("extras","url_m,url_c,url_l,url_h,url_o"),e.page&&o.append("page",e.page),fetch("https://api.flickr.com/services/rest/?"+o).then((function(e){return console.log(o),e.json().then((function(e){return console.log(e),{currentPage:e.photos.page,totalPages:e.photos.pages,totalPhotos:e.photos.total,perPage:e.photos.perpage,query:t,photos:e.photos.photo.map((function(e){return{photoId:e.id,width_c:e.width_c?parseInt(e.width_c):"",width_h:e.width_h?parseInt(e.width_h):"",width_l:e.width_l?parseInt(e.width_l):"",width_m:e.width_m?parseInt(e.width_m):"",width_o:e.width_o?parseInt(e.width_o):"",height_c:e.height_c?parseInt(e.height_c):"",height_h:e.height_h?parseInt(e.height_h):"",height_l:e.height_l?parseInt(e.height_l):"",height_m:e.height_m?parseInt(e.height_m):"",height_o:e.height_o?parseInt(e.height_o):"",height:e.height_m?parseInt(e.height_m):e.height_o?parseInt(e.height_o):100,width:e.width_m?parseInt(e.width_m):e.width_o?parseInt(e.width_o):100,src:e.url_l?e.url_l:e.url_m?e.url_m:e.url_o,title:e.title,alt:e.title,key:e.id,srcSet:[e.url_m?"".concat(e.url_m," ").concat(e.width_m,"w"):"",e.url_c?"".concat(e.url_c," ").concat(e.width_c,"w"):"",e.url_l?"".concat(e.url_l," ").concat(e.width_l,"w"):"",e.url_h?"".concat(e.url_h," ").concat(e.width_h,"w"):"",e.url_o?"".concat(e.url_o," ").concat(e.width_o,"w"):""],sizes:"(min-width: 480px) 50vw, (min-width: 1024px) 33.3vw, 100vw"}}))}}))})).catch((function(e){return console.log(e),["error"]}))},p=function(e){var t=new URLSearchParams;return t.append("method","flickr.photos.geo.getLocation"),t.append("api_key","f6536bb373bca1fcd14d4da1281f2839"),t.append("format","json"),t.append("nojsoncallback","1"),t.append("photo_id",e),fetch("https://api.flickr.com/services/rest?"+t).then((function(e){return e.json().then((function(e){return{lat:parseFloat(e.photo.location.latitude),lng:parseFloat(e.photo.location.longitude)}}))})).catch((function(e){return console.log(e),["error"]}))},u=a(70),d=a(27),g=a(71),m=a(72),h=a(81),b=a(73),f=a.n(b),w={width:"100vw",height:"75vh",border:"1px solid black",maxWidth:"100%",boxSizing:"border-box"},v=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={boundingBox:null,selectionMarker:null,pinndedPhotos:[]},a.handleGoogleMapsError=function(){window.gm_authFailure=function(){a.props.handleGoogleMapsError(),document.querySelector(".gm-err-title").innerHTML="Oops it seems there was a problem loading Google Maps!",document.querySelector(".gm-err-message").innerHTML="Failed to authenticate Google Maps, please try again later"}},a.createGoogleApiScript=function(e){var t=window.document.querySelector("body"),a=window.document.createElement("script");a.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCzs3fKNRPknPJs8LaW9rsCvBxeY2QCJhg&v=3&callback=initMap",a.async=!0,a.defer=!0,a.onerror=function(){document.write("Error Loading Google Maps...")},t.insertBefore(a,t.lastElementChild)},a.initMap=function(){console.log("Google Maps API Loaded..."),window.map=new window.google.maps.Map(document.getElementById("map-container"),{center:{lat:48.80582620218145,lng:2.1164958494489383},zoom:8,gestureHandling:"cooperative",mapTypeId:window.google.maps.MapTypeId.TERRAIN}),window.largeInfowindow=new window.google.maps.InfoWindow({maxWidth:200}),window.google.maps.event.addListenerOnce(window.map,"idle",(function(){document.getElementsByTagName("iframe")[0].title="Google Maps"}))},a.addPolygon=function(){var e=window.map.center.toJSON();if(a.state.boundingBox)a.removePolygon(),a.props.setBounds(null);else{var t=window.map.getBounds().toJSON(),n=(t.north-t.south)/5,o=(t.east-t.west)/5,r={north:e.lat+n,south:e.lat-n,east:e.lng+o,west:e.lng-o};a.removePolygon(),a.removeMarker(),a.rectangle=new window.google.maps.Rectangle({bounds:r,editable:!0,draggable:!0}),a.rectangle.setMap(window.map),a.props.getRadiusMarkerCoordinates(null),a.props.setBounds(r),a.rectangle.addListener("bounds_changed",(function(){return a.props.setBounds(a.rectangle.bounds.toJSON())})),a.setState({boundingBox:a.rectangle}),window.polygon=a.rectangle}},a.removeMarker=function(){a.state.selectionMarker&&(a.state.selectionMarker.setMap(null),a.setState({selectionMarker:null}))},a.removePolygon=function(){a.state.boundingBox&&(a.state.boundingBox.setMap(null),a.setState({boundingBox:null}))},a.addRadiusMarker=function(e){if(a.state.selectionMarker)a.removeMarker(),a.props.getRadiusMarkerCoordinates(null);else{var t=e||window.map.center.toJSON();a.removeMarker(),a.removePolygon();var n=new window.google.maps.Marker({position:t,map:window.map,title:"Test",draggable:!0,animation:window.google.maps.Animation.DROP});n.addListener("dragend",(function(){return a.props.getRadiusMarkerCoordinates(n.getPosition().toJSON())})),a.setState({selectionMarker:n}),a.props.setBounds(null),a.props.getRadiusMarkerCoordinates(n.getPosition().toJSON()),window.marker=n}},a.pinPhotoMarkerOnMap=function(e){var t={url:f.a,scale:.1},n=new window.google.maps.Marker({position:e.position,map:window.map,icon:t,title:e.title,animation:window.google.maps.Animation.DROP});window.map.panTo(n.getPosition()),a.setState((function(e){var t=e.pinndedPhotos;return t.push(n),{pinndedPhotos:t}})),n.addListener("click",(function(){window.map.panTo(this.getPosition()),window.largeInfowindow.setContent("test"),window.largeInfowindow.open(window.map,n)})),window.photoMarker=n},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){window.initMap=this.initMap,this.handleGoogleMapsError(),this.createGoogleApiScript(this.state.userLocation)}},{key:"componentDidUpdate",value:function(e,t){var a=this;if(console.log("map updated"),e.userLocation!==this.props.userLocation)var n=3e3,o=setInterval((function(){n<=0&&r(),window.map?(window.map.panTo(a.props.userLocation),a.addRadiusMarker(a.props.userLocation),r()):n-=10}),10),r=function(){return clearInterval(o)};this.props.triggerPhotoMarker&&(this.pinPhotoMarkerOnMap(this.props.triggerPhotoMarker),this.props.disableTriggerPhotoMarker()),this.props.triggerPlotRadiusMarkerOnMap&&(this.addRadiusMarker(),this.props.disableRadiusTrigger()),this.props.triggerBoundingBox&&(this.addPolygon(),this.props.disableBoundingBoxTrigger())}},{key:"render",value:function(){return o.a.createElement("div",{title:"map",role:"application","aria-label":"Map with Landmarks and GeoTagged photos",id:"map-container",style:w})}}]),t}(o.a.Component),O=o.a.createContext(),y=o.a.createContext();function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var x="SET_BOUNDING_BOX",M="SET_RADIUS_MARKER",_=function(e,t){switch(t.type){case x:return console.log(t.type),function(e,t){return k({},t,{boundingBox:e.boundingBox})}(t,e);case M:return console.log(t.type),function(e,t){return k({},t,{radiusMarker:e.radiusMarker})}(t,e);default:return e}},P=a(74),j=a(187),S=a(216),B=a(188),C=a(189),I=a(190),z=a(191),R=a(192),N=a(193),D=a(194),T=a(195),L=a(214),F=a(198),H=a(196),A=a(197),G=a(199),q=function(e){return o.a.createElement("svg",Object.assign({viewBox:"0 0 448 448"},e),o.a.createElement("circle",{cx:106.667,cy:127.973,r:106.667,fill:"#2196f3"}),o.a.createElement("circle",{cx:341.333,cy:127.973,r:106.667,fill:"#ec407a"}),o.a.createElement("g",{fill:"#455a64"},o.a.createElement("path",{d:"M32 426.64c-5.891 0-10.667-4.776-10.667-10.667V330.64c0-17.673 14.327-32 32-32H64c5.891 0 10.667 4.776 10.667 10.667S69.891 319.973 64 319.973H53.333c-5.891 0-10.667 4.776-10.667 10.667v85.333c.001 5.891-4.775 10.667-10.666 10.667z"}),o.a.createElement("path",{d:"M64 362.64H10.667C4.776 362.64 0 357.864 0 351.973s4.776-10.667 10.667-10.667H64c5.891 0 10.667 4.776 10.667 10.667S69.891 362.64 64 362.64zM96 426.64c-5.891 0-10.667-4.776-10.667-10.667V309.306c0-5.891 4.776-10.667 10.667-10.667s10.667 4.776 10.667 10.667v106.667c0 5.891-4.776 10.667-10.667 10.667zM138.667 426.64c-5.891 0-10.667-4.776-10.667-10.667v-64c0-5.891 4.776-10.667 10.667-10.667s10.667 4.776 10.667 10.667v64c-.001 5.891-4.776 10.667-10.667 10.667zM213.333 426.64c-23.564 0-42.667-19.103-42.667-42.667s19.103-42.667 42.667-42.667a50.366 50.366 0 0140.384 14.72c3.652 4.624 2.864 11.334-1.76 14.987-4.624 3.652-11.334 2.865-14.987-1.76a33.21 33.21 0 00-23.637-6.613c-11.782 0-21.333 9.551-21.333 21.333 0 11.782 9.551 21.333 21.333 21.333a36.905 36.905 0 0024.576-7.659c4.234-3.978 10.873-3.836 14.933.32 4.066 4.148 4.066 10.786 0 14.933a56.658 56.658 0 01-39.509 13.74zM288 426.64c-5.891 0-10.667-4.776-10.667-10.667V309.306c0-5.891 4.776-10.667 10.667-10.667s10.667 4.776 10.667 10.667v106.667c0 5.891-4.776 10.667-10.667 10.667z"}),o.a.createElement("path",{d:"M330.667 426.64a10.663 10.663 0 01-7.552-3.115l-42.667-42.667c-4.17-4.162-4.176-10.915-.014-15.085.499-.5 1.047-.95 1.636-1.342l32-21.333c4.901-3.27 11.525-1.947 14.795 2.955s1.947 11.525-2.955 14.795l-21.163 14.123 33.451 33.472c4.159 4.172 4.149 10.926-.024 15.085a10.672 10.672 0 01-7.507 3.112zM373.333 426.64c-5.891 0-10.667-4.776-10.667-10.667v-64c0-5.891 4.776-10.667 10.667-10.667S384 346.082 384 351.973v64c0 5.891-4.776 10.667-10.667 10.667z"}),o.a.createElement("path",{d:"M373.333 405.306c-5.891 0-10.667-4.776-10.667-10.667 0-29.455 23.878-53.333 53.333-53.333 5.891 0 10.667 4.776 10.667 10.667s-4.776 10.667-10.667 10.667c-17.673 0-32 14.327-32 32 .001 5.891-4.775 10.666-10.666 10.666zM139.093 319.973c-5.891 0-10.667-4.776-10.667-10.667s4.776-10.667 10.667-10.667h.213c5.891 0 10.667 4.776 10.667 10.667s-4.776 10.667-10.667 10.667h-.213z"})),o.a.createElement("path",{d:"M106.667 234.64C47.756 234.64 0 186.883 0 127.973S47.756 21.306 106.667 21.306s106.667 47.756 106.667 106.667c-.071 58.881-47.786 106.596-106.667 106.667zm0-192c-47.128 0-85.333 38.205-85.333 85.333s38.205 85.333 85.333 85.333S192 175.101 192 127.973 153.795 42.64 106.667 42.64zM341.333 234.64c-58.91 0-106.667-47.756-106.667-106.667S282.423 21.306 341.333 21.306 448 69.063 448 127.973c-.07 58.881-47.786 106.596-106.667 106.667zm0-192C294.205 42.64 256 80.845 256 127.973s38.205 85.333 85.333 85.333 85.333-38.205 85.333-85.333-38.204-85.333-85.333-85.333zM32 426.64c-5.891 0-10.667-4.776-10.667-10.667V330.64c0-17.673 14.327-32 32-32H64c5.891 0 10.667 4.776 10.667 10.667S69.891 319.973 64 319.973H53.333c-5.891 0-10.667 4.776-10.667 10.667v85.333c.001 5.891-4.775 10.667-10.666 10.667z"}),o.a.createElement("path",{d:"M64 362.64H10.667C4.776 362.64 0 357.864 0 351.973s4.776-10.667 10.667-10.667H64c5.891 0 10.667 4.776 10.667 10.667S69.891 362.64 64 362.64zM96 426.64c-5.891 0-10.667-4.776-10.667-10.667V309.306c0-5.891 4.776-10.667 10.667-10.667s10.667 4.776 10.667 10.667v106.667c0 5.891-4.776 10.667-10.667 10.667zM138.667 426.64c-5.891 0-10.667-4.776-10.667-10.667v-64c0-5.891 4.776-10.667 10.667-10.667s10.667 4.776 10.667 10.667v64c-.001 5.891-4.776 10.667-10.667 10.667zM213.333 426.64c-23.564 0-42.667-19.103-42.667-42.667s19.103-42.667 42.667-42.667a50.39 50.39 0 0140.363 14.699c3.658 4.619 2.88 11.328-1.739 14.987-4.619 3.658-11.328 2.88-14.987-1.739a33.21 33.21 0 00-23.637-6.613c-11.782 0-21.333 9.551-21.333 21.333 0 11.782 9.551 21.333 21.333 21.333a36.93 36.93 0 0024.576-7.659c4.234-3.978 10.873-3.836 14.933.32 4.066 4.148 4.066 10.786 0 14.933a56.616 56.616 0 01-39.509 13.74zM288 426.64c-5.891 0-10.667-4.776-10.667-10.667V309.306c0-5.891 4.776-10.667 10.667-10.667s10.667 4.776 10.667 10.667v106.667c0 5.891-4.776 10.667-10.667 10.667z"}),o.a.createElement("path",{d:"M330.667 426.64a10.663 10.663 0 01-7.552-3.115l-42.667-42.667c-4.17-4.162-4.176-10.915-.014-15.085.499-.5 1.047-.95 1.636-1.342l32-21.333c4.901-3.27 11.525-1.947 14.795 2.955s1.947 11.525-2.955 14.795l-21.184 14.123 33.472 33.472c4.159 4.172 4.149 10.926-.024 15.085a10.672 10.672 0 01-7.507 3.112zM373.333 426.64c-5.891 0-10.667-4.776-10.667-10.667v-64c0-5.891 4.776-10.667 10.667-10.667S384 346.082 384 351.973v64c0 5.891-4.776 10.667-10.667 10.667z"}),o.a.createElement("path",{d:"M373.333 405.306c-5.891 0-10.667-4.776-10.667-10.667 0-29.455 23.878-53.333 53.333-53.333 5.891 0 10.667 4.776 10.667 10.667s-4.776 10.667-10.667 10.667c-17.673 0-32 14.327-32 32 .001 5.891-4.775 10.666-10.666 10.666zM139.093 319.973c-5.891 0-10.667-4.776-10.667-10.667 0-5.85 4.711-10.608 10.56-10.667h.213c5.891 0 10.667 4.776 10.667 10.667s-4.776 10.667-10.667 10.667h-.106z"}))},J=Object(P.a)((function(e){return{root:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2)},grow:{flexGrow:1,color:"red",width:"100px"},icons_container:{display:"flex"}}}));function W(e){var t=Object(j.a)();return o.a.createElement(S.a,{appear:!1,direction:"down",in:!e.appBarHide&&!t},e.children)}function V(e){var t=e.children,a=J(),n=Object(j.a)({disableHysteresis:!0,threshold:100});return o.a.createElement(B.a,{in:n},o.a.createElement("div",{onClick:function(e){var t=(e.target.ownerDocument||document).querySelector("#back-to-top-anchor");t&&t.scrollIntoView({behavior:"smooth",block:"center"})},role:"presentation",className:a.root},t))}function U(e){var t=Object(C.a)("(min-width:1200px)"),a=J();return o.a.createElement(o.a.Fragment,null,o.a.createElement(I.a,null),o.a.createElement(W,Object.assign({appBarHide:e.appBarHide},e),o.a.createElement(z.a,null,o.a.createElement(R.a,null,o.a.createElement(q,{style:{width:"40px",marginRight:"0.75rem",fill:"white"},"aria-label":"Flickr"}),o.a.createElement(N.a,{variant:"h6"},o.a.createElement("span",{style:{color:"#dedee6"}},"Geo"),o.a.createElement("span",{style:{color:"#ffc1d5"}},"Explorer")),o.a.createElement("div",{className:a.grow}),o.a.createElement("div",{className:a.icons_container},o.a.createElement(D.a,{title:"Search Photos","aria-label":"Search Photos"},o.a.createElement(T.a,{color:"inherit","aria-label":"search photos",onClick:e.searchFlikr},o.a.createElement(H.a,null))),o.a.createElement(D.a,{title:"Toggle Map","aria-label":"Toggle Map"},o.a.createElement(T.a,{color:"inherit","aria-label":"toggle map",onClick:e.toggleMap},o.a.createElement(A.a,null))))))),o.a.createElement(R.a,{id:"back-to-top-anchor"}),o.a.createElement(L.a,{style:t?{margin:"5px 25px 2px"}:{margin:"5px 0 2px"}},e.children),o.a.createElement(V,e,o.a.createElement(F.a,{color:"secondary",size:"small","aria-label":"scroll back to top"},o.a.createElement(G.a,null))))}var K=a(77),Q=a(200);function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var $=Object(P.a)((function(e){return{pin_to_map_btn:{position:"absolute",bottom:"2px",left:"2px",backgroundColor:"#f500577a","&:hover":{boxShadow:"0px 0px 11px 0px rgba(0,0,0,0.75)"}},options_btn:{top:"2px",right:"2px",position:"absolute",backgroundColor:"#ffffff59","&:hover":{backgroundColor:"#fff",boxShadow:"0px 0px 11px 0px rgba(0,0,0,0.75)"}},image:{margin:"2px",display:"block"}}})),Z=function(e){var t=e.index,a=e.photo,n=e.margin,r=e.direction,i=e.top,c=e.left,l=(e.selected,e.pinPhotoOnMap),s=e.openLightbox,u=$(),d={backgroundColor:"#eee",cursor:"pointer",overflow:"hidden",position:"relative"};return console.log(r),"column"===r&&(d.position="absolute",d.left=c,d.top=i),o.a.createElement("div",{style:Y({margin:n,height:a.height,width:a.width},d),className:u.container},o.a.createElement("img",Object.assign({},a,{alt:a.alt,className:u.image,onClick:function(e){return s.call(void 0,e,{index:t,photo:a})}})),o.a.createElement(F.a,{size:"small",color:"secondary","aria-label":"add",className:u.pin_to_map_btn,onClick:function(e){p(e).then((function(e){var t={position:e,thumbnail:a.src,title:a.title,id:a.photoId};return l(t)}))}.bind(void 0,a.photoId)},o.a.createElement(Q.a,null)),o.a.createElement("p",null,"Image Title and stuff"))},ee=a(43),te=a(201),ae=a(202),ne=a(203);function oe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?oe(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ie=Object(P.a)((function(e){return{header_container:{position:"absolute",top:"1px",width:"100vw",display:"flex",zIndex:"2000",justifyContent:"space-between",transition:"opacity 300ms",opacity:"1"},lightbox_btn:{color:"#fff",background:"rgba(255, 255, 255, 0.2)",margin:"2px",border:"1px solid #00000024","&:hover":{boxShadow:"0px 0px 11px 0px rgba(0,0,0,0.75)",background:"rgba(255, 255, 255, 0.3)"}},hide_on_idle:{opacity:"0"}}})),ce=function(e){return re({},e,{background:"rgba(255, 255, 255, 0.2)","&:hover, &:active":{boxShadow:"0px 0px 11px 0px rgba(0,0,0,0.75)",background:"rgba(255, 255, 255, 0.3)"},"&:active":{boxShadow:"0 1px 3px rgba(0, 0, 0, 0.14)",transform:"scale(0.96)"}})},le=function(e){var t=ie();return e.isModal?o.a.createElement("div",{className:e.interactionIsIdle?t.header_container+" "+t.hide_on_idle:t.header_container},o.a.createElement(T.a,{"aria-label":"Pin photo on map",className:t.lightbox_btn,onClick:function(t){p(t).then((function(t){var a={position:t,thumbnail:e.data.src,title:e.data.title,id:e.data.photoId};return e.carouselProps.pinPhotoOnMap(a)}))}.bind(void 0,e.data.photoId)},o.a.createElement(Q.a,null)),o.a.createElement("div",{className:t.btn_container_right},o.a.createElement(T.a,{"aria-label":"toggle fullscreen",className:t.lightbox_btn,edge:"start",onClick:e.modalProps.toggleFullscreen},e.modalProps.isFullscreen?o.a.createElement(te.a,null):o.a.createElement(ae.a,null)),!e.modalProps.isFullscreen&&o.a.createElement(T.a,{"aria-label":"Close",className:t.lightbox_btn,edge:"start",onClick:e.modalProps.onClose},o.a.createElement(ne.a,null)))):null},se=function(e){var t=e.photos,a=e.responseDetails,r=e.direction,i=e.pinPhotoOnMap,c=e.setAppBarHide,s=Object(n.useState)(0),p=Object(l.a)(s,2),u=p[0],d=p[1],g=Object(n.useState)(!1),m=Object(l.a)(g,2),h=m[0],b=m[1],f=Object(n.useCallback)((function(e,t){t.photo;var a=t.index;c(!0),d(a),b(!0)}),[c]),w=i,v=Object(n.useCallback)((function(e){var t=e.index,a=e.left,n=e.top,i=e.key,c=(e.containerHeight,e.photo),l=e.onClick;return o.a.createElement(Z,{key:i,margin:"2px",index:t,photo:c,left:a,top:n,pinPhotoOnMap:w,direction:r,openLightbox:l})}),[r,w]);return o.a.createElement("div",null,o.a.createElement(N.a,{variant:"h3",style:{marginTop:"1rem"}},"Results:"),o.a.createElement(N.a,{variant:"subtitle1",component:"h2",gutterBottom:!0},0===t.length?"Sorry could not find any photos in that particular area":"Displaying ".concat(t.length," of ").concat(a.totalPhotos," the photos found...")),t.length>0&&o.a.createElement(K.a,{photos:t,direction:r,renderImage:v,onClick:f}),o.a.createElement(ee.b,null,h?o.a.createElement(ee.a,{onClose:function(){d(0),b(!1),c(!1)}},o.a.createElement(ee.c,{pinPhotoOnMap:w,components:{Header:le},currentIndex:u,views:t.map((function(e){return re({},e,{srcset:e.srcSet,caption:e.title})})),styles:{navigationPrev:ce,navigationNext:ce}})):null))},pe=a(164),ue=a(205),de=a(212),ge=a(213),me=a(204),he=a(167),be=a(165),fe=a(211),we=a(215),ve=a(217),Oe=a(206),ye=a(207),Ee=a(208),ke=a(209),xe=a(210),Me=Object(P.a)((function(e){return{split_btn:{margin:"2px",display:"inline-block"},popper:{zIndex:"2"},btn_icons:{marginRight:"8px"}}})),_e=["Radius","Bounding Box"];function Pe(e){var t=Object(n.useContext)(O),a=Object(C.a)("(max-width:400px)"),r=o.a.useState(!1),i=Object(l.a)(r,2),c=i[0],s=i[1],p=o.a.useRef(null),u=o.a.useState(0),d=Object(l.a)(u,2),g=d[0],m=d[1],h=Me();function b(e){p.current&&p.current.contains(e.target)||s(!1)}return o.a.createElement(o.a.Fragment,null,o.a.createElement(me.a,{variant:"contained",color:"primary",ref:p,"aria-label":"split button",className:h.split_btn,size:"small"},o.a.createElement(ue.a,{variant:"contained",size:a?"medium":"small",onClick:1===g?e.pinBoundingBoxOnMap:e.pinRadiusMarkerOnMap},1===g&&t.boundingBox&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Oe.a,{className:h.btn_icons}),"Remove BoundingBox"),1===g&&!t.boundingBox&&o.a.createElement(o.a.Fragment,null,o.a.createElement(ye.a,{className:h.btn_icons}),"Add "+_e[g]),0===g&&t.radiusMarker&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Ee.a,{className:h.btn_icons}),"Remove Radius"),0===g&&!t.radiusMarker&&o.a.createElement(o.a.Fragment,null,o.a.createElement(ke.a,{className:h.btn_icons}),"Add "+_e[g])),o.a.createElement(ue.a,{color:"primary",size:a?"medium":"small","aria-owns":c?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:function(){s((function(e){return!e}))}},o.a.createElement(xe.a,null))),o.a.createElement(he.a,{className:h.popper,open:c,anchorEl:p.current,transition:!0,disablePortal:!0},(function(e){var t=e.TransitionProps,a=e.placement;return o.a.createElement(be.a,Object.assign({},t,{style:{transformOrigin:"bottom"===a?"center top":"center bottom"}}),o.a.createElement(pe.a,{id:"menu-list-grow"},o.a.createElement(fe.a,{onClickAway:b},o.a.createElement(we.a,null,_e.map((function(e,t){return o.a.createElement(ve.a,{key:e,selected:t===g,onClick:function(e){return function(e,t){m(t),s(!1)}(0,t)}},"Add "+e)}))))))})))}var je=Object(P.a)((function(e){return{controls_panel:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},controls:{color:"#fff",margin:"5px"},controls_mobile:{margin:"0.25rem"},control_icon:{marginRight:"8px"}}})),Se=function(e){var t=Object(C.a)("(max-width:400px)"),a=je();return o.a.createElement(pe.a,{className:a.controls_panel},o.a.createElement(Pe,{pinBoundingBoxOnMap:e.pinBoundingBoxOnMap,pinRadiusMarkerOnMap:e.pinRadiusMarkerOnMap}),o.a.createElement(ue.a,{variant:"contained",color:"primary",size:t?"medium":"small",onClick:e.searchFlikr,className:t?a.controls_mobile:a.controls},o.a.createElement(H.a,{className:a.control_icon}),"Search Photos"),o.a.createElement(ue.a,{variant:"contained",color:"primary",size:t?"medium":"small",onClick:e.toggleGridDirection,className:t?a.controls_mobile:a.controls},"column"===e.gridDirection?o.a.createElement(o.a.Fragment,null,o.a.createElement(de.a,{className:a.control_icon}),"Switch layout to Rows"):o.a.createElement(o.a.Fragment,null,o.a.createElement(ge.a,{className:a.control_icon}),"Switch layout to Columns")))},Be=Object(P.a)((function(e){return{button:{margin:"1rem auto",display:"block"}}})),Ce=function(e){var t=Be();return o.a.createElement(ue.a,{onClick:e.onClick,variant:"outlined",size:"large",className:t.button},"Load more photos")};function Ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ze(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ie(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ie(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Re=function(){var e=Object(n.useContext)(O),t=Object(n.useContext)(y),a=Object(n.useState)(null),r=Object(l.a)(a,2),i=r[0],c=r[1],p=Object(n.useState)(!0),u=Object(l.a)(p,2),d=u[0],g=u[1],m=Object(n.useState)(!1),h=Object(l.a)(m,2),b=h[0],f=h[1],w=Object(n.useState)(null),E=Object(l.a)(w,2),k=E[0],_=E[1],P=Object(n.useState)("row"),j=Object(l.a)(P,2),S=j[0],B=j[1],C=Object(n.useState)(!1),I=Object(l.a)(C,2),z=I[0],R=I[1],N=Object(n.useState)(!1),D=Object(l.a)(N,2),T=D[0],L=D[1],F=Object(n.useState)(!1),H=Object(l.a)(F,2),A=H[0],G=H[1],q=Object(n.useState)(!1),J=Object(l.a)(q,2),W=J[0],V=J[1],K=function(){var t;console.log("fetching..."),t=e.boundingBox?ze({},e.boundingBox,{type:"boundingBox"}):e.radiusMarker?ze({},e.radiusMarker,{type:"radiusMarker"}):ze({},e.radiusMarker,{search:"Search String goes here"}),s(t).then((function(e){_({currentPage:e.currentPage,totalPages:e.totalPages,totalPhotos:e.totalPhotos,perPage:e.perPage,query:e.query}),f(e.photos)}))};return Object(n.useEffect)((function(){console.log(e)}),[e]),Object(n.useEffect)((function(){console.log(b)}),[b]),Object(n.useEffect)((function(){fetch("https://geoip-db.com/json/42e6a770-b3ac-11e9-80ca-c95181800da7").then((function(e){return e.json()})).then((function(e){console.log({lat:e.latitude,lng:e.longitude}),c({lat:e.latitude,lng:e.longitude})})).catch((function(e){console.log(e);"geolocation"in navigator&&navigator.geolocation.getCurrentPosition((function(e){c({lat:e.coords.latitude,lng:e.coords.longitude})}),(function(e){return console.log(e)}))}))}),[]),o.a.createElement("div",{className:"App"},o.a.createElement(U,{toggleMap:function(){g(!d)},searchFlikr:K,appBarHide:z},o.a.createElement(Se,{pinRadiusMarkerOnMap:function(){G(!0)},pinBoundingBoxOnMap:function(){return V(!0)},searchFlikr:K,gridDirection:S,toggleGridDirection:function(){B("row"===S?"column":"row")}}),d&&o.a.createElement(v,{state:e,userLocation:i,setBounds:function(e){t({type:x,boundingBox:e})},getRadiusMarkerCoordinates:function(e){t({type:M,radiusMarker:e})},triggerPhotoMarker:T,disableTriggerPhotoMarker:function(){return L(!1)},triggerPlotRadiusMarkerOnMap:A,disableRadiusTrigger:function(){return G(!1)},triggerBoundingBox:W,disableBoundingBoxTrigger:function(){return V(!1)}}),b&&o.a.createElement(se,{photos:b,responseDetails:k,pinPhotoOnMap:function(e){var t=e.position,a=e.thumbnail,n=e.title,o=e.id;L({position:t,thumbnail:a,title:n,id:o})},direction:S,columns:2,setAppBarHide:R}),k&&k.currentPage<k.totalPages&&o.a.createElement(Ce,{onClick:function(){var t;console.log("fetching next page..."),"boundingBox"===k.query.type?t=ze({},k.query):e.radiusMarker&&(t=ze({},k.query)),k.currentPage<k.totalPages&&(t.page=k.currentPage+1),s(t).then((function(e){_({currentPage:e.currentPage,totalPages:e.totalPages,totalPhotos:e.totalPhotos,perPage:e.perPage,query:e.query});var t=b.concat(e.photos);console.log(t),f(t)}))}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement((function(e){var t=Object(n.useReducer)(_,{boundingBox:null,radiusMarker:null}),a=Object(l.a)(t,2),r=a[0],i=a[1];return o.a.createElement(y.Provider,{value:i},o.a.createElement(O.Provider,{value:r},e.children))}),null,o.a.createElement(I.a,null),o.a.createElement(Re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},73:function(e,t,a){e.exports=a.p+"static/media/PhotoMarker_20.e88b541b.svg"},88:function(e,t,a){e.exports=a(162)},93:function(e,t,a){}},[[88,1,2]]]);
//# sourceMappingURL=main.b7899e3f.chunk.js.map