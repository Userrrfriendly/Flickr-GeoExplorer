{"version":3,"sources":["assets/loveinterestDark.png","assets/photoDark_Blue.png","../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","components/map/mapContainer.js","../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/esm/inherits.js"],"names":["module","exports","_getPrototypeOf","o","Object","setPrototypeOf","getPrototypeOf","__proto__","_setPrototypeOf","p","infoWindowContents","data","callback","title","src","photoId","thumb","width_t","owner","mapStyle","width","border","maxWidth","boxSizing","minHeight","maxHeight","Map","self","call","assertThisInitialized","state","boundingBox","selectionMarker","photoMarkers","favorites","handleGoogleMapsError","window","gm_authFailure","props","document","querySelector","innerHTML","createGoogleApiScript","userLocation","body","script","createElement","async","defer","onerror","write","insertBefore","lastElementChild","addEventListener","setMapLoaded","initMap","console","log","map","google","maps","getElementById","center","lat","lng","zoom","gestureHandling","mapTypeId","MapTypeId","TERRAIN","streetViewControl","fullscreenControl","largeInfowindow","InfoWindow","addListener","img","id","getAttribute","photo","photos","find","openLightBox","openLightbox","bind","index","onclick","event","addListenerOnce","getElementsByTagName","addPolygon","centerXY","toJSON","removePolygon","setBounds","zoomBounds","getBounds","northSouth","north","south","eastWest","east","west","boundsDynamic","removeMarker","rectangle","Rectangle","bounds","editable","draggable","setMap","getRadiusMarkerCoordinates","setState","polygon","createPhotoMarker","pin","show","marker","Marker","position","geolocation","icon","photoMarker","scaledSize","animation","Animation","DROP","color","SETIMG","LASTMARKER","setIcon","heartMarker","RESET","forEach","prevState","pins","push","panTo","this","getPosition","setContent","open","showAllPhotoMarkers","markers","i","length","hideAllPhotoMarkers","showAllFavorites","hideAllFavorites","pinFavorite","favorite","addSearchCircle","searchCircle","Circle","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","radius","searchRadius","SEARCHRADIUS","centerSearchCircle","setCenter","setSearchCenter","zoomToBounds","getCenter","fitBounds","subClass","superClass","TypeError","prototype","create","constructor","value","writable","configurable","prevProps","setRadius","isFavorite","displayPhotoMarkers","showFavorites","displayFavorites","f","triggerPhotoMarker","disableTriggerPhotoMarker","triggerCenter","disableCenter","triggerZoom","disableZoom","role","aria-label","style","screenWidth900px","flexGrow","React","Component","memo"],"mappings":"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","file":"static/js/3.63bb5e11.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAlCAYAAAAjt+tHAAAACXBIWXMAAAsTAAALEwEAmpwYAAADSElEQVRYhc2XsU8TURzHP1ehKQWJgILEzRhhMUqLEqIDw90AXSAsBBYHRhKYmN39G2CDjYGhxOStCoEEjIYBiFGjCQGiULDApdQ7h75XrnB37eER/SUv13u/vvf93K+/+/X9NNu2ATAMowqIAFF5rSJcywMWkAMsIUQeQLNtW4lHgZgcUQkQCUnckgA5wJQjJ4TIa7quK/E4UC+vMa4nAiZwAhzJa049ZUyKNwshlkIWLjHDMLrlRwvIO0MfF0IsfRoZ4XhtDXNjI1ThWHs7tYkEQoglwzAeIX8GZ+LFgGsRBy7uqfIsorJdjWsRd4EoaqosDyvbg1jkXwlfpvhvAW729PDk2zfuvXp1yXd3YoKO7W2ahob+CkDTdb0RuA00CiGWljUNgC5Zop22UlODbZquPrWunHUVKm83sA/8cI3A/elp18XPTk9dxQGemmZFABfNFeBGfX3ZhVsDA6y1tpI/POQgnWY9kThf39hIcn+fZCZDVXOz7z6u9f53Nuu7aDOVoi2dLt43pFI0pFIsaxqJnR2qW1qKvuTuLqebm3xsb3fdyzUCn1++9BTfGhwsEXdal22XiCuraWvz3M/zLdh+/dp1/tfbt56b+VkkHg8G8H1ykuPV1UvzN1+8uBKAdXISDABgvbOTvampkrmHc3N8HR+/EkRgAIAvo6Ns9PaWzN3xyRE386sRFZXiwzdvWGttLd5/HRuruPAsV1f7+is+dp3t7LCZSnGrr4/s4mJhc03zLEzKX84CnfsyCwtkFhYuifxNaQ7l33BZ07DPzgKLhwYAsBKNcjA/H0jcCWCFAbHV3x/k65YCyDsGMY+aHYY59i5qRjhvl0yA2kTiWiDUsVyaKTUtTdf1KFAH3MKnMfk0MsLP2dmKxJqGh3kwM+Pqk4eRPSADZKsoRMCk0C4hmwZnaxYBEEK8A8pCKHHDMJ7LKZVfF1szE7AqaU6LZ3ghxKpfJBziSUpzy7s5LdOeq6uzfXvvBuEQ75BPqX5nJ4B7e+5nEixGIU/qJMQHJ4RD/LEUz8phKiEvKwvgAVGnIgE4nzxLAPGKAVwg6iXEqvQlpehREPFAABcg4nJEpStHIfQnQcQDAzggVFKqV1W9Yrkg4gB/AEq+djdASXN9AAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAlCAYAAAAjt+tHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC6ElEQVRYhcWXP0wTURyAv5am1KY0JRJMCEkDQhxQREmMooREe4mDOKiDcXEE4wIOrq5uxIFBw2RcSUxYNM8YFgKDRCViTGwkTfwHBUVoylkuV4e+V694tH2llV/y8tp3l/d99+737u7nyWazABiG4QO8gF/2PqobFmADGcAWQlgAnmw2q+B+ICCbXwp4qwS3pUAGMGXLCCEsTywWU/AgEJZ9gNqsgAmkgQ3ZZ9RVBiS8WQgxW2VwQRiGcUb+tAHLufRBIcTs0GiChcU0Hz/9riq4s72e7q4gQohZwzCOIW+DM/ECQE3gwM45VZ55VbarVhO4i0SeqbK8WtmuE979Av9rsZ9R1l5vbvLxfu5o/n9bzwKbKfv/CaysWjR1vKkKUFtgNd6zJ0Ap8Yoet2pSNzknsBz5igTUxM9f/uL78jatLX4uDITLhu5ZYO2Hxe27CV5Mb+bHBvpCTD7u0J6rom145NQ7Ll+MsBrvybf+voaKElVbYPHDFgA3rh0sGB8ZPgTA56+Z2gok16yix9Nbes8HbYGT3UEAvi1vF4zHl0wAWlv8tRUIN9TxaCzK8J0Ec69SLCe3mZ7Z5OatJSYeRAke0Juyol1wZbCRSKSOS9fj+bGnTw5z7nSD9lwlde/d/+I6fr4/XLAL3OBTz9Zpixa/JSVXYHwiyfhEstRpFce+v46VQHXerXphKwHL0ehsr68Z0TF3nunlb7lkAnR3BWsioT7LZZiSaXtisZgfCAERihQmQ6MJJqd+lgW7OtjIw7Go6zFZmKwA60DKR24FTHLlErJocJZmXgAhxAxQUkLBDcM4K4dUfu0szUzALqc4zX/DCyHmi62EA95LYW7tXpyWKM9V7yzfXrtJOOAn5FWq++wUcC/Pi4UUC5DLk5CUeOuUcMCPS3hKNlOBdouSArtIhNRKAM4rT6EBL1vARSIsJeblsV4J3dCBawnskAjKpt40GXJLn9aBaws4JFRSqq2qtlhGBw7wBzAAVz/sPdCmAAAAAElFTkSuQmCC\"","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import React from \"react\";\r\n\r\nimport heartMarker from \"../../assets/loveinterestDark.png\";\r\nimport photoMarker from \"../../assets/photoDark_Blue.png\";\r\n\r\nconst infoWindowContents = (data, callback) => {\r\n  return `\r\n  <h1 style=\"font-size:1rem;text-align:center;\"> ${\r\n    data.title ? data.title : \"untitled photo\"\r\n  } </h1>\r\n  <img id=\"image-info\" title=\"${\r\n    data.title ? data.title : \"untitled photo\"\r\n  }\" data-src=${data.src} data-photoid=${\r\n    data.photoId\r\n  } style=\"margin: 0 auto;display: block;cursor:pointer;\" \r\n    src=${data.thumb} alt=\"${data.title}\" >\r\n  <a \r\n    title=\"open photo in flickr\"\r\n    style=\"background-color: #3f51b5;\r\n    width: ${data.width_t}px;\r\n    color: white;\r\n    padding: 4px 5px;\r\n    text-align: center;\r\n    text-decoration: none;\r\n    display: inline-block;\r\n    text-align: center;\r\n    margin: 0 auto 0.5rem ;\r\n    display: block;\" \r\n    href=https://www.flickr.com/photos/${data.owner}/${data.photoId}\r\n    target=\"_blank\">View in flickr\r\n  </a>\r\n  `;\r\n};\r\n\r\n/*When the Map component mounts the following happen:\r\n * the google maps callback is 'tied' to the window obj (componentDidMount())\r\n * a script with the google maps api is created and inserted at the bottom of the body (createGoogleApiScript)\r\n * the callback func fires (initMap) and initializes google maps\r\n * then initMap creates the default markers (addDefaultMarkers) and the default infowindow\r\n *** At this point the App is ready for user interaction\r\n */\r\n\r\nconst mapStyle = {\r\n  width: \"100vw\",\r\n  // height: \"75vh\",\r\n  border: \"1px solid black\",\r\n  maxWidth: \"100%\",\r\n  boxSizing: \"border-box\",\r\n  minHeight: \"75vh\",\r\n  maxHeight: \"100%\"\r\n};\r\n\r\nclass Map extends React.Component {\r\n  state = {\r\n    boundingBox: null,\r\n    selectionMarker: null,\r\n    photoMarkers: [],\r\n    favorites: []\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.initMap = this.initMap;\r\n    this.handleGoogleMapsError();\r\n    this.createGoogleApiScript(this.state.userLocation);\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    console.log(this.props);\r\n    /**SET RADIUS IF IT CHANGED */\r\n    if (prevProps.searchRadius !== this.props.searchRadius) {\r\n      this.searchCircle.setRadius(this.props.searchRadius * 1000);\r\n    }\r\n    console.log(\"map updated\");\r\n\r\n    if (prevProps.photos !== this.props.photos) {\r\n      console.log(\"PHOTOS CHANGED - RERENDERING MARKERS\");\r\n      let photos = this.props.photos;\r\n      this.state.photoMarkers.forEach(pin => pin.setMap(null));\r\n      this.setState({ photoMarkers: [] });\r\n\r\n      photos.forEach(photo => {\r\n        if (!photo.isFavorite) {\r\n          return this.createPhotoMarker(photo, this.props.displayPhotoMarkers);\r\n        }\r\n      });\r\n    } else {\r\n      console.log(\"PHOTOS DID NOT CHANGE - NO RERENDER FOR MARKERS\");\r\n    }\r\n\r\n    if (prevProps.favorites !== this.props.favorites) {\r\n      console.log(\"if prevProps favorites....\");\r\n      this.hideAllFavorites();\r\n      this.setState({ favorites: [] });\r\n      const showFavorites = this.props.displayFavorites;\r\n      this.props.favorites.forEach(f => this.pinFavorite(f, showFavorites));\r\n    }\r\n\r\n    if (prevProps.displayPhotoMarkers !== this.props.displayPhotoMarkers) {\r\n      console.log(\"SHOW/HIDE PHOTOMARKERS\");\r\n      this.props.displayPhotoMarkers\r\n        ? this.showAllPhotoMarkers()\r\n        : this.hideAllPhotoMarkers();\r\n    }\r\n\r\n    if (prevProps.displayFavorites !== this.props.displayFavorites) {\r\n      console.log(\"SHOW/HIDE PHOTOMARKERS\");\r\n      this.props.displayFavorites\r\n        ? this.showAllFavorites()\r\n        : this.hideAllFavorites();\r\n    }\r\n\r\n    // if (prevProps.userLocation !== this.props.userLocation) {\r\n    //   /**  even though the component has mounted and is currently in re-render(update) phase\r\n    //    * window.map can be undefined (especially on first load where google.maps api is not cached and is not fully initialized)\r\n    //    * so there is a slim chance that window.map.panTo will run before google.maps is fully loaded thus trowing an error\r\n    //    * mapReady() checks if google.maps is loaded before trying to zoom  to the users location\r\n    //    * each time the check results to false it retries after 10ms, when the waitingTrheshold (3seconds) runs out it gives up\r\n    //    * (at this point google maps probably failed for some other reason, like network error, or auth problems...)\r\n    //    */\r\n    //   let waitingThreshold = 3000; //max number of milliseconds to wait for google.maps to initialize\r\n    //   const mapReady = () => {\r\n    //     if (waitingThreshold <= 0) {\r\n    //       stopTimer();\r\n    //     }\r\n    //     if (window.map) {\r\n    //       window.map.panTo(this.props.userLocation);\r\n    //       // this.addSearchCircle(this.props.userLocation);\r\n    //       window.map.setZoom(16);\r\n    //       stopTimer();\r\n    //     } else {\r\n    //       waitingThreshold -= 10;\r\n    //     }\r\n    //   };\r\n    //   const timer = setInterval(mapReady, 10);\r\n    //   const stopTimer = () => clearInterval(timer);\r\n    // }\r\n\r\n    // if (this.props.triggerMapExtents) {\r\n    //   window.\r\n    //   this.props.disableMapExtentsTrigger();\r\n    // }\r\n\r\n    if (this.props.triggerPhotoMarker) {\r\n      this.createPhotoMarker(\r\n        this.props.triggerPhotoMarker,\r\n        this.props.displayPhotoMarkers\r\n      );\r\n      this.props.disableTriggerPhotoMarker();\r\n    }\r\n\r\n    if (this.props.triggerCenter) {\r\n      this.searchCircle.setCenter(window.map.getCenter().toJSON());\r\n      this.props.disableCenter();\r\n    }\r\n\r\n    if (this.props.triggerZoom) {\r\n      this.zoomToBounds();\r\n      this.props.disableZoom();\r\n    }\r\n\r\n    // if (this.props.triggerBoundingBox) {\r\n    //   this.addPolygon();\r\n    //   this.props.disableBoundingBoxTrigger();\r\n    // }\r\n  }\r\n\r\n  handleGoogleMapsError = () => {\r\n    /* google maps method for handling authentication errors\r\n     * more on: https://developers.google.com/maps/documentation/javascript/events#auth-errors*/\r\n    window.gm_authFailure = () => {\r\n      this.props.handleGoogleMapsError();\r\n      document.querySelector(\".gm-err-title\").innerHTML =\r\n        \"Oops it seems there was a problem loading Google Maps!\";\r\n      document.querySelector(\".gm-err-message\").innerHTML =\r\n        \"Failed to authenticate Google Maps, please try again later\";\r\n    };\r\n  };\r\n\r\n  createGoogleApiScript = userLocation => {\r\n    let body = window.document.querySelector(\"body\");\r\n    let script = window.document.createElement(\"script\");\r\n    script.src =\r\n      \"https://maps.googleapis.com/maps/api/js?key=AIzaSyCzs3fKNRPknPJs8LaW9rsCvBxeY2QCJhg&v=3&libraries=places&callback=initMap\";\r\n    script.async = true;\r\n    script.defer = true;\r\n    script.onerror = function() {\r\n      document.write(\"Error Loading Google Maps...\");\r\n    };\r\n    body.insertBefore(script, body.lastElementChild);\r\n    script.addEventListener(\"load\", () => {\r\n      // console.log(window.google);\r\n      this.props.setMapLoaded();\r\n    });\r\n  };\r\n\r\n  initMap = () => {\r\n    console.log(\"Google Maps API Loaded...\");\r\n    // const rome = {\r\n    //   lat: 41.890384586382844,\r\n    //   lng: 12.492241690388028\r\n    // }; //Rome, colosseo\r\n    const europe = { lat: 47.55241106676634, lng: 11.389968539500511 };\r\n\r\n    window.map = new window.google.maps.Map(\r\n      document.getElementById(\"map-container\"),\r\n      {\r\n        center: europe,\r\n        zoom: 5,\r\n        gestureHandling: \"cooperative\",\r\n        mapTypeId: window.google.maps.MapTypeId.TERRAIN,\r\n        streetViewControl: false,\r\n        fullscreenControl: false\r\n      }\r\n    );\r\n    window.largeInfowindow = new window.google.maps.InfoWindow({\r\n      maxWidth: 200\r\n    });\r\n\r\n    const attachImgOnClick = () => {\r\n      const img = document.getElementById(\"image-info\");\r\n      const id = img.getAttribute(\"data-photoid\");\r\n      let photo = this.props.photos.find(img => img.photoId === id);\r\n      if (!photo) {\r\n        /**If photo is not found in filteredPhotos search for it in favorites */\r\n        photo = this.props.favorites.find(img => img.photoId === id);\r\n      }\r\n\r\n      const openLightBox = this.props.openLightbox.bind(this, null, {\r\n        index: 0,\r\n        photo\r\n      });\r\n\r\n      img.onclick = openLightBox;\r\n    };\r\n\r\n    window.largeInfowindow.addListener(\"domready\", attachImgOnClick);\r\n\r\n    // this.addSearchCircle(rome);\r\n\r\n    window.google.maps.event.addListenerOnce(window.map, \"idle\", () => {\r\n      document.getElementsByTagName(\"iframe\")[0].title = \"Google Maps\";\r\n      /* https://stackoverflow.com/questions/49012240/google-maps-js-iframe-title \r\n            used to pass the (false possitive) accessibility audits */\r\n    });\r\n  };\r\n\r\n  /*** ADDING POLYGON + add marker*/\r\n  addPolygon = () => {\r\n    const centerXY = window.map.center.toJSON();\r\n    /** fixed size roughly 2x2 km box  **/\r\n    // const km = 0.009;\r\n    // const boundsStatic = {\r\n    //   north: centerXY.lat + km,\r\n    //   south: centerXY.lat - km,\r\n    //   east: centerXY.lng + km,\r\n    //   west: centerXY.lng - km\r\n    // };\r\n\r\n    /** dyniamic based on zoom level roughly 25% of map width/height  **/\r\n    if (this.state.boundingBox) {\r\n      this.removePolygon();\r\n      this.props.setBounds(null);\r\n      // this.setState({ polygon: null });\r\n    } else {\r\n      const zoomBounds = window.map.getBounds().toJSON();\r\n      const northSouth = (zoomBounds.north - zoomBounds.south) / 5;\r\n      const eastWest = (zoomBounds.east - zoomBounds.west) / 5;\r\n      const boundsDynamic = {\r\n        north: centerXY.lat + northSouth,\r\n        south: centerXY.lat - northSouth,\r\n        east: centerXY.lng + eastWest,\r\n        west: centerXY.lng - eastWest\r\n      };\r\n      //if there is a polygon /or a marker on the screen remove it\r\n      this.removePolygon();\r\n      this.removeMarker();\r\n      // Define a rectangle and set its editable property to true.\r\n      this.rectangle = new window.google.maps.Rectangle({\r\n        bounds: boundsDynamic,\r\n        editable: true,\r\n        draggable: true\r\n      });\r\n      this.rectangle.setMap(window.map);\r\n      this.props.getRadiusMarkerCoordinates(null);\r\n      this.props.setBounds(boundsDynamic);\r\n      this.rectangle.addListener(\"bounds_changed\", () =>\r\n        this.props.setBounds(this.rectangle.bounds.toJSON())\r\n      );\r\n      this.setState({ boundingBox: this.rectangle });\r\n      window.polygon = this.rectangle;\r\n    }\r\n  };\r\n\r\n  removePolygon = () => {\r\n    if (this.state.boundingBox) {\r\n      this.state.boundingBox.setMap(null);\r\n      this.setState({ boundingBox: null });\r\n    }\r\n  };\r\n\r\n  createPhotoMarker = (pin, show) => {\r\n    let marker = new window.google.maps.Marker({\r\n      position: pin.geolocation,\r\n      map: show ? window.map : null,\r\n      icon: photoMarker,\r\n      scaledSize: 0.5,\r\n      title: pin.title,\r\n      animation: window.google.maps.Animation.DROP,\r\n      photoId: pin.photoId,\r\n      color: \"blue\"\r\n    });\r\n\r\n    window.SETIMG = () => window.LASTMARKER.setIcon(heartMarker);\r\n    window.RESET = () => {\r\n      this.state.photoMarkers.forEach(pin => pin.setMap(null));\r\n      this.setState({ photoMarkers: [] });\r\n    };\r\n\r\n    this.setState(prevState => {\r\n      const pins = prevState.photoMarkers;\r\n      pins.push(marker);\r\n      return { photoMarkers: pins };\r\n    });\r\n\r\n    marker.addListener(\"click\", function() {\r\n      window.map.panTo(this.getPosition());\r\n\r\n      window.largeInfowindow.setContent(infoWindowContents(pin));\r\n\r\n      // window.map.setZoom(14);\r\n      // window.map.openInfoWindow(marker, window.largeInfowindow);\r\n      // toggleBounce();\r\n      window.largeInfowindow.open(window.map, marker);\r\n    });\r\n\r\n    window.photoMarker = marker;\r\n  };\r\n\r\n  showAllPhotoMarkers = () => {\r\n    const map = window.map;\r\n    const markers = this.state.photoMarkers;\r\n    for (let i = 0; i < markers.length; i++) {\r\n      markers[i].setMap(map);\r\n    }\r\n  };\r\n\r\n  hideAllPhotoMarkers = () => {\r\n    const markers = this.state.photoMarkers;\r\n    for (let i = 0; i < markers.length; i++) {\r\n      markers[i].setMap(null);\r\n    }\r\n  };\r\n\r\n  showAllFavorites = () => {\r\n    const map = window.map;\r\n    const markers = this.state.favorites;\r\n    for (let i = 0; i < markers.length; i++) {\r\n      markers[i].setMap(map);\r\n    }\r\n  };\r\n\r\n  hideAllFavorites = () => {\r\n    const markers = this.state.favorites;\r\n    for (let i = 0; i < markers.length; i++) {\r\n      markers[i].setMap(null);\r\n    }\r\n  };\r\n\r\n  pinFavorite = (img, show) => {\r\n    let marker = new window.google.maps.Marker({\r\n      position: img.geolocation,\r\n      map: show ? window.map : null,\r\n      icon: heartMarker,\r\n      title: img.title,\r\n      animation: window.google.maps.Animation.DROP,\r\n      photoId: img.photoId,\r\n      favorite: true\r\n    });\r\n\r\n    this.setState(prevState => {\r\n      const favorites = prevState.favorites;\r\n      favorites.push(marker);\r\n      return { favorites: favorites };\r\n    });\r\n\r\n    marker.addListener(\"click\", function() {\r\n      window.map.panTo(this.getPosition());\r\n      window.largeInfowindow.setContent(infoWindowContents(img));\r\n      window.largeInfowindow.open(window.map, marker);\r\n    });\r\n  };\r\n\r\n  addSearchCircle = center => {\r\n    this.searchCircle = new window.google.maps.Circle({\r\n      strokeColor: \"#0e2a99\",\r\n      strokeOpacity: 0.8,\r\n      strokeWeight: 2,\r\n      fillColor: \"#64b1e8\",\r\n      fillOpacity: 0.35,\r\n      map: window.map,\r\n      center: center ? center : { lat: 48.8, lng: 2.29 },\r\n      radius: this.props.searchRadius * 1000, //radius in store is in KM radius in maps is meters\r\n      draggable: true\r\n    });\r\n    window.SEARCHRADIUS = this.searchCircle; //DEBUGGING ONLY\r\n\r\n    /** a circle bound to the center of searchCircle,\r\n     * its only purpose is to graphically represent searchCircle's center */\r\n    this.centerSearchCircle = new window.google.maps.Circle({\r\n      strokeColor: \"#0e0047\",\r\n      strokeOpacity: 0.8,\r\n      strokeWeight: 3,\r\n      fillColor: \"#0e0047\",\r\n      fillOpacity: 0.35,\r\n      map: window.map,\r\n      center: this.searchCircle.center.toJSON(),\r\n      radius: 10\r\n    });\r\n\r\n    // window.testCENTER = this.centerSearchRadius;\r\n\r\n    this.searchCircle.addListener(\"drag\", () => {\r\n      this.centerSearchCircle.setCenter(this.searchCircle.center.toJSON());\r\n      // console.log(this.searchRadius.center.toJSON());\r\n    });\r\n\r\n    this.searchCircle.addListener(\"dragend\", () => {\r\n      this.props.setSearchCenter(this.searchCircle.center.toJSON());\r\n    });\r\n    this.searchCircle.addListener(\"center_changed\", () => {\r\n      this.props.setSearchCenter(this.searchCircle.center.toJSON());\r\n      this.centerSearchCircle.setCenter(this.searchCircle.center.toJSON());\r\n    });\r\n  };\r\n\r\n  zoomToBounds = () => {\r\n    const km = 0.009; //roughtly one km in degrees of lat/lng\r\n    const center = this.searchCircle.getCenter().toJSON();\r\n    const bounds = {\r\n      north: center.lat + km * this.props.searchRadius,\r\n      south: center.lat - km * this.props.searchRadius,\r\n      east: center.lng + km * this.props.searchRadius,\r\n      west: center.lng - km * this.props.searchRadius\r\n    };\r\n    console.log(bounds);\r\n    window.map.fitBounds(bounds);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        role=\"application\"\r\n        aria-label=\"Map\"\r\n        id=\"map-container\"\r\n        style={\r\n          this.props.screenWidth900px\r\n            ? mapStyle\r\n            : {\r\n                ...mapStyle,\r\n                minHeight: \"50vh\",\r\n                flexGrow: \"1\"\r\n              }\r\n        }\r\n      ></div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default React.memo(Map);\r\n","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}"],"sourceRoot":""}