(this["webpackJsonpflickr-explorer"]=this["webpackJsonpflickr-explorer"]||[]).push([[3],{453:function(o,t){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAlCAYAAAAjt+tHAAAACXBIWXMAAAsTAAALEwEAmpwYAAADSElEQVRYhc2XsU8TURzHP1ehKQWJgILEzRhhMUqLEqIDw90AXSAsBBYHRhKYmN39G2CDjYGhxOStCoEEjIYBiFGjCQGiULDApdQ7h75XrnB37eER/SUv13u/vvf93K+/+/X9NNu2ATAMowqIAFF5rSJcywMWkAMsIUQeQLNtW4lHgZgcUQkQCUnckgA5wJQjJ4TIa7quK/E4UC+vMa4nAiZwAhzJa049ZUyKNwshlkIWLjHDMLrlRwvIO0MfF0IsfRoZ4XhtDXNjI1ThWHs7tYkEQoglwzAeIX8GZ+LFgGsRBy7uqfIsorJdjWsRd4EoaqosDyvbg1jkXwlfpvhvAW729PDk2zfuvXp1yXd3YoKO7W2ahob+CkDTdb0RuA00CiGWljUNgC5Zop22UlODbZquPrWunHUVKm83sA/8cI3A/elp18XPTk9dxQGemmZFABfNFeBGfX3ZhVsDA6y1tpI/POQgnWY9kThf39hIcn+fZCZDVXOz7z6u9f53Nuu7aDOVoi2dLt43pFI0pFIsaxqJnR2qW1qKvuTuLqebm3xsb3fdyzUCn1++9BTfGhwsEXdal22XiCuraWvz3M/zLdh+/dp1/tfbt56b+VkkHg8G8H1ykuPV1UvzN1+8uBKAdXISDABgvbOTvampkrmHc3N8HR+/EkRgAIAvo6Ns9PaWzN3xyRE386sRFZXiwzdvWGttLd5/HRuruPAsV1f7+is+dp3t7LCZSnGrr4/s4mJhc03zLEzKX84CnfsyCwtkFhYuifxNaQ7l33BZ07DPzgKLhwYAsBKNcjA/H0jcCWCFAbHV3x/k65YCyDsGMY+aHYY59i5qRjhvl0yA2kTiWiDUsVyaKTUtTdf1KFAH3MKnMfk0MsLP2dmKxJqGh3kwM+Pqk4eRPSADZKsoRMCk0C4hmwZnaxYBEEK8A8pCKHHDMJ7LKZVfF1szE7AqaU6LZ3ghxKpfJBziSUpzy7s5LdOeq6uzfXvvBuEQ75BPqX5nJ4B7e+5nEixGIU/qJMQHJ4RD/LEUz8phKiEvKwvgAVGnIgE4nzxLAPGKAVwg6iXEqvQlpehREPFAABcg4nJEpStHIfQnQcQDAzggVFKqV1W9Yrkg4gB/AEq+djdASXN9AAAAAElFTkSuQmCC"},454:function(o,t){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAlCAYAAAAjt+tHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC6ElEQVRYhcWXP0wTURyAv5am1KY0JRJMCEkDQhxQREmMooREe4mDOKiDcXEE4wIOrq5uxIFBw2RcSUxYNM8YFgKDRCViTGwkTfwHBUVoylkuV4e+V694tH2llV/y8tp3l/d99+737u7nyWazABiG4QO8gF/2PqobFmADGcAWQlgAnmw2q+B+ICCbXwp4qwS3pUAGMGXLCCEsTywWU/AgEJZ9gNqsgAmkgQ3ZZ9RVBiS8WQgxW2VwQRiGcUb+tAHLufRBIcTs0GiChcU0Hz/9riq4s72e7q4gQohZwzCOIW+DM/ECQE3gwM45VZ55VbarVhO4i0SeqbK8WtmuE979Av9rsZ9R1l5vbvLxfu5o/n9bzwKbKfv/CaysWjR1vKkKUFtgNd6zJ0Ap8Yoet2pSNzknsBz5igTUxM9f/uL78jatLX4uDITLhu5ZYO2Hxe27CV5Mb+bHBvpCTD7u0J6rom145NQ7Ll+MsBrvybf+voaKElVbYPHDFgA3rh0sGB8ZPgTA56+Z2gok16yix9Nbes8HbYGT3UEAvi1vF4zHl0wAWlv8tRUIN9TxaCzK8J0Ec69SLCe3mZ7Z5OatJSYeRAke0Juyol1wZbCRSKSOS9fj+bGnTw5z7nSD9lwlde/d/+I6fr4/XLAL3OBTz9Zpixa/JSVXYHwiyfhEstRpFce+v46VQHXerXphKwHL0ehsr68Z0TF3nunlb7lkAnR3BWsioT7LZZiSaXtisZgfCAERihQmQ6MJJqd+lgW7OtjIw7Go6zFZmKwA60DKR24FTHLlErJocJZmXgAhxAxQUkLBDcM4K4dUfu0szUzALqc4zX/DCyHmi62EA95LYW7tXpyWKM9V7yzfXrtJOOAn5FWq++wUcC/Pi4UUC5DLk5CUeOuUcMCPS3hKNlOBdouSArtIhNRKAM4rT6EBL1vARSIsJeblsV4J3dCBawnskAjKpt40GXJLn9aBaws4JFRSqq2qtlhGBw7wBzAAVz/sPdCmAAAAAElFTkSuQmCC"},455:function(o,t,e){"use strict";e.r(t);var n=e(14);function i(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}function r(o,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(o,n.key,n)}}function a(o){return(a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"===typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}function s(o){return(s="function"===typeof Symbol&&"symbol"===a(Symbol.iterator)?function(o){return a(o)}:function(o){return o&&"function"===typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":a(o)})(o)}function l(o){if(void 0===o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function p(o,t){return!t||"object"!==s(t)&&"function"!==typeof t?l(o):t}function c(o){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function d(o,t){return(d=Object.setPrototypeOf||function(o,t){return o.__proto__=t,o})(o,t)}var h=e(0),u=e.n(h),w=e(453),f=e.n(w),A=e(454),g=e.n(A),m=function(o,t){return'\n  <h1 style="font-size:1rem;text-align:center;"> '.concat(o.title?o.title:"untitled photo",' </h1>\n  <img id="image-info" title="').concat(o.title?o.title:"untitled photo",'" data-src=').concat(o.src," data-photoid=").concat(o.photoId,' style="margin: 0 auto;display: block;cursor:pointer;" \n    src=').concat(o.thumb,' alt="').concat(o.title,'" >\n  <a \n    title="open photo in flickr"\n    style="background-color: #3f51b5;\n    width: ').concat(o.width_t,'px;\n    color: white;\n    padding: 4px 5px;\n    text-align: center;\n    text-decoration: none;\n    display: inline-block;\n    text-align: center;\n    margin: 0 auto 0.5rem ;\n    display: block;" \n    href=https://www.flickr.com/photos/').concat(o.owner,"/").concat(o.photoId,'\n    target="_blank">View in flickr\n  </a>\n  ')},y={width:"100vw",border:"1px solid black",maxWidth:"100%",boxSizing:"border-box",minHeight:"75vh",maxHeight:"100%"},v=function(o){function t(){var o,e;i(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=p(this,(o=c(t)).call.apply(o,[this].concat(r)))).state={photoMarkers:[],favorites:[]},e.handleGoogleMapsError=function(){window.gm_authFailure=function(){e.props.handleGoogleMapsError(),document.querySelector(".gm-err-title").innerHTML="Oops it seems there was a problem loading Google Maps!",document.querySelector(".gm-err-message").innerHTML="Failed to authenticate Google Maps, please try again later"}},e.createGoogleApiScript=function(){var o=window.document.querySelector("body"),t=window.document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCzs3fKNRPknPJs8LaW9rsCvBxeY2QCJhg&v=3&libraries=places&callback=initMap",t.async=!0,t.defer=!0,t.onerror=function(){e.props.mapsErrorToast()},o.insertBefore(t,o.lastElementChild),t.addEventListener("load",(function(){e.props.setMapLoaded()}))},e.initMap=function(){console.log("Google Maps API Loaded...");window.map=new window.google.maps.Map(document.getElementById("map-container"),{center:{lat:47.55241106676634,lng:11.389968539500511},zoom:5,gestureHandling:"cooperative",mapTypeId:window.google.maps.MapTypeId.TERRAIN,streetViewControl:!1,fullscreenControl:!1}),window.largeInfowindow=new window.google.maps.InfoWindow({maxWidth:200});window.largeInfowindow.addListener("domready",(function(){var o=document.getElementById("image-info"),t=o.getAttribute("data-photoid"),n=e.props.photos.find((function(o){return o.photoId===t}));n||(n=e.props.favorites.find((function(o){return o.photoId===t})));var i=e.props.openLightbox.bind(l(e),null,{index:0,photo:n});o.onclick=i}));var o=new window.google.maps.Polyline({path:[{lat:90,lng:180},{lat:-90,lng:180}],geodesic:!0,strokeColor:"#FF0000",strokeOpacity:.9,strokeWeight:12});o.setMap(window.map),window.antiMeridianInfo=new window.google.maps.InfoWindow({maxWidth:200}),window.antiMeridianInfo.setContent("The red line that you just clicked is the the 180th meridian \n      (sometimes called antimeridian).\n      Please make sure that the antimeridian is outside the screen when you make a request for photos.\n      (pan the map to the left or right untill the red line is no longer in view)"),o.addListener("click",(function(o){window.antiMeridianInfo.setPosition(o.latLng),window.antiMeridianInfo.open(window.map)})),window.google.maps.event.addListenerOnce(window.map,"idle",(function(){document.getElementsByTagName("iframe")[0].title="Google Maps",e.props.idb()}))},e.createPhotoMarker=function(o,t){var n=new window.google.maps.Marker({position:o.geolocation,map:t?window.map:null,icon:g.a,scaledSize:.5,title:o.title,animation:window.google.maps.Animation.DROP,photoId:o.photoId,color:"blue"});e.setState((function(o){var t=o.photoMarkers;return t.push(n),{photoMarkers:t}})),n.addListener("click",(function(){window.map.panTo(this.getPosition()),window.largeInfowindow.setContent(m(o)),window.largeInfowindow.open(window.map,n)})),window.photoMarker=n},e.showAllPhotoMarkers=function(){for(var o=window.map,t=e.state.photoMarkers,n=0;n<t.length;n++)t[n].setMap(o)},e.hideAllPhotoMarkers=function(){for(var o=e.state.photoMarkers,t=0;t<o.length;t++)o[t].setMap(null)},e.showAllFavorites=function(){for(var o=window.map,t=e.state.favorites,n=0;n<t.length;n++)t[n].setMap(o)},e.hideAllFavorites=function(){for(var o=e.state.favorites,t=0;t<o.length;t++)o[t].setMap(null)},e.pinFavorite=function(o,t){var n=new window.google.maps.Marker({position:o.geolocation,map:t?window.map:null,icon:f.a,title:o.title,animation:window.google.maps.Animation.DROP,photoId:o.photoId,favorite:!0});e.setState((function(o){var t=o.favorites;return t.push(n),{favorites:t}})),n.addListener("click",(function(){window.map.panTo(this.getPosition()),window.largeInfowindow.setContent(m(o)),window.largeInfowindow.open(window.map,n)}))},e}var e,a,s;return function(o,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),t&&d(o,t)}(t,o),e=t,(a=[{key:"componentDidMount",value:function(){window.initMap=this.initMap,this.handleGoogleMapsError(),this.createGoogleApiScript()}},{key:"componentDidUpdate",value:function(o,t){var e=this;if(console.log(this.props),o.searchRadius!==this.props.searchRadius&&this.searchCircle.setRadius(1e3*this.props.searchRadius),console.log("map updated"),o.photos!==this.props.photos){console.log("PHOTOS CHANGED - RERENDERING MARKERS");var n=this.props.photos;this.state.photoMarkers.forEach((function(o){return o.setMap(null)})),this.setState({photoMarkers:[]}),n.forEach((function(o){if(!o.isFavorite)return e.createPhotoMarker(o,e.props.displayPhotoMarkers)}))}else console.log("PHOTOS DID NOT CHANGE - NO RERENDER FOR MARKERS");if(o.favorites!==this.props.favorites){console.log("if prevProps favorites...."),this.hideAllFavorites(),this.setState({favorites:[]});var i=this.props.displayFavorites;this.props.favorites.forEach((function(o){return e.pinFavorite(o,i)}))}o.displayPhotoMarkers!==this.props.displayPhotoMarkers&&(this.props.displayPhotoMarkers?this.showAllPhotoMarkers():this.hideAllPhotoMarkers()),o.displayFavorites!==this.props.displayFavorites&&(this.props.displayFavorites?this.showAllFavorites():this.hideAllFavorites()),this.props.triggerPhotoMarker&&(this.createPhotoMarker(this.props.triggerPhotoMarker,this.props.displayPhotoMarkers),this.props.disableTriggerPhotoMarker())}},{key:"render",value:function(){return u.a.createElement("div",{role:"application","aria-label":"Map",id:"map-container",style:this.props.screenWidth900px?y:Object(n.a)({},y,{minHeight:"50vh",flexGrow:"1"})})}}])&&r(e.prototype,a),s&&r(e,s),t}(u.a.Component);t.default=u.a.memo(v)}}]);
//# sourceMappingURL=3.52662e76.chunk.js.map