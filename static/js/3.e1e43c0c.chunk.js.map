{"version":3,"sources":["assets/loveinterestDark.png","assets/photoDark_Blue.png","../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","components/map/mapContainer.js","../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/esm/inherits.js"],"names":["module","exports","_getPrototypeOf","o","Object","setPrototypeOf","getPrototypeOf","__proto__","_setPrototypeOf","p","infoWindowContents","data","callback","title","src","photoId","thumb","width_t","owner","mapStyle","width","border","maxWidth","boxSizing","minHeight","maxHeight","Map","self","call","assertThisInitialized","state","photoMarkers","favorites","handleGoogleMapsError","window","gm_authFailure","props","document","querySelector","innerHTML","createGoogleApiScript","body","script","createElement","async","defer","onerror","this","mapsErrorToast","insertBefore","lastElementChild","addEventListener","setMapLoaded","initMap","console","log","map","google","maps","getElementById","center","lat","lng","zoom","gestureHandling","mapTypeId","MapTypeId","TERRAIN","streetViewControl","fullscreenControl","largeInfowindow","InfoWindow","addListener","img","id","getAttribute","photo","photos","find","openLightBox","openLightbox","bind","index","onclick","antimeridianPath","Polyline","path","geodesic","strokeColor","strokeOpacity","strokeWeight","setMap","antiMeridianInfo","setContent","e","setPosition","latLng","open","event","addListenerOnce","getElementsByTagName","createPhotoMarker","pin","show","marker","Marker","position","geolocation","icon","photoMarker","scaledSize","animation","Animation","DROP","color","setState","prevState","pins","push","panTo","getPosition","showAllPhotoMarkers","markers","i","length","hideAllPhotoMarkers","showAllFavorites","hideAllFavorites","pinFavorite","heartMarker","favorite","subClass","superClass","TypeError","prototype","create","constructor","value","writable","configurable","prevProps","searchRadius","searchCircle","setRadius","forEach","isFavorite","displayPhotoMarkers","showFavorites","displayFavorites","f","triggerPhotoMarker","disableTriggerPhotoMarker","role","aria-label","style","screenWidth900px","flexGrow","React","Component","memo"],"mappings":"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","file":"static/js/3.e1e43c0c.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAlCAYAAAAjt+tHAAAACXBIWXMAAAsTAAALEwEAmpwYAAADSElEQVRYhc2XsU8TURzHP1ehKQWJgILEzRhhMUqLEqIDw90AXSAsBBYHRhKYmN39G2CDjYGhxOStCoEEjIYBiFGjCQGiULDApdQ7h75XrnB37eER/SUv13u/vvf93K+/+/X9NNu2ATAMowqIAFF5rSJcywMWkAMsIUQeQLNtW4lHgZgcUQkQCUnckgA5wJQjJ4TIa7quK/E4UC+vMa4nAiZwAhzJa049ZUyKNwshlkIWLjHDMLrlRwvIO0MfF0IsfRoZ4XhtDXNjI1ThWHs7tYkEQoglwzAeIX8GZ+LFgGsRBy7uqfIsorJdjWsRd4EoaqosDyvbg1jkXwlfpvhvAW729PDk2zfuvXp1yXd3YoKO7W2ahob+CkDTdb0RuA00CiGWljUNgC5Zop22UlODbZquPrWunHUVKm83sA/8cI3A/elp18XPTk9dxQGemmZFABfNFeBGfX3ZhVsDA6y1tpI/POQgnWY9kThf39hIcn+fZCZDVXOz7z6u9f53Nuu7aDOVoi2dLt43pFI0pFIsaxqJnR2qW1qKvuTuLqebm3xsb3fdyzUCn1++9BTfGhwsEXdal22XiCuraWvz3M/zLdh+/dp1/tfbt56b+VkkHg8G8H1ykuPV1UvzN1+8uBKAdXISDABgvbOTvampkrmHc3N8HR+/EkRgAIAvo6Ns9PaWzN3xyRE386sRFZXiwzdvWGttLd5/HRuruPAsV1f7+is+dp3t7LCZSnGrr4/s4mJhc03zLEzKX84CnfsyCwtkFhYuifxNaQ7l33BZ07DPzgKLhwYAsBKNcjA/H0jcCWCFAbHV3x/k65YCyDsGMY+aHYY59i5qRjhvl0yA2kTiWiDUsVyaKTUtTdf1KFAH3MKnMfk0MsLP2dmKxJqGh3kwM+Pqk4eRPSADZKsoRMCk0C4hmwZnaxYBEEK8A8pCKHHDMJ7LKZVfF1szE7AqaU6LZ3ghxKpfJBziSUpzy7s5LdOeq6uzfXvvBuEQ75BPqX5nJ4B7e+5nEixGIU/qJMQHJ4RD/LEUz8phKiEvKwvgAVGnIgE4nzxLAPGKAVwg6iXEqvQlpehREPFAABcg4nJEpStHIfQnQcQDAzggVFKqV1W9Yrkg4gB/AEq+djdASXN9AAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAlCAYAAAAjt+tHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC6ElEQVRYhcWXP0wTURyAv5am1KY0JRJMCEkDQhxQREmMooREe4mDOKiDcXEE4wIOrq5uxIFBw2RcSUxYNM8YFgKDRCViTGwkTfwHBUVoylkuV4e+V694tH2llV/y8tp3l/d99+737u7nyWazABiG4QO8gF/2PqobFmADGcAWQlgAnmw2q+B+ICCbXwp4qwS3pUAGMGXLCCEsTywWU/AgEJZ9gNqsgAmkgQ3ZZ9RVBiS8WQgxW2VwQRiGcUb+tAHLufRBIcTs0GiChcU0Hz/9riq4s72e7q4gQohZwzCOIW+DM/ECQE3gwM45VZ55VbarVhO4i0SeqbK8WtmuE979Av9rsZ9R1l5vbvLxfu5o/n9bzwKbKfv/CaysWjR1vKkKUFtgNd6zJ0Ap8Yoet2pSNzknsBz5igTUxM9f/uL78jatLX4uDITLhu5ZYO2Hxe27CV5Mb+bHBvpCTD7u0J6rom145NQ7Ll+MsBrvybf+voaKElVbYPHDFgA3rh0sGB8ZPgTA56+Z2gok16yix9Nbes8HbYGT3UEAvi1vF4zHl0wAWlv8tRUIN9TxaCzK8J0Ec69SLCe3mZ7Z5OatJSYeRAke0Juyol1wZbCRSKSOS9fj+bGnTw5z7nSD9lwlde/d/+I6fr4/XLAL3OBTz9Zpixa/JSVXYHwiyfhEstRpFce+v46VQHXerXphKwHL0ehsr68Z0TF3nunlb7lkAnR3BWsioT7LZZiSaXtisZgfCAERihQmQ6MJJqd+lgW7OtjIw7Go6zFZmKwA60DKR24FTHLlErJocJZmXgAhxAxQUkLBDcM4K4dUfu0szUzALqc4zX/DCyHmi62EA95LYW7tXpyWKM9V7yzfXrtJOOAn5FWq++wUcC/Pi4UUC5DLk5CUeOuUcMCPS3hKNlOBdouSArtIhNRKAM4rT6EBL1vARSIsJeblsV4J3dCBawnskAjKpt40GXJLn9aBaws4JFRSqq2qtlhGBw7wBzAAVz/sPdCmAAAAAElFTkSuQmCC\"","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import React from \"react\";\r\n\r\nimport heartMarker from \"../../assets/loveinterestDark.png\";\r\nimport photoMarker from \"../../assets/photoDark_Blue.png\";\r\n\r\nconst infoWindowContents = (data, callback) => {\r\n  return `\r\n  <h1 style=\"font-size:1rem;text-align:center;\"> ${\r\n    data.title ? data.title : \"untitled photo\"\r\n  } </h1>\r\n  <img id=\"image-info\" title=\"${\r\n    data.title ? data.title : \"untitled photo\"\r\n  }\" data-src=${data.src} data-photoid=${\r\n    data.photoId\r\n  } style=\"margin: 0 auto;display: block;cursor:pointer;\" \r\n    src=${data.thumb} alt=\"${data.title}\" >\r\n  <a \r\n    title=\"open photo in flickr\"\r\n    style=\"background-color: #3f51b5;\r\n    width: ${data.width_t}px;\r\n    color: white;\r\n    padding: 4px 5px;\r\n    text-align: center;\r\n    text-decoration: none;\r\n    display: inline-block;\r\n    text-align: center;\r\n    margin: 0 auto 0.5rem ;\r\n    display: block;\" \r\n    href=https://www.flickr.com/photos/${data.owner}/${data.photoId}\r\n    target=\"_blank\">View in flickr\r\n  </a>\r\n  `;\r\n};\r\n\r\n/*When the Map component mounts the following happen:\r\n * the google maps callback is 'tied' to the window obj (componentDidMount())\r\n * a script with the google maps api is created and inserted at the bottom of the body (createGoogleApiScript)\r\n * the callback func fires (initMap) and initializes google maps\r\n * then initMap creates the default markers (addDefaultMarkers) and the default infowindow\r\n *** At this point the App is ready for user interaction\r\n */\r\n\r\nconst mapStyle = {\r\n  width: \"100vw\",\r\n  // height: \"75vh\",\r\n  border: \"1px solid black\",\r\n  maxWidth: \"100%\",\r\n  boxSizing: \"border-box\",\r\n  minHeight: \"75vh\",\r\n  maxHeight: \"100%\"\r\n};\r\n\r\nclass Map extends React.Component {\r\n  state = {\r\n    photoMarkers: [],\r\n    favorites: []\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.initMap = this.initMap;\r\n    this.handleGoogleMapsError();\r\n    this.createGoogleApiScript();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    console.log(this.props);\r\n    /**SET RADIUS IF IT CHANGED */\r\n    if (prevProps.searchRadius !== this.props.searchRadius) {\r\n      this.searchCircle.setRadius(this.props.searchRadius * 1000);\r\n    }\r\n    console.log(\"map updated\");\r\n\r\n    if (prevProps.photos !== this.props.photos) {\r\n      console.log(\"PHOTOS CHANGED - RERENDERING MARKERS\");\r\n      let photos = this.props.photos;\r\n      this.state.photoMarkers.forEach(pin => pin.setMap(null));\r\n      this.setState({ photoMarkers: [] });\r\n\r\n      photos.forEach(photo => {\r\n        if (!photo.isFavorite) {\r\n          return this.createPhotoMarker(photo, this.props.displayPhotoMarkers);\r\n        }\r\n      });\r\n    } else {\r\n      console.log(\"PHOTOS DID NOT CHANGE - NO RERENDER FOR MARKERS\");\r\n    }\r\n\r\n    if (prevProps.favorites !== this.props.favorites) {\r\n      console.log(\"if prevProps favorites....\");\r\n      this.hideAllFavorites();\r\n      this.setState({ favorites: [] });\r\n      const showFavorites = this.props.displayFavorites;\r\n      this.props.favorites.forEach(f => this.pinFavorite(f, showFavorites));\r\n    }\r\n\r\n    if (prevProps.displayPhotoMarkers !== this.props.displayPhotoMarkers) {\r\n      console.log(\"SHOW/HIDE PHOTOMARKERS\");\r\n      this.props.displayPhotoMarkers\r\n        ? this.showAllPhotoMarkers()\r\n        : this.hideAllPhotoMarkers();\r\n    }\r\n\r\n    if (prevProps.displayFavorites !== this.props.displayFavorites) {\r\n      console.log(\"SHOW/HIDE PHOTOMARKERS\");\r\n      this.props.displayFavorites\r\n        ? this.showAllFavorites()\r\n        : this.hideAllFavorites();\r\n    }\r\n\r\n    if (this.props.triggerPhotoMarker) {\r\n      this.createPhotoMarker(\r\n        this.props.triggerPhotoMarker,\r\n        this.props.displayPhotoMarkers\r\n      );\r\n      this.props.disableTriggerPhotoMarker();\r\n    }\r\n  }\r\n\r\n  handleGoogleMapsError = () => {\r\n    /* google maps method for handling authentication errors\r\n     * more on: https://developers.google.com/maps/documentation/javascript/events#auth-errors*/\r\n    window.gm_authFailure = () => {\r\n      this.props.handleGoogleMapsError();\r\n      document.querySelector(\".gm-err-title\").innerHTML =\r\n        \"Oops it seems there was a problem loading Google Maps!\";\r\n      document.querySelector(\".gm-err-message\").innerHTML =\r\n        \"Failed to authenticate Google Maps, please try again later\";\r\n    };\r\n  };\r\n\r\n  createGoogleApiScript = () => {\r\n    let body = window.document.querySelector(\"body\");\r\n    let script = window.document.createElement(\"script\");\r\n    script.src =\r\n      \"https://maps.googleapis.com/maps/api/js?key=AIzaSyCzs3fKNRPknPJs8LaW9rsCvBxeY2QCJhg&v=3&libraries=places&callback=initMap\";\r\n    script.async = true;\r\n    script.defer = true;\r\n    script.onerror = function() {\r\n      // alert(\"error loading google maps!\");\r\n      this.props.mapsErrorToast();\r\n    };\r\n    body.insertBefore(script, body.lastElementChild);\r\n    script.addEventListener(\"load\", () => {\r\n      // console.log(window.google);\r\n      this.props.setMapLoaded();\r\n    });\r\n  };\r\n\r\n  initMap = () => {\r\n    console.log(\"Google Maps API Loaded...\");\r\n    const europe = { lat: 47.55241106676634, lng: 11.389968539500511 };\r\n\r\n    window.map = new window.google.maps.Map(\r\n      document.getElementById(\"map-container\"),\r\n      {\r\n        center: europe,\r\n        zoom: 5,\r\n        gestureHandling: \"cooperative\",\r\n        mapTypeId: window.google.maps.MapTypeId.TERRAIN,\r\n        streetViewControl: false,\r\n        fullscreenControl: false\r\n      }\r\n    );\r\n    window.largeInfowindow = new window.google.maps.InfoWindow({\r\n      maxWidth: 200\r\n    });\r\n\r\n    const attachImgOnClick = () => {\r\n      //fires when user clicks on the thumbnail of an expanded marker\r\n      const img = document.getElementById(\"image-info\");\r\n      const id = img.getAttribute(\"data-photoid\");\r\n      let photo = this.props.photos.find(img => img.photoId === id);\r\n      if (!photo) {\r\n        /**If photo is not found in filteredPhotos search for it in favorites */\r\n        photo = this.props.favorites.find(img => img.photoId === id);\r\n      }\r\n\r\n      const openLightBox = this.props.openLightbox.bind(this, null, {\r\n        index: 0,\r\n        photo\r\n      });\r\n\r\n      img.onclick = openLightBox;\r\n    };\r\n\r\n    window.largeInfowindow.addListener(\"domready\", attachImgOnClick);\r\n\r\n    /** ANTIMERIDIAN */\r\n    var antimeridianCoords = [\r\n      { lat: 90, lng: 180 },\r\n      { lat: -90, lng: 180 }\r\n    ];\r\n    var antimeridianPath = new window.google.maps.Polyline({\r\n      path: antimeridianCoords,\r\n      geodesic: true,\r\n      strokeColor: \"#FF0000\",\r\n      strokeOpacity: 0.9,\r\n      strokeWeight: 12\r\n    });\r\n\r\n    antimeridianPath.setMap(window.map);\r\n\r\n    window.antiMeridianInfo = new window.google.maps.InfoWindow({\r\n      maxWidth: 200\r\n    });\r\n    window.antiMeridianInfo\r\n      .setContent(`The red line that you just clicked is the the 180th meridian \r\n      (sometimes called antimeridian).\r\n      Please make sure that the antimeridian is outside the screen when you make a request for photos.\r\n      (pan the map to the left or right untill the red line is no longer in view)`);\r\n\r\n    antimeridianPath.addListener(\"click\", e => {\r\n      window.antiMeridianInfo.setPosition(e.latLng);\r\n      window.antiMeridianInfo.open(window.map);\r\n    });\r\n    /** END ANTIMERIDIAN */\r\n\r\n    window.google.maps.event.addListenerOnce(window.map, \"idle\", () => {\r\n      document.getElementsByTagName(\"iframe\")[0].title = \"Google Maps\";\r\n      /* https://stackoverflow.com/questions/49012240/google-maps-js-iframe-title \r\n            used to pass the (false possitive) accessibility audits */\r\n    });\r\n  };\r\n\r\n  createPhotoMarker = (pin, show) => {\r\n    let marker = new window.google.maps.Marker({\r\n      position: pin.geolocation,\r\n      map: show ? window.map : null,\r\n      icon: photoMarker,\r\n      scaledSize: 0.5,\r\n      title: pin.title,\r\n      animation: window.google.maps.Animation.DROP,\r\n      photoId: pin.photoId,\r\n      color: \"blue\"\r\n    });\r\n\r\n    // window.SETIMG = () => window.LASTMARKER.setIcon(heartMarker);\r\n    // window.RESET = () => {\r\n    //   this.state.photoMarkers.forEach(pin => pin.setMap(null));\r\n    //   this.setState({ photoMarkers: [] });\r\n    // };\r\n\r\n    this.setState(prevState => {\r\n      const pins = prevState.photoMarkers;\r\n      pins.push(marker);\r\n      return { photoMarkers: pins };\r\n    });\r\n\r\n    marker.addListener(\"click\", function() {\r\n      window.map.panTo(this.getPosition());\r\n\r\n      window.largeInfowindow.setContent(infoWindowContents(pin));\r\n\r\n      // window.map.setZoom(14);\r\n      // window.map.openInfoWindow(marker, window.largeInfowindow);\r\n      // toggleBounce();\r\n      window.largeInfowindow.open(window.map, marker);\r\n    });\r\n\r\n    window.photoMarker = marker;\r\n  };\r\n\r\n  showAllPhotoMarkers = () => {\r\n    const map = window.map;\r\n    const markers = this.state.photoMarkers;\r\n    for (let i = 0; i < markers.length; i++) {\r\n      markers[i].setMap(map);\r\n    }\r\n  };\r\n\r\n  hideAllPhotoMarkers = () => {\r\n    const markers = this.state.photoMarkers;\r\n    for (let i = 0; i < markers.length; i++) {\r\n      markers[i].setMap(null);\r\n    }\r\n  };\r\n\r\n  showAllFavorites = () => {\r\n    const map = window.map;\r\n    const markers = this.state.favorites;\r\n    for (let i = 0; i < markers.length; i++) {\r\n      markers[i].setMap(map);\r\n    }\r\n  };\r\n\r\n  hideAllFavorites = () => {\r\n    const markers = this.state.favorites;\r\n    for (let i = 0; i < markers.length; i++) {\r\n      markers[i].setMap(null);\r\n    }\r\n  };\r\n\r\n  pinFavorite = (img, show) => {\r\n    let marker = new window.google.maps.Marker({\r\n      position: img.geolocation,\r\n      map: show ? window.map : null,\r\n      icon: heartMarker,\r\n      title: img.title,\r\n      animation: window.google.maps.Animation.DROP,\r\n      photoId: img.photoId,\r\n      favorite: true\r\n    });\r\n\r\n    this.setState(prevState => {\r\n      const favorites = prevState.favorites;\r\n      favorites.push(marker);\r\n      return { favorites: favorites };\r\n    });\r\n\r\n    marker.addListener(\"click\", function() {\r\n      window.map.panTo(this.getPosition());\r\n      window.largeInfowindow.setContent(infoWindowContents(img));\r\n      window.largeInfowindow.open(window.map, marker);\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        role=\"application\"\r\n        aria-label=\"Map\"\r\n        id=\"map-container\"\r\n        style={\r\n          this.props.screenWidth900px\r\n            ? mapStyle\r\n            : {\r\n                ...mapStyle,\r\n                minHeight: \"50vh\",\r\n                flexGrow: \"1\"\r\n              }\r\n        }\r\n      ></div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default React.memo(Map);\r\n","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}"],"sourceRoot":""}